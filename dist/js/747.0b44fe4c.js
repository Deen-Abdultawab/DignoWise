"use strict";(self["webpackChunkdignowise"]=self["webpackChunkdignowise"]||[]).push([[747],{988:function(t,e,n){n.d(e,{QK:function(){return Mv}});n(560);var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(n=1,r&&(i=2&a[0]?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;"function"===typeof SuppressedError&&SuppressedError;n(3429);var f=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},l=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var s=t[n++],a=t[n++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,f=(3&o)<<4|a>>4,l=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(l=64)),r.push(n[h],n[f],n[l],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(f(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,a=s?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var h=i<t.length,f=h?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==f)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==c){var p=a<<4&240|c>>2;if(r.push(p),64!==f){var d=c<<6&192|f;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},d=function(t){var e=f(t);return p.encodeByteArray(e,!0)},v=function(t){return d(t).replace(/\./g,"")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function g(t){return y(void 0,t)}function y(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&m(r)&&(t[r]=y(t[r],e[r]));return t}function m(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=o({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[v(JSON.stringify(n)),v(JSON.stringify(a)),u].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function E(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())}function T(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function _(){return"object"===typeof self&&self.self===self}function S(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function A(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function N(){return I().indexOf("Electron/")>=0}function k(){var t=I();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D(){return I().indexOf("MSAppHost/")>=0}function C(){return!T()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var R="FirebaseError",O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=R,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,x.prototype.create),o}return i(e,t),e}(Error),x=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?P(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function P(t,e){return t.replace(L,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var L=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}})();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=U(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function U(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}function j(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function q(t){return t&&t._delegate?t._delegate:t}var B=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),K="[DEFAULT]",G=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new b;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(z(t))try{this.getOrInitializeService({instanceIdentifier:K})}catch(l){}try{for(var r=u(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=c(i.value,2),s=o[0],a=o[1],h=this.normalizeInstanceIdentifier(s);try{var f=this.getOrInitializeService({instanceIdentifier:h});a.resolve(f)}catch(l){}}}catch(p){e={error:p}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=K),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(h(h([],c(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),c(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=K),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=K),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=u(this.instancesDeferred.entries()),h=a.next();!h.done;h=a.next()){var f=c(h.value,2),l=f[0],p=f[1],d=this.normalizeInstanceIdentifier(l);o===d&&p.resolve(s)}}catch(v){e={error:v}}finally{try{h&&!h.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=u(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(c){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:H(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(dv){}return i||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=K),this.component?this.component.multipleInstances?t:K:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t){return t===K?void 0:t}function z(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W,Q=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new G(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function X(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y,J=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(Y||(Y={}));var $,Z={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},tt=Y.INFO,et=(W={},W[Y.DEBUG]="log",W[Y.VERBOSE]="log",W[Y.INFO]="info",W[Y.WARN]="warn",W[Y.ERROR]="error",W),nt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=et[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,X(["["+i+"]  "+t.name+":"],n))}},rt=function(){function t(t){this.name=t,this._logLevel=tt,this._logHandler=nt,this._userLogHandler=null,J.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Y))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?Z[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,Y.DEBUG],t)),this._logHandler.apply(this,X([this,Y.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,Y.VERBOSE],t)),this._logHandler.apply(this,X([this,Y.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,Y.INFO],t)),this._logHandler.apply(this,X([this,Y.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,Y.WARN],t)),this._logHandler.apply(this,X([this,Y.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,Y.ERROR],t)),this._logHandler.apply(this,X([this,Y.ERROR],t))},t}();function it(t){J.forEach((function(e){e.setLogLevel(t)}))}function ot(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Z[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:Y[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=J;r<i.length;r++){var o=i[r];n(o)}}var st,at=($={},$["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",$["bad-app-name"]="Illegal App name: '{$appName}",$["duplicate-app"]="Firebase App named '{$appName}' already exists",$["app-deleted"]="Firebase App named '{$appName}' already deleted",$["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",$["invalid-log-argument"]="First argument to `onLog` must be null or a function.",$),ut=new x("app","Firebase",at),ct="@firebase/app",ht="0.6.30",ft="@firebase/analytics",lt="@firebase/app-check",pt="@firebase/auth",dt="@firebase/database",vt="@firebase/functions",gt="@firebase/installations",yt="@firebase/messaging",mt="@firebase/performance",bt="@firebase/remote-config",wt="@firebase/storage",It="@firebase/firestore",Et="firebase-wrapper",Tt="[DEFAULT]",_t=(st={},st[ct]="fire-core",st[ft]="fire-analytics",st[lt]="fire-app-check",st[pt]="fire-auth",st[dt]="fire-rtdb",st[vt]="fire-fn",st[gt]="fire-iid",st[yt]="fire-fcm",st[mt]="fire-perf",st[bt]="fire-rc",st[wt]="fire-gcs",st[It]="fire-fst",st["fire-js"]="fire-js",st[Et]="fire-js-all",st),St=new rt("@firebase/app"),At=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=g(t),this.container=new Q(e.name),this._addComponent(new B("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=Tt),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Tt),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){St.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ut.create("app-deleted",{appName:this.name_})},t}();At.prototype.name&&At.prototype.options||At.prototype.delete||console.log("dc");var Nt="8.10.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:s,app:o,registerVersion:c,setLogLevel:it,onLog:h,apps:null,SDK_VERSION:Nt,INTERNAL:{registerComponent:u,removeApp:i,components:n,useAsService:f}};function i(t){delete e[t]}function o(t){if(t=t||Tt,!M(e,t))throw ut.create("no-app",{appName:t});return e[t]}function s(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=Tt);var a=s.name;if("string"!==typeof a||!a)throw ut.create("bad-app-name",{appName:String(a)});if(M(e,a))throw ut.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u}function a(){return Object.keys(e).map((function(t){return e[t]}))}function u(i){var s=i.name;if(n.has(s))return St.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===i.type?r[s]:null;if(n.set(s,i),"PUBLIC"===i.type){var a=function(t){if(void 0===t&&(t=o()),"function"!==typeof t[s])throw ut.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==i.serviceProps&&y(a,i.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,i.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(i)}return"PUBLIC"===i.type?r[s]:null}function c(t,e,n){var r,i=null!==(r=_t[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void St.warn(a.join(" "))}u(new B(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function h(t,e){if(null!==t&&"function"!==typeof t)throw ut.create("invalid-log-argument");ot(t,e)}function f(t,e){if("serverAuth"===e)return null;var n=e;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:a}),o["App"]=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){var t=kt(At);function e(e){y(t,e)}return t.INTERNAL=o(o({},t.INTERNAL),{createFirebaseNamespace:Dt,extendNamespace:e,createSubscribe:F,ErrorFactory:x,deepExtend:y}),t}var Ct=Dt(),Rt=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(Ot(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){t.INTERNAL.registerComponent(new B("platform-logger",(function(t){return new Rt(t)}),"PRIVATE")),t.registerVersion(ct,ht,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(_()&&void 0!==self.firebase){St.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Pt=self.firebase.SDK_VERSION;Pt&&Pt.indexOf("LITE")>=0&&St.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Lt=Ct.initializeApp;Ct.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T()&&St.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Lt.apply(void 0,t)};var Mt=Ct;xt(Mt);var Ft=Mt,Vt="firebase",Ut="8.10.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ft.registerVersion(Vt,Ut,"app"),Ft.SDK_VERSION=Ut;n(4224),n(1121),n(7133);var jt=function(t,e){return jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},jt(t,e)};function qt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Bt(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Kt,Gt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ht=Ht||{},zt=Gt||self;function Wt(){}function Qt(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function Xt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function Yt(t){return Object.prototype.hasOwnProperty.call(t,Jt)&&t[Jt]||(t[Jt]=++$t)}var Jt="closure_uid_"+(1e9*Math.random()>>>0),$t=0;function Zt(t,e,n){return t.call.apply(t.bind,arguments)}function te(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ee(t,e,n){return ee=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zt:te,ee.apply(null,arguments)}function ne(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function re(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ie(){this.s=this.s,this.o=this.o}var oe=0,se={};ie.prototype.s=!1,ie.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=oe)){var t=Yt(this);delete se[t]}},ie.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ae=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ue=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ce(t){t:{for(var e=Ni,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function he(t){return Array.prototype.concat.apply([],arguments)}function fe(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function le(t){return/^[\s\xa0]*$/.test(t)}var pe,de=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ve(t,e){return-1!=t.indexOf(e)}function ge(t,e){return t<e?-1:t>e?1:0}t:{var ye=zt.navigator;if(ye){var me=ye.userAgent;if(me){pe=me;break t}}pe=""}function be(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function we(t){var e={};for(var n in t)e[n]=t[n];return e}var Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<Ie.length;o++)n=Ie[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Te(t){return Te[" "](t),t}function _e(t){var e=Fe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}Te[" "]=Wt;var Se,Ae=ve(pe,"Opera"),Ne=ve(pe,"Trident")||ve(pe,"MSIE"),ke=ve(pe,"Edge"),De=ke||Ne,Ce=ve(pe,"Gecko")&&!(ve(pe.toLowerCase(),"webkit")&&!ve(pe,"Edge"))&&!(ve(pe,"Trident")||ve(pe,"MSIE"))&&!ve(pe,"Edge"),Re=ve(pe.toLowerCase(),"webkit")&&!ve(pe,"Edge");function Oe(){var t=zt.document;return t?t.documentMode:void 0}t:{var xe="",Pe=function(){var t=pe;return Ce?/rv:([^\);]+)(\)|;)/.exec(t):ke?/Edge\/([\d\.]+)/.exec(t):Ne?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Re?/WebKit\/(\S+)/.exec(t):Ae?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Pe&&(xe=Pe?Pe[1]:""),Ne){var Le=Oe();if(null!=Le&&Le>parseFloat(xe)){Se=String(Le);break t}}Se=xe}var Me,Fe={};function Ve(){return _e((function(){for(var t=0,e=de(String(Se)).split("."),n=de("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ge(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ge(0==o[2].length,0==s[2].length)||ge(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(zt.document&&Ne){var Ue=Oe();Me=Ue||(parseInt(Se,10)||void 0)}else Me=void 0;var je=Me,qe=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{zt.addEventListener("test",Wt,e),zt.removeEventListener("test",Wt,e)}catch(n){}return t}();function Be(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ke(t,e){if(Be.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ce){t:{try{Te(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:Ge[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ke.Z.h.call(this)}}Be.prototype.h=function(){this.defaultPrevented=!0},re(Ke,Be);var Ge={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),ze=0;function We(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ze,this.ca=this.fa=!1}function Qe(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Xe(t){this.src=t,this.g={},this.h=0}function Ye(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=ae(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Qe(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Je(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Xe.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Je(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):(e=new We(e,this.src,o,!!r,i),e.fa=n,t.push(e)),e};var $e="closure_lm_"+(1e6*Math.random()|0),Ze={};function tn(t,e,n,r,i){if(r&&r.once)return rn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);return null}return n=fn(n),t&&t[He]?t.N(e,n,Xt(r)?!!r.capture:!!r,i):en(t,e,n,!1,r,i)}function en(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Xt(i)?!!i.capture:!!i,a=cn(t);if(a||(t[$e]=a=new Xe(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=nn(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(an(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function nn(){function t(n){return e.call(t.src,t.listener,n)}var e=un;return t}function rn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)rn(t,e[o],n,r,i);return null}return n=fn(n),t&&t[He]?t.O(e,n,Xt(r)?!!r.capture:!!r,i):en(t,e,n,!0,r,i)}function on(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);else r=Xt(r)?!!r.capture:!!r,n=fn(n),t&&t[He]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Je(o,n,r,i),-1<n&&(Qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=cn(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Je(e,n,r,i)),(n=-1<t?e[t]:null)&&sn(n))}function sn(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[He])Ye(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(an(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Ye(n,t),0==n.h&&(n.src=null,e[$e]=null)):Qe(t)}}}function an(t){return t in Ze?Ze[t]:Ze[t]="on"+t}function un(t,e){if(t.ca)t=!0;else{e=new Ke(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&sn(t),t=n.call(r,e)}return t}function cn(t){return t=t[$e],t instanceof Xe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(t){return"function"===typeof t?t:(t[hn]||(t[hn]=function(e){return t.handleEvent(e)}),t[hn])}function ln(){ie.call(this),this.i=new Xe(this),this.P=this,this.I=null}function pn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new Be(e,t);else if(e instanceof Be)e.target=e.target||t;else{var i=e;e=new Be(r,t),Ee(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=dn(s,r,!0,e)&&i}if(s=e.g=t,i=dn(s,r,!0,e)&&i,i=dn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=dn(s,r,!1,e)&&i}function dn(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Ye(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}re(ln,ie),ln.prototype[He]=!0,ln.prototype.removeEventListener=function(t,e,n,r){on(this,t,e,n,r)},ln.prototype.M=function(){if(ln.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Qe(n[r]);delete e.g[t],e.h--}}this.I=null},ln.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ln.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var vn=zt.JSON.stringify;function gn(){var t=Sn,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var yn,mn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=bn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),bn=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new wn}),(function(t){return t.reset()})),wn=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function In(t){zt.setTimeout((function(){throw t}),0)}function En(t,e){yn||Tn(),_n||(yn(),_n=!0),Sn.add(t,e)}function Tn(){var t=zt.Promise.resolve(void 0);yn=function(){t.then(An)}}var _n=!1,Sn=new mn;function An(){for(var t;t=gn();){try{t.h.call(t.g)}catch(n){In(n)}var e=bn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_n=!1}function Nn(t,e){ln.call(this),this.h=t||1,this.g=e||zt,this.j=ee(this.kb,this),this.l=Date.now()}function kn(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Dn(t,e,n){if("function"===typeof t)n&&(t=ee(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ee(t.handleEvent,t)}return 2147483647<Number(e)?-1:zt.setTimeout(t,e||0)}function Cn(t){t.g=Dn((function(){t.g=null,t.i&&(t.i=!1,Cn(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}re(Nn,ln),Kt=Nn.prototype,Kt.da=!1,Kt.S=null,Kt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),pn(this,"tick"),this.da&&(kn(this),this.start()))}},Kt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kt.M=function(){Nn.Z.M.call(this),kn(this),delete this.g};var Rn=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return qt(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Cn(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ie);function On(t){ie.call(this),this.h=t,this.g={}}re(On,ie);var xn=[];function Pn(t,e,n,r){Array.isArray(n)||(n&&(xn[0]=n.toString()),n=xn);for(var i=0;i<n.length;i++){var o=tn(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Ln(t){be(t.g,(function(t,e){this.g.hasOwnProperty(e)&&sn(t)}),t),t.g={}}function Mn(){this.g=!0}function Fn(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}function Vn(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}function Un(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+qn(t,n)+(r?" "+r:"")}))}function jn(t,e){t.info((function(){return"TIMEOUT: "+e}))}function qn(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return vn(n)}catch(a){return e}}On.prototype.M=function(){On.Z.M.call(this),Ln(this)},On.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mn.prototype.Aa=function(){this.g=!1},Mn.prototype.info=function(){};var Bn={},Kn=null;function Gn(){return Kn=Kn||new ln}function Hn(t){Be.call(this,Bn.Ma,t)}function zn(t){var e=Gn();pn(e,new Hn(e,t))}function Wn(t,e){Be.call(this,Bn.STAT_EVENT,t),this.stat=e}function Qn(t){var e=Gn();pn(e,new Wn(e,t))}function Xn(t,e){Be.call(this,Bn.Na,t),this.size=e}function Yn(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return zt.setTimeout((function(){t()}),e)}Bn.Ma="serverreachability",re(Hn,Be),Bn.STAT_EVENT="statevent",re(Wn,Be),Bn.Na="timingevent",re(Xn,Be);var Jn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$n={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zn(){}function tr(t){return t.h||(t.h=t.i())}function er(){}Zn.prototype.h=null;var nr,rr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ir(){Be.call(this,"d")}function or(){Be.call(this,"c")}function sr(){}function ar(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new On(this),this.P=cr,t=De?125:void 0,this.W=new Nn(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ur}function ur(){this.i=null,this.g="",this.h=!1}re(ir,Be),re(or,Be),re(sr,Zn),sr.prototype.g=function(){return new XMLHttpRequest},sr.prototype.i=function(){return{}},nr=new sr;var cr=45e3,hr={},fr={};function lr(t,e,n){t.K=1,t.v=Fr(Rr(e)),t.s=n,t.U=!0,pr(t,null)}function pr(t,e){t.F=Date.now(),yr(t),t.A=Rr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),$r(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ur,t.g=io(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Rn(ee(t.Ia,t,t.g),t.O)),Pn(t.V,t.g,"readystatechange",t.gb),e=t.H?we(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),zn(1),Fn(t.j,t.u,t.A,t.m,t.X,t.s)}function dr(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function vr(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if(r=gr(t,n),r==fr){4==e&&(t.o=4,Qn(14),i=!1),Un(t.j,t.m,null,"[Incomplete Response]");break}if(r==hr){t.o=4,Qn(15),Un(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Un(t.j,t.m,r,null),Er(t,r)}dr(t)&&r!=fr&&r!=hr&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Qn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yi(e),e.L=!0,Qn(11))):(Un(t.j,t.m,n,"[Invalid Chunked Response]"),Ir(t),wr(t))}function gr(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?fr:(n=Number(e.substring(n,r)),isNaN(n)?hr:(r+=1,r+n>e.length?fr:(e=e.substr(r,n),t.C=r+n,e)))}function yr(t){t.Y=Date.now()+t.P,mr(t,t.P)}function mr(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Yn(ee(t.eb,t),e)}function br(t){t.B&&(zt.clearTimeout(t.B),t.B=null)}function wr(t){0==t.l.G||t.I||Zi(t.l,t)}function Ir(t){br(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,kn(t.W),Ln(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Er(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||si(n.i,t)))if(n.I=t.N,!t.J&&si(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;$i(n),ji(n)}Xi(n),Qn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Yn(ee(n.ab,n),6e3));if(1>=oi(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else eo(n,11)}else if((t.J||n.g==t)&&$i(n),!le(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=r.i;!f.g&&(ve(h,"spdy")||ve(h,"quic")||ve(h,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ai(f,f.h),f.h=null))}if(r.D){var l=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;l&&(r.sa=l,Mr(r.F,r.D,l))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var p=t;if(r.oa=ro(r,r.H?r.la:null,r.W),p.J){ui(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(br(d),yr(d)),r.g=p}else Qi(r);0<n.l.length&&Ki(n)}else"stop"!=o[0]&&"close"!=o[0]||eo(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?eo(n,7):Ui(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}zn(4)}catch(o){}}function Tr(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(Qt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function _r(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qt(t)||"string"===typeof t)ue(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Qt(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Tr(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Sr(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Sr)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ar(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Nr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],Nr(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Nr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}Kt=ar.prototype,Kt.setTimeout=function(t){this.P=t},Kt.gb=function(t){t=t.target;var e=this.L;e&&3==xi(t)?e.l():this.Ia(t)},Kt.Ia=function(t){try{if(t==this.g)t:{var e=xi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||De||this.g&&(this.h.h||this.g.ga()||Pi(this.g)))){this.I||4!=e||7==n||zn(8==n||0>=r?3:2),br(this);var i=this.g.ba();this.N=i;e:if(dr(this)){var o=Pi(this.g);t="";var s=o.length,a=4==xi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ir(this),wr(this);var u="";break e}this.h.i=new zt.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,Vn(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(c)){var f=c;break e}}f=null}if(!(i=f)){this.i=!1,this.o=3,Qn(12),Ir(this),wr(this);break t}Un(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Er(this,i)}this.U?(vr(this,e,u),De&&this.i&&3==e&&(Pn(this.V,this.W,"tick",this.fb),this.W.start())):(Un(this.j,this.m,u,null),Er(this,u)),4==e&&Ir(this),this.i&&!this.I&&(4==e?Zi(this.l,this):(this.i=!1,yr(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Qn(12)):(this.o=0,Qn(13)),Ir(this),wr(this)}}}catch(e){}},Kt.fb=function(){if(this.g){var t=xi(this.g),e=this.g.ga();this.C<e.length&&(br(this),vr(this,t,e),this.i&&4!=t&&yr(this))}},Kt.cancel=function(){this.I=!0,Ir(this)},Kt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(jn(this.j,this.A),2!=this.K&&(zn(3),Qn(17)),Ir(this),this.o=2,wr(this)):mr(this,this.Y-t)},Kt=Sr.prototype,Kt.R=function(){Ar(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Kt.T=function(){return Ar(this),this.g.concat()},Kt.get=function(t,e){return Nr(this.h,t)?this.h[t]:e},Kt.set=function(t,e){Nr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Kt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dr(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Cr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Cr){this.g=void 0!==e?e:t.g,Or(this,t.j),this.s=t.s,xr(this,t.i),Pr(this,t.m),this.l=t.l,e=t.h;var n=new Qr;n.i=e.i,e.g&&(n.g=new Sr(e.g),n.h=e.h),Lr(this,n),this.o=t.o}else t&&(n=String(t).match(kr))?(this.g=!!e,Or(this,n[1]||"",!0),this.s=jr(n[2]||""),xr(this,n[3]||"",!0),Pr(this,n[4]),this.l=jr(n[5]||"",!0),Lr(this,n[6]||"",!0),this.o=jr(n[7]||"")):(this.g=!!e,this.h=new Qr(null,this.g))}function Rr(t){return new Cr(t)}function Or(t,e,n){t.j=n?jr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xr(t,e,n){t.i=n?jr(e,!0):e}function Pr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Lr(t,e,n){e instanceof Qr?(t.h=e,ti(t.h,t.g)):(n||(e=qr(e,zr)),t.h=new Qr(e,t.g))}function Mr(t,e,n){t.h.set(e,n)}function Fr(t){return Mr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Vr(t){return t instanceof Cr?Rr(t):new Cr(t,void 0)}function Ur(t,e,n,r){var i=new Cr(null,void 0);return t&&Or(i,t),e&&xr(i,e),n&&Pr(i,n),r&&(i.l=r),i}function jr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qr(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Br),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Br(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Cr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qr(e,Kr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qr(e,Kr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(qr(n,"/"==n.charAt(0)?Hr:Gr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qr(n,Wr)),t.join("")};var Kr=/[#\/\?@]/g,Gr=/[#\?:]/g,Hr=/[#\?]/g,zr=/[#\?@]/g,Wr=/#/g;function Qr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xr(t){t.g||(t.g=new Sr,t.h=0,t.i&&Dr(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yr(t,e){Xr(t),e=Zr(t,e),Nr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Nr(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ar(t)))}function Jr(t,e){return Xr(t),e=Zr(t,e),Nr(t.g.h,e)}function $r(t,e,n){Yr(t,e),0<n.length&&(t.i=null,t.g.set(Zr(t,e),fe(n)),t.h+=n.length)}function Zr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ti(t,e){e&&!t.j&&(Xr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yr(this,e),$r(this,n,t))}),t)),t.j=e}Kt=Qr.prototype,Kt.add=function(t,e){Xr(this),this.i=null,t=Zr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Kt.forEach=function(t,e){Xr(this),this.g.forEach((function(n,r){ue(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Kt.T=function(){Xr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Kt.R=function(t){Xr(this);var e=[];if("string"===typeof t)Jr(this,t)&&(e=he(e,this.g.get(Zr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=he(e,t[n])}return e},Kt.set=function(t,e){return Xr(this),this.i=null,t=Zr(this,t),Jr(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Kt.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e},Kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var ei=function(){function t(t,e){this.h=t,this.g=e}return t}();function ni(t){this.l=t||ri,zt.PerformanceNavigationTiming?(t=zt.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(zt.g&&zt.g.Ea&&zt.g.Ea()&&zt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ri=10;function ii(t){return!!t.h||!!t.g&&t.g.size>=t.j}function oi(t){return t.h?1:t.g?t.g.size:0}function si(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ai(t,e){t.g?t.g.add(e):t.h=e}function ui(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ci(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Bt(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return fe(t.i)}function hi(){}function fi(){this.g=new hi}function li(t,e,n){var r=n||"";try{_r(t,(function(t,n){var i=t;Xt(t)&&(i=vn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pi(t,e){var n=new Mn;if(zt.Image){var r=new Image;r.onload=ne(di,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ne(di,n,r,"TestLoadImage: error",!1,e),r.onabort=ne(di,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ne(di,n,r,"TestLoadImage: timeout",!1,e),zt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function di(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function vi(t){this.l=t.$b||null,this.j=t.ib||!1}function gi(t,e){ln.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=yi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ni.prototype.cancel=function(){var t,e;if(this.i=ci(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Bt(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},hi.prototype.stringify=function(t){return zt.JSON.stringify(t,void 0)},hi.prototype.parse=function(t){return zt.JSON.parse(t,void 0)},re(vi,Zn),vi.prototype.g=function(){return new gi(this.l,this.j)},vi.prototype.i=function(t){return function(){return t}}({}),re(gi,ln);var yi=0;function mi(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function bi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,wi(t)}function wi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Kt=gi.prototype,Kt.open=function(t,e){if(this.readyState!=yi)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,wi(this)},Kt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||zt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bi(this)),this.readyState=yi},Kt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof zt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mi(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Kt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?bi(this):wi(this),3==this.readyState&&mi(this)}},Kt.Ua=function(t){this.g&&(this.response=this.responseText=t,bi(this))},Kt.Ta=function(t){this.g&&(this.response=t,bi(this))},Kt.ha=function(){this.g&&bi(this)},Kt.setRequestHeader=function(t,e){this.v.append(t,e)},Kt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Kt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Ii=zt.JSON.parse;function Ei(t){ln.call(this),this.headers=new Sr,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ti,this.K=this.L=!1}re(Ei,ln);var Ti="",_i=/^https?$/i,Si=["POST","PUT"];function Ai(t){return Ne&&Ve()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Ni(t){return"content-type"==t.toLowerCase()}function ki(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Di(t),Ri(t)}function Di(t){t.D||(t.D=!0,pn(t,"complete"),pn(t,"error"))}function Ci(t){if(t.h&&"undefined"!=typeof Ht&&(!t.C[1]||4!=xi(t)||2!=t.ba()))if(t.v&&4==xi(t))Dn(t.Fa,0,t);else if(pn(t,"readystatechange"),4==xi(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(kr)[1]||null;if(!o&&zt.self&&zt.self.location){var s=zt.self.location.protocol;o=s.substr(0,s.length-1)}i=!_i.test(o?o.toLowerCase():"")}e=i}if(e)pn(t,"complete"),pn(t,"success");else{t.m=6;try{var a=2<xi(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Di(t)}}finally{Ri(t)}}}function Ri(t,e){if(t.g){Oi(t);var n=t.g,r=t.C[0]?Wt:null;t.g=null,t.C=null,e||pn(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Oi(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(zt.clearTimeout(t.A),t.A=null)}function xi(t){return t.g?t.g.readyState:0}function Pi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Ti:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Li(t){var e="";return be(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Mi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Li(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Mr(t,e,n))}function Fi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Vi(t){this.za=0,this.l=[],this.h=new Mn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fi("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fi("baseRetryDelayMs",5e3,t),this.$a=Fi("retryDelaySeedMs",1e4,t),this.Ya=Fi("forwardChannelMaxRetries",2,t),this.ra=Fi("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new ni(t&&t.concurrentRequestLimit),this.Ca=new fi,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Ui(t){if(qi(t),3==t.G){var e=t.V++,n=Rr(t.F);Mr(n,"SID",t.J),Mr(n,"RID",e),Mr(n,"TYPE","terminate"),zi(t,n),e=new ar(t,t.h,e,void 0),e.K=2,e.v=Fr(Rr(n)),n=!1,zt.navigator&&zt.navigator.sendBeacon&&(n=zt.navigator.sendBeacon(e.v.toString(),"")),!n&&zt.Image&&((new Image).src=e.v,n=!0),n||(e.g=io(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yr(e)}no(t)}function ji(t){t.g&&(Yi(t),t.g.cancel(),t.g=null)}function qi(t){ji(t),t.u&&(zt.clearTimeout(t.u),t.u=null),$i(t),t.i.cancel(),t.m&&("number"===typeof t.m&&zt.clearTimeout(t.m),t.m=null)}function Bi(t,e){t.l.push(new ei(t.Za++,e)),3==t.G&&Ki(t)}function Ki(t){ii(t.i)||t.m||(t.m=!0,En(t.Ha,t),t.C=0)}function Gi(t,e){return!(oi(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=Yn(ee(t.Ha,t,e),to(t,t.C)),t.C++,!0))}function Hi(t,e){var n;n=e?e.m:t.V++;var r=Rr(t.F);Mr(r,"SID",t.J),Mr(r,"RID",n),Mr(r,"AID",t.U),zi(t,r),t.o&&t.s&&Mi(r,t.o,t.s),n=new ar(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Wi(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),ai(t.i,n),lr(n,r,e)}function zi(t,e){t.j&&_r({},(function(t,n){Mr(e,n,t)}))}function Wi(t,e,n){n=Math.min(t.l.length,n);var r=t.j?ee(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(c-=o,0>c)o=Math.max(0,i[u].h-100),a=!1;else try{li(h,s,"req"+c+"_")}catch(qo){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Qi(t){t.g||t.u||(t.Y=1,En(t.Ga,t),t.A=0)}function Xi(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Yn(ee(t.Ga,t),to(t,t.A)),t.A++,!0)}function Yi(t){null!=t.B&&(zt.clearTimeout(t.B),t.B=null)}function Ji(t){t.g=new ar(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Rr(t.oa);Mr(e,"RID","rpc"),Mr(e,"SID",t.J),Mr(e,"CI",t.N?"0":"1"),Mr(e,"AID",t.U),zi(t,e),Mr(e,"TYPE","xmlhttp"),t.o&&t.s&&Mi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Fr(Rr(e)),n.s=null,n.U=!0,pr(n,t)}function $i(t){null!=t.v&&(zt.clearTimeout(t.v),t.v=null)}function Zi(t,e){var n=null;if(t.g==e){$i(t),Yi(t),t.g=null;var r=2}else{if(!si(t.i,e))return;n=e.D,ui(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Gn(),pn(r,new Xn(r,n,e,i)),Ki(t)}else Qi(t);else if(i=e.o,3==i||0==i&&0<t.I||!(1==r&&Gi(t,e)||2==r&&Xi(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:eo(t,5);break;case 4:eo(t,10);break;case 3:eo(t,6);break;default:eo(t,2)}}function to(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function eo(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=ee(t.jb,t);n||(n=new Cr("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||Or(n,"https"),Fr(n)),pi(n.toString(),r)}else Qn(2);t.G=0,t.j&&t.j.va(e),no(t),qi(t)}function no(t){t.G=0,t.I=-1,t.j&&(0==ci(t.i).length&&0==t.l.length||(t.i.i.length=0,fe(t.l),t.l.length=0),t.j.ua())}function ro(t,e,n){var r=Vr(n);if(""!=r.i)e&&xr(r,e+"."+r.i),Pr(r,r.m);else{var i=zt.location;r=Ur(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&be(t.aa,(function(t,e){Mr(r,e,t)})),e=t.D,n=t.sa,e&&n&&Mr(r,e,n),Mr(r,"VER",t.ma),zi(t,r),r}function io(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Ei(new vi({ib:!0})):new Ei(t.qa),e.L=t.H,e}function oo(){}function so(){if(Ne&&!(10<=Number(je)))throw Error("Environmental error: no available transport.")}function ao(t,e){ln.call(this),this.g=new Vi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!le(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!le(e)&&(this.g.D=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ho(this)}function uo(t){ir.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function co(){or.call(this),this.status=1}function ho(t){this.g=t}Kt=Ei.prototype,Kt.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nr.g(),this.C=this.u?tr(this.u):tr(nr),this.g.onreadystatechange=ee(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void ki(this,o)}t=n||"";var i=new Sr(this.headers);r&&_r(r,(function(t,e){i.set(e,t)})),r=ce(i.T()),n=zt.FormData&&t instanceof zt.FormData,!(0<=ae(Si,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Oi(this),0<this.B&&((this.K=Ai(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ee(this.pa,this)):this.A=Dn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){ki(this,o)}},Kt.pa=function(){"undefined"!=typeof Ht&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pn(this,"timeout"),this.abort(8))},Kt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pn(this,"complete"),pn(this,"abort"),Ri(this))},Kt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ri(this,!0)),Ei.Z.M.call(this)},Kt.Fa=function(){this.s||(this.F||this.v||this.l?Ci(this):this.cb())},Kt.cb=function(){Ci(this)},Kt.ba=function(){try{return 2<xi(this)?this.g.status:-1}catch(t){return-1}},Kt.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Kt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ii(e)}},Kt.Da=function(){return this.m},Kt.La=function(){return"string"===typeof this.j?this.j:String(this.j)},Kt=Vi.prototype,Kt.ma=8,Kt.G=1,Kt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Kt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ar(this,this.h,t,void 0),n=this.s;if(this.P&&(n?(n=we(n),Ee(n,this.P)):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(o="__data__"in o.g&&(o=o.g.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(r+=o,4096<r){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Wi(this,e,r),i=Rr(this.F),Mr(i,"RID",t),Mr(i,"CVER",22),this.D&&Mr(i,"X-HTTP-Session-Id",this.D),zi(this,i),this.o&&n&&Mi(i,this.o,n),ai(this.i,e),this.Ra&&Mr(i,"TYPE","init"),this.ja?(Mr(i,"$req",r),Mr(i,"SID","null"),e.$=!0,lr(e,i,null)):lr(e,i,r),this.G=2}}else 3==this.G&&(t?Hi(this,t):0==this.l.length||ii(this.i)||Hi(this))},Kt.Ga=function(){if(this.u=null,Ji(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Yn(ee(this.bb,this),t)}},Kt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qn(10),ji(this),Ji(this))},Kt.ab=function(){null!=this.v&&(this.v=null,ji(this),Xi(this),Qn(19))},Kt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Qn(2)):(this.h.info("Failed to ping google.com"),Qn(1))},Kt=oo.prototype,Kt.xa=function(){},Kt.wa=function(){},Kt.va=function(){},Kt.ua=function(){},Kt.Oa=function(){},so.prototype.g=function(t,e){return new ao(t,e)},re(ao,ln),ao.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),En(ee(t.hb,t,e))),Qn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ro(t,null,t.W),Ki(t)},ao.prototype.close=function(){Ui(this.g)},ao.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,Bi(this.g,e)}else this.v?(e={},e.__data__=vn(t),Bi(this.g,e)):Bi(this.g,t)},ao.prototype.M=function(){this.g.j=null,delete this.j,Ui(this.g),delete this.g,ao.Z.M.call(this)},re(uo,ir),re(co,or),re(ho,oo),ho.prototype.xa=function(){pn(this.g,"a")},ho.prototype.wa=function(t){pn(this.g,new uo(t))},ho.prototype.va=function(t){pn(this.g,new co(t))},ho.prototype.ua=function(){pn(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,ao.prototype.send=ao.prototype.u,ao.prototype.open=ao.prototype.m,ao.prototype.close=ao.prototype.close,Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,$n.COMPLETE="complete",er.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",ln.prototype.listen=ln.prototype.N,Ei.prototype.listenOnce=Ei.prototype.O,Ei.prototype.getLastError=Ei.prototype.La,Ei.prototype.getLastErrorCode=Ei.prototype.Da,Ei.prototype.getStatus=Ei.prototype.ba,Ei.prototype.getResponseJson=Ei.prototype.Qa,Ei.prototype.getResponseText=Ei.prototype.ga,Ei.prototype.send=Ei.prototype.ea;var fo=function(){return new so},lo=function(){return Gn()},po=Jn,vo=$n,go=Bn,yo={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},mo=vi,bo=er,wo=Ei,Io=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Io.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Eo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},To=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i(e,t),e}(Error),_o=new rt("@firebase/firestore");function So(){return _o.logLevel}function Ao(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(_o.logLevel<=Y.DEBUG){var r=e.map(Do);_o.debug.apply(_o,h(["Firestore (8.10.0): "+t],r))}}function No(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(_o.logLevel<=Y.ERROR){var r=e.map(Do);_o.error.apply(_o,h(["Firestore (8.10.0): "+t],r))}}function ko(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(_o.logLevel<=Y.WARN){var r=e.map(Do);_o.warn.apply(_o,h(["Firestore (8.10.0): "+t],r))}}function Do(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw No(e),new Error(e)}function Ro(t,e){t||Co()}function Oo(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Po=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=xo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Lo(t,e){return t<e?-1:t>e?1:0}function Mo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Fo(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new To(Eo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new To(Eo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new To(Eo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new To(Eo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Lo(this.nanoseconds,t.nanoseconds):Lo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Uo=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Vo(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ko=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Co(),void 0===n?n=t.length-e:n>t.length-e&&Co(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new To(Eo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Ko),Ho=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ho.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new To(Eo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new To(Eo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new To(Eo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new To(Eo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Ko),Wo=function(){function t(t){this.fields=t,t.sort(zo.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Mo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Qo=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Lo(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Qo.EMPTY_BYTE_STRING=new Qo("");var Xo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(t){if(Ro(!!t),"string"==typeof t){var e=0,n=Xo.exec(t);if(Ro(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Jo(t.seconds),nanos:Jo(t.nanos)}}function Jo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function $o(t){return"string"==typeof t?Qo.fromBase64String(t):Qo.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ts(t){var e=t.mapValue.fields.__previous_value__;return Zo(e)?ts(e):e}function es(t){var e=Yo(t.mapValue.fields.__local_write_time__.timestampValue);return new Vo(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t){return null==t}function rs(t){return 0===t&&1/t==-1/0}function is(t){return"number"==typeof t&&Number.isInteger(t)&&!rs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var os=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Go.fromString(e))},t.fromName=function(e){return new t(Go.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Go.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Go.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Go(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zo(t)?4:10:Co()}function as(t,e){var n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return es(t).isEqual(es(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Yo(t.timestampValue),r=Yo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return $o(t.bytesValue).isEqual($o(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Jo(t.geoPointValue.latitude)===Jo(e.geoPointValue.latitude)&&Jo(t.geoPointValue.longitude)===Jo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Jo(t.integerValue)===Jo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Jo(t.doubleValue),r=Jo(e.doubleValue);return n===r?rs(n)===rs(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Mo(t.arrayValue.values||[],e.arrayValue.values||[],as);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(jo(n)!==jo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!as(n[i],r[i])))return!1;return!0}(t,e);default:return Co()}}function us(t,e){return void 0!==(t.values||[]).find((function(t){return as(t,e)}))}function cs(t,e){var n=ss(t),r=ss(e);if(n!==r)return Lo(n,r);switch(n){case 0:return 0;case 1:return Lo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Jo(t.integerValue||t.doubleValue),r=Jo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return hs(t.timestampValue,e.timestampValue);case 4:return hs(es(t),es(e));case 5:return Lo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=$o(t),r=$o(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Lo(n[i],r[i]);if(0!==o)return o}return Lo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Lo(Jo(t.latitude),Jo(e.latitude));return 0!==n?n:Lo(Jo(t.longitude),Jo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=cs(n[i],r[i]);if(o)return o}return Lo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Lo(r[s],o[s]);if(0!==a)return a;var u=cs(n[r[s]],i[o[s]]);if(0!==u)return u}return Lo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Co()}}function hs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Lo(t,e);var n=Yo(t),r=Yo(e),i=Lo(n.seconds,r.seconds);return 0!==i?i:Lo(n.nanos,r.nanos)}function fs(t){return ls(t)}function ls(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Yo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?$o(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,os.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ls(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ls(t.fields[o])}return e+"}"}(t.mapValue):Co();var e,n}function ps(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ds(t){return!!t&&"integerValue"in t}function vs(t){return!!t&&"arrayValue"in t}function gs(t){return!!t&&"nullValue"in t}function ys(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ms(t){return!!t&&"mapValue"in t}function bs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return qo(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=bs(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bs(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ms(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=bs(e)},t.prototype.setAll=function(t){var e=this,n=zo.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=bs(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());ms(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return as(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];ms(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){qo(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(bs(this.value))},t}();function Is(t){var e=[];return qo(t.fields,(function(t,n){var r=new zo([t]);if(ms(n)){var i=Is(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Wo(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Es=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Uo.min(),ws.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ws.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ws.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ws.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ws.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ts=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ts(t,e,n,r,i,o,s)}function Ss(t){var e=Oo(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+fs(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ns(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Vs(e.startAt)),e.endAt&&(n+="|ub:",n+=Vs(e.endAt)),e.h=n}return e.h}function As(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!js(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!as(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bs(t.startAt,e.startAt)&&Bs(t.endAt,e.endAt)}function Ns(t){return os.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ks=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return i(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ds(t,n,r):"array-contains"===n?new xs(t,r):"in"===n?new Ps(t,r):"not-in"===n?new Ls(t,r):"array-contains-any"===n?new Ms(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Cs(t,n):new Rs(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(cs(e,this.value)):null!==e&&ss(this.value)===ss(e)&&this.m(cs(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Co()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ds=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=os.fromName(r.referenceValue),i}return i(e,t),e.prototype.matches=function(t){var e=os.comparator(t.key,this.key);return this.m(e)},e}(ks),Cs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Os("in",n),r}return i(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ks),Rs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Os("not-in",n),r}return i(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ks);function Os(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return os.fromName(t.referenceValue)}))}var xs=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return i(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return vs(e)&&us(e.arrayValue,this.value)},e}(ks),Ps=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return i(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&us(this.value.arrayValue,e)},e}(ks),Ls=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return i(e,t),e.prototype.matches=function(t){if(us(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!us(this.value.arrayValue,e)},e}(ks),Ms=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return i(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!vs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return us(e.value.arrayValue,t)}))},e}(ks),Fs=function(t,e){this.position=t,this.before=e};function Vs(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return fs(t)})).join(",")}var Us=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function js(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function qs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?os.comparator(os.fromName(s.referenceValue),n.key):cs(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Bs(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!as(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ks=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Gs(t,e,n,r,i,o,s,a){return new Ks(t,e,n,r,i,o,s,a)}function Hs(t){return new Ks(t)}function zs(t){return!ns(t.limit)&&"F"===t.limitType}function Ws(t){return!ns(t.limit)&&"L"===t.limitType}function Qs(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Xs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Ys(t){return null!==t.collectionGroup}function Js(t){var e=Oo(t);if(null===e.p){e.p=[];var n=Xs(e),r=Qs(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Us(n)),e.p.push(new Us(zo.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Us(zo.keyField(),u))}}}return e.p}function $s(t){var e=Oo(t);if(!e.T)if("F"===e.limitType)e.T=_s(e.path,e.collectionGroup,Js(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Js(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Us(o.field,s))}var a=e.endAt?new Fs(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Fs(e.startAt.position,!e.startAt.before):null;e.T=_s(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Zs(t,e,n){return new Ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ta(t,e){return As($s(t),$s(e))&&t.limitType===e.limitType}function ea(t){return Ss($s(t))+"|lt:"+t.limitType}function na(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+fs(e.value);var e})).join(", ")+"]"),ns(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Vs(t.startAt)),t.endAt&&(e+=", endAt: "+Vs(t.endAt)),"Target("+e+")"}($s(t))+"; limitType="+t.limitType+")"}function ra(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):os.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!qs(t.startAt,Js(t),e))&&(!t.endAt||!qs(t.endAt,Js(t),e))}(t,e)}function ia(t){return function(e,n){for(var r=!1,i=0,o=Js(t);i<o.length;i++){var s=o[i],a=oa(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function oa(t,e,n){var r=t.field.isKeyField()?os.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?cs(r,i):Co()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Co()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rs(e)?"-0":e}}function aa(t){return{integerValue:""+t}}function ua(t,e){return is(e)?aa(e):sa(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ca=function(){this._=void 0};function ha(t,e,n){return t instanceof pa?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof da?va(t,e):t instanceof ga?ya(t,e):function(t,e){var n=la(t,e),r=ba(n)+ba(t.A);return ds(n)&&ds(t.A)?aa(r):sa(t.R,r)}(t,e)}function fa(t,e,n){return t instanceof da?va(t,e):t instanceof ga?ya(t,e):n}function la(t,e){return t instanceof ma?ds(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(ca),da=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i(e,t),e}(ca);function va(t,e){for(var n=wa(e),r=function(t){n.some((function(e){return as(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ga=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i(e,t),e}(ca);function ya(t,e){for(var n=wa(e),r=function(t){n=n.filter((function(e){return!as(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ma=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return i(e,t),e}(ca);function ba(t){return Jo(t.integerValue||t.doubleValue)}function wa(t){return vs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ia=function(t,e){this.field=t,this.transform=e},Ea=function(t,e){this.version=t,this.transformResults=e},Ta=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function _a(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Sa=function(){};function Aa(t,e,n){t instanceof Ra?function(t,e,n){var r=t.value.clone(),i=Pa(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Oa?function(t,e,n){if(_a(t.precondition,e)){var r=Pa(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(xa(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Na(t,e,n){t instanceof Ra?function(t,e,n){if(_a(t.precondition,e)){var r=t.value.clone(),i=La(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ca(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Oa?function(t,e,n){if(_a(t.precondition,e)){var r=La(t.fieldTransforms,n,e),i=e.data;i.setAll(xa(t)),i.setAll(r),e.convertToFoundDocument(Ca(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){_a(t.precondition,e)&&e.convertToNoDocument(Uo.min())}(t,e)}function ka(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=la(o.transform,s||null);null!=a&&(null==n&&(n=ws.empty()),n.set(o.field,a))}return n||null}function Da(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Mo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof da&&e instanceof da||t instanceof ga&&e instanceof ga?Mo(t.elements,e.elements,as):t instanceof ma&&e instanceof ma?as(t.A,e.A):t instanceof pa&&e instanceof pa}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ca(t){return t.isFoundDocument()?t.version:Uo.min()}var Ra=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return i(e,t),e}(Sa),Oa=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return i(e,t),e}(Sa);function xa(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Pa(t,e,n){var r=new Map;Ro(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fa(s,a,n[i]))}return r}function La(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,ha(a,u,e))}return r}var Ma,Fa,Va=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return i(e,t),e}(Sa),Ua=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return i(e,t),e}(Sa),ja=function(t){this.count=t};function qa(t){switch(t){case Eo.OK:return Co();case Eo.CANCELLED:case Eo.UNKNOWN:case Eo.DEADLINE_EXCEEDED:case Eo.RESOURCE_EXHAUSTED:case Eo.INTERNAL:case Eo.UNAVAILABLE:case Eo.UNAUTHENTICATED:return!1;case Eo.INVALID_ARGUMENT:case Eo.NOT_FOUND:case Eo.ALREADY_EXISTS:case Eo.PERMISSION_DENIED:case Eo.FAILED_PRECONDITION:case Eo.ABORTED:case Eo.OUT_OF_RANGE:case Eo.UNIMPLEMENTED:case Eo.DATA_LOSS:return!0;default:return Co()}}function Ba(t){if(void 0===t)return No("GRPC error has no .code"),Eo.UNKNOWN;switch(t){case Ma.OK:return Eo.OK;case Ma.CANCELLED:return Eo.CANCELLED;case Ma.UNKNOWN:return Eo.UNKNOWN;case Ma.DEADLINE_EXCEEDED:return Eo.DEADLINE_EXCEEDED;case Ma.RESOURCE_EXHAUSTED:return Eo.RESOURCE_EXHAUSTED;case Ma.INTERNAL:return Eo.INTERNAL;case Ma.UNAVAILABLE:return Eo.UNAVAILABLE;case Ma.UNAUTHENTICATED:return Eo.UNAUTHENTICATED;case Ma.INVALID_ARGUMENT:return Eo.INVALID_ARGUMENT;case Ma.NOT_FOUND:return Eo.NOT_FOUND;case Ma.ALREADY_EXISTS:return Eo.ALREADY_EXISTS;case Ma.PERMISSION_DENIED:return Eo.PERMISSION_DENIED;case Ma.FAILED_PRECONDITION:return Eo.FAILED_PRECONDITION;case Ma.ABORTED:return Eo.ABORTED;case Ma.OUT_OF_RANGE:return Eo.OUT_OF_RANGE;case Ma.UNIMPLEMENTED:return Eo.UNIMPLEMENTED;case Ma.DATA_LOSS:return Eo.DATA_LOSS;default:return Co()}}(Fa=Ma||(Ma={}))[Fa.OK=0]="OK",Fa[Fa.CANCELLED=1]="CANCELLED",Fa[Fa.UNKNOWN=2]="UNKNOWN",Fa[Fa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fa[Fa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fa[Fa.NOT_FOUND=5]="NOT_FOUND",Fa[Fa.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fa[Fa.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fa[Fa.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fa[Fa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fa[Fa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fa[Fa.ABORTED=10]="ABORTED",Fa[Fa.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fa[Fa.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fa[Fa.INTERNAL=13]="INTERNAL",Fa[Fa.UNAVAILABLE=14]="UNAVAILABLE",Fa[Fa.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ka=function(){function t(t,e){this.comparator=t,this.root=e||Ha.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ha.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ha.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ga(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ga(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ga(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ga(this.root,t,this.comparator,!0)},t}(),Ga=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ha=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Co();if(this.right.isRed())throw Co();var t=this.left.check();if(t!==this.right.check())throw Co();return t+(this.isRed()?0:1)},t}();Ha.EMPTY=null,Ha.RED=!0,Ha.BLACK=!1,Ha.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Co()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Co()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Co()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Co()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Co()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ha(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var za=function(){function t(t){this.comparator=t,this.data=new Ka(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Wa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Wa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Wa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Qa=new Ka(os.comparator);function Xa(){return Qa}var Ya=new Ka(os.comparator);function Ja(){return Ya}var $a=new Ka(os.comparator);function Za(){return $a}var tu=new za(os.comparator);function eu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=tu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var nu=new za(Lo);function ru(){return nu}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iu=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Uo.min(),r,ru(),Xa(),eu())},t}(),ou=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Qo.EMPTY_BYTE_STRING,n,eu(),eu(),eu())},t}(),su=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},au=function(t,e){this.targetId=t,this.V=e},uu=function(t,e,n,r){void 0===n&&(n=Qo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},cu=function(){function t(){this.S=0,this.D=lu(),this.C=Qo.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=eu(),e=eu(),n=eu();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Co()}})),new ou(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=lu()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),hu=function(){function t(t){this.W=t,this.G=new Map,this.H=Xa(),this.J=fu(),this.Y=new za(Lo)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Co()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ns(i))if(0===n){var o=new os(i.path);this.tt(e,o,Es.newNoDocument(o,Uo.min()))}else Ro(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Ns(o.target)){var s=new os(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Es.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=eu();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new iu(t,n,this.Y,this.H,r);return this.H=Xa(),this.J=fu(),this.Y=new za(Lo),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new cu,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new za(Lo),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ao("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new cu),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function fu(){return new Ka(os.comparator)}function lu(){return new Ka(os.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pu={asc:"ASCENDING",desc:"DESCENDING"},du={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vu=function(t,e){this.databaseId=t,this.I=e};function gu(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function yu(t,e){return t.I?e.toBase64():e.toUint8Array()}function mu(t,e){return gu(t,e.toTimestamp())}function bu(t){return Ro(!!t),Uo.fromTimestamp(function(t){var e=Yo(t);return new Vo(e.seconds,e.nanos)}(t))}function wu(t,e){return function(t){return new Go(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Iu(t){var e=Go.fromString(t);return Ro(Hu(e)),e}function Eu(t,e){return wu(t.databaseId,e.path)}function Tu(t,e){var n=Iu(e);if(n.get(1)!==t.databaseId.projectId)throw new To(Eo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new To(Eo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new os(Nu(n))}function _u(t,e){return wu(t.databaseId,e)}function Su(t){var e=Iu(t);return 4===e.length?Go.emptyPath():Nu(e)}function Au(t){return new Go(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Nu(t){return Ro(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ku(t,e,n){return{name:Eu(t,e),fields:n.value.mapValue.fields}}function Du(t,e,n){var r=Tu(t,e.name),i=bu(e.updateTime),o=new ws({mapValue:{fields:e.fields}}),s=Es.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Cu(t,e){var n;if(e instanceof Ra)n={update:ku(t,e.key,e.value)};else if(e instanceof Va)n={delete:Eu(t,e.key)};else if(e instanceof Oa)n={update:ku(t,e.key,e.data),updateMask:Gu(e.fieldMask)};else{if(!(e instanceof Ua))return Co();n={verify:Eu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof pa)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof da)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ga)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ma)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Co()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:mu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Co()}(t,e.precondition)),n}function Ru(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ta.updateTime(bu(t.updateTime)):void 0!==t.exists?Ta.exists(t.exists):Ta.none()}(e.currentDocument):Ta.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Ro("REQUEST_TIME"===e.setToServerValue),n=new pa;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new da(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ga(i)}else"increment"in e?n=new ma(t,e.increment):Co();var o=zo.fromServerFormat(e.fieldPath);return new Ia(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Tu(t,e.update.name),o=new ws({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Wo(e.map((function(t){return zo.fromServerFormat(t)})))}(e.updateMask);return new Oa(i,o,s,n,r)}return new Ra(i,o,n,r)}if(e.delete){var a=Tu(t,e.delete);return new Va(a,n)}if(e.verify){var u=Tu(t,e.verify);return new Ua(u,n)}return Co()}function Ou(t,e){return{documents:[_u(t,e.path)]}}function xu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=_u(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=_u(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ys(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NAN"}};if(gs(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ys(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NAN"}};if(gs(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(t.field),op:Uu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ju(t.field),direction:Vu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ns(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Mu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Mu(e.endAt)),n}function Pu(t){var e=Su(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ro(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Lu(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Us(qu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ns(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Fu(n.startAt));var h=null;return n.endAt&&(h=Fu(n.endAt)),Gs(e,i,a,s,u,"F",c,h)}function Lu(t){return t?void 0!==t.unaryFilter?[Ku(t)]:void 0!==t.fieldFilter?[Bu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Lu(t)})).reduce((function(t,e){return t.concat(e)})):Co():[]}function Mu(t){return{before:t.before,values:t.position}}function Fu(t){var e=!!t.before,n=t.values||[];return new Fs(n,e)}function Vu(t){return pu[t]}function Uu(t){return du[t]}function ju(t){return{fieldPath:t.canonicalString()}}function qu(t){return zo.fromServerFormat(t.fieldPath)}function Bu(t){return ks.create(qu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Co()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ku(t){switch(t.unaryFilter.op){case"IS_NAN":var e=qu(t.unaryFilter.field);return ks.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=qu(t.unaryFilter.field);return ks.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qu(t.unaryFilter.field);return ks.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qu(t.unaryFilter.field);return ks.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Co()}}function Gu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Hu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Qu(e)),e=Wu(t.get(n),e);return Qu(e)}function Wu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Qu(t){return t+""}function Xu(t){var e=t.length;if(Ro(e>=2),2===e)return Ro(""===t.charAt(0)&&""===t.charAt(1)),Go.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Co(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Co()}o=s+2}return new Go(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yu=function(t,e){this.seconds=t,this.nanoseconds=e},Ju=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ju.store="owner",Ju.key="owner";var $u=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};$u.store="mutationQueues",$u.keyPath="userId";var Zu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Zu.store="mutations",Zu.keyPath="batchId",Zu.userMutationsIndex="userMutationsIndex",Zu.userMutationsKeyPath=["userId","batchId"];var tc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,zu(e)]},t.key=function(t,e,n){return[t,zu(e),n]},t}();tc.store="documentMutations",tc.PLACEHOLDER=new tc;var ec=function(t,e){this.path=t,this.readTime=e},nc=function(t,e){this.path=t,this.version=e},rc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};rc.store="remoteDocuments",rc.readTimeIndex="readTimeIndex",rc.readTimeIndexPath="readTime",rc.collectionReadTimeIndex="collectionReadTimeIndex",rc.collectionReadTimeIndexPath=["parentPath","readTime"];var ic=function(t){this.byteSize=t};ic.store="remoteDocumentGlobal",ic.key="remoteDocumentGlobalKey";var oc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};oc.store="targets",oc.keyPath="targetId",oc.queryTargetsIndexName="queryTargetsIndex",oc.queryTargetsKeyPath=["canonicalId","targetId"];var sc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};sc.store="targetDocuments",sc.keyPath=["targetId","path"],sc.documentTargetsIndex="documentTargetsIndex",sc.documentTargetsKeyPath=["path","targetId"];var ac=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ac.key="targetGlobalKey",ac.store="targetGlobal";var uc=function(t,e){this.collectionId=t,this.parent=e};uc.store="collectionParents",uc.keyPath=["collectionId","parent"];var cc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};cc.store="clientMetadata",cc.keyPath="clientId";var hc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};hc.store="bundles",hc.keyPath="bundleId";var fc=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};fc.store="namedQueries",fc.keyPath="name";var lc=h(h([],h(h([],h(h([],h(h([],[$u.store,Zu.store,tc.store,rc.store,oc.store,Ju.store,ac.store,sc.store]),[cc.store])),[ic.store])),[uc.store])),[hc.store,fc.store]),pc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dc=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),vc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},gc=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Co(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),yc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new vc,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new wc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Sc(e.target.error);n.ft.reject(new wc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new wc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ao("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ec(e)},t}(),mc=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(I())&&No("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ao("SimpleDb","Removing database:",t),Tc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=I(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",BASE_URL:"/"})||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ao("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new wc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new To(Eo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new wc(t,n))},i.onupgradeneeded=function(t){Ao("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ao("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return s(this,void 0,void 0,(function(){var i,o,s,u,c;return a(this,(function(h){switch(h.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,h,f;return a(this,(function(a){switch(a.label){case 0:++o,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=a.sent(),e=yc.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),gc.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(a.sent(),s),c)];case 4:return h=a.sent(),f="FirebaseError"!==h.name&&o<3,Ao("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),bc=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Tc(this.Pt.delete())},t}(),wc=function(t){function e(e,n){var r=this;return(r=t.call(this,Eo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return i(e,t),e}(To);function Ic(t){return"IndexedDbTransactionError"===t.name}var Ec=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ao("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ao("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Tc(n)},t.prototype.add=function(t){return Ao("SimpleDb","ADD",this.store.name,t,t),Tc(this.store.add(t))},t.prototype.get=function(t){var e=this;return Tc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ao("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ao("SimpleDb","DELETE",this.store.name,t),Tc(this.store.delete(t))},t.prototype.count=function(){return Ao("SimpleDb","COUNT",this.store.name),Tc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Ao("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new gc((function(n,r){e.onerror=function(t){var e=Sc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new gc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new bc(i),s=e(i.primaryKey,i.value,o);if(s instanceof gc){var a=s.catch((function(t){return o.done(),gc.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return gc.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Tc(t){return new gc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Sc(t.target.error);n(e)}}))}var _c=!1;function Sc(t){var e=mc._t(I());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new To("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return _c||(_c=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ac=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return i(e,t),e}(dc);function Nc(t,e){var n=Oo(t);return mc.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Aa(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Na(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Na(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Uo.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),eu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Mo(this.mutations,t.mutations,(function(t,e){return Da(t,e)}))&&Mo(this.baseMutations,t.baseMutations,(function(t,e){return Da(t,e)}))},t}(),Dc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ro(e.mutations.length===r.length);for(var i=Za(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Cc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Uo.min()),void 0===o&&(o=Uo.min()),void 0===s&&(s=Qo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Rc=function(t){this.Lt=t};function Oc(t,e){if(e.document)return Du(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=os.fromSegments(e.noDocument.path),r=Fc(e.noDocument.readTime),i=Es.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=os.fromSegments(e.unknownDocument.path);return r=Fc(e.unknownDocument.version),Es.newUnknownDocument(o,r)}return Co()}function xc(t,e,n){var r=Pc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Eu(t,e.key),fields:e.data.value.mapValue.fields,updateTime:gu(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new rc(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Mc(e.version);return s=e.hasCommittedMutations,new rc(null,new ec(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Mc(e.version);return new rc(new nc(c,h),null,null,!0,r,i)}return Co()}function Pc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Lc(t){var e=new Vo(t[0],t[1]);return Uo.fromTimestamp(e)}function Mc(t){var e=t.toTimestamp();return new Yu(e.seconds,e.nanoseconds)}function Fc(t){var e=new Vo(t.seconds,t.nanoseconds);return Uo.fromTimestamp(e)}function Vc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Ru(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Ru(t.Lt,e)})),a=Vo.fromMillis(e.localWriteTimeMs);return new kc(e.batchId,a,n,s)}function Uc(t){var e,n,r=Fc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Fc(t.lastLimboFreeSnapshotVersion):Uo.min();return void 0!==t.query.documents?(Ro(1===(n=t.query).documents.length),e=$s(Hs(Su(n.documents[0])))):e=function(t){return $s(Pu(t))}(t.query),new Cc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Qo.fromBase64String(t.resumeToken))}function jc(t,e){var n,r=Mc(e.snapshotVersion),i=Mc(e.lastLimboFreeSnapshotVersion);n=Ns(e.target)?Ou(t.Lt,e.target):xu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new oc(e.targetId,Ss(e.target),r,o,e.sequenceNumber,i,n)}function qc(t){var e=Pu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Zs(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Kc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Fc(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Kc(t).put({bundleId:(n=e).id,createTime:Mc(bu(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Gc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:qc(e.bundledQuery),readTime:Fc(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Gc(t).put(function(t){return{name:t.name,readTime:Mc(bu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Kc(t){return Nc(t,hc.store)}function Gc(t){return Nc(t,fc.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hc=function(){function t(){this.Bt=new zc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),gc.resolve()},t.prototype.getCollectionParents=function(t,e){return gc.resolve(this.Bt.getEntries(e))},t}(),zc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new za(Go.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new za(Go.comparator)).toArray()},t}(),Wc=function(){function t(){this.qt=new zc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:zu(i)};return Qc(t).put(o)}return gc.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Fo(e),""],!1,!0);return Qc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Xu(o.parent))}return n}))},t}();function Qc(t){return Nc(t,uc.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t,e,n){var r=t.store(Zu.store),i=t.store(tc.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Ro(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=tc.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return gc.waitFor(o).next((function(){return c}))}function $c(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Co();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yc.DEFAULT_COLLECTION_PERCENTILE=10,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yc.DEFAULT=new Yc(41943040,Yc.DEFAULT_COLLECTION_PERCENTILE,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yc.DISABLED=new Yc(-1,0,0);var Zc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Ro(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eh(t).$t({index:Zu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=nh(t),s=eh(t);return s.add({}).next((function(a){Ro("number"==typeof a);for(var u=new kc(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Cu(t.Lt,e)})),i=n.mutations.map((function(e){return Cu(t.Lt,e)}));return new Zu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],f=new za((function(t,e){return Lo(t.canonicalString(),e.canonicalString())})),l=0,p=r;l<p.length;l++){var d=p[l],v=tc.key(i.userId,d.key.path,a);f=f.add(d.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,tc.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),gc.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return eh(t).get(e).next((function(t){return t?(Ro(t.userId===n.userId),Vc(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?gc.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return eh(t).$t({index:Zu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ro(e.batchId>=r),o=Vc(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return eh(t).$t({index:Zu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eh(t).Nt(Zu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Vc(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=tc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return nh(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Xu(u);if(a===n.userId&&e.path.isEqual(h))return eh(t).get(c).next((function(t){if(!t)throw Co();Ro(t.userId===n.userId),o.push(Vc(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new za(Lo),i=[];return e.forEach((function(e){var o=tc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=nh(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Xu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),gc.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=tc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new za(Lo);return nh(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Xu(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(eh(t).get(e).next((function(t){if(null===t)throw Co();Ro(t.userId===n.userId),r.push(Vc(n.R,t))})))})),gc.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Jc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),gc.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return gc.resolve();var r=IDBKeyRange.lowerBound(tc.prefixForUser(e.userId)),i=[];return nh(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Xu(t[1]);i.push(o)}else r.done()})).next((function(){Ro(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return th(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return rh(t).get(this.userId).next((function(t){return t||new $u(e.userId,-1,"")}))},t}();function th(t,e,n){var r=tc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return nh(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function eh(t){return Nc(t,Zu.store)}function nh(t){return Nc(t,tc.store)}function rh(t){return Nc(t,$u.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ih=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),oh=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new ih(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Uo.fromTimestamp(new Vo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return sh(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Ro(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return sh(t).$t((function(s,a){var u=Uc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return gc.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return sh(t).$t((function(t,n){var r=Uc(n);e(r)}))},t.prototype.Xt=function(t){return ah(t).get(ac.key).next((function(t){return Ro(null!==t),t}))},t.prototype.Zt=function(t,e){return ah(t).put(ac.key,e)},t.prototype.te=function(t,e){return sh(t).put(jc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ss(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sh(t).$t({range:r,index:oc.queryTargetsIndexName},(function(t,n,r){var o=Uc(n);As(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=uh(t);return e.forEach((function(e){var s=zu(e.path);i.push(o.put(new sc(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),gc.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=uh(t);return gc.forEach(e,(function(e){var o=zu(e.path);return gc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=uh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=uh(t),i=eu();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=Xu(t[1]),o=new os(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=zu(e.path),r=IDBKeyRange.bound([n],[Fo(n)],!1,!0),i=0;return uh(t).$t({index:sc.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return sh(t).get(e).next((function(t){return t?Uc(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){return Nc(t,oc.store)}function ah(t){return Nc(t,ac.store)}function uh(t){return Nc(t,sc.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){if(t.code!==Eo.FAILED_PRECONDITION||t.message!==pc)throw t;return Ao("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Lo(n,i);return 0===s?Lo(r,o):s}var fh=function(){function t(t){this.ne=t,this.buffer=new za(hh),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();hh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),lh=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ao("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return s(e,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ic(e=n.sent())?(Ao("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ch(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ph=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return gc.resolve(Io.o);var r=new fh(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ao("LruGarbageCollector","Garbage collection skipped; disabled"),gc.resolve(Xc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ao("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Xc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ao("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),So()<=Y.DEBUG&&Ao("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),gc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),dh=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ph(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return vh(t,n)},t.prototype.removeReference=function(t,e,n){return vh(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return vh(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return rh(t).Ot((function(r){return th(t,r,e).next((function(t){return t&&(n=!0),gc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),uh(t).delete([0,zu(s.path)])}))}));i.push(u)}})).next((function(){return gc.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return vh(t,e)},t.prototype.we=function(t,e){var n,r=uh(t),i=Io.o;return r.$t({index:sc.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Io.o&&e(new os(Xu(n)),i),i=a,n=s):i=Io.o})).next((function(){i!==Io.o&&e(new os(Xu(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function vh(t,e){return uh(t).put(function(t,e){return new sc(0,zu(t.path),e)}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gh=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){qo(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Bo(this.inner)},t}(),yh=function(){function t(){this.changes=new gh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Uo.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Es.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?gc.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),mh=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ih(t).put(Eh(e),n)},t.prototype.removeEntry=function(t,e){var n=Ih(t),r=Eh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Ih(t).get(Eh(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Ih(t).get(Eh(e)).next((function(t){return{document:n.ye(e,t),size:$c(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Xa();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Xa(),i=new Ka(os.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,$c(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return gc.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ih(t).$t({range:r},(function(t,e,r){for(var s=os.fromSegments(t);o&&os.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Xa(),o=e.path.length+1,s={};if(n.isEqual(Uo.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Pc(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=rc.collectionReadTimeIndex}return Ih(t).$t(s,(function(t,n,s){if(t.length===o){var a=Oc(r.R,n);e.path.isPrefixOf(a.key.path)?ra(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new bh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return wh(t).get(ic.key).next((function(t){return Ro(!!t),t}))},t.prototype.me=function(t,e){return wh(t).put(ic.key,e)},t.prototype.ye=function(t,e){if(e){var n=Oc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Uo.min()))return n}return Es.newInvalidDocument(t)},t}(),bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new gh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return i(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new za((function(t,e){return Lo(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=xc(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=$c(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=xc(e.Ie.R,Es.newNoDocument(o,Uo.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),gc.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(yh);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){return Nc(t,ic.store)}function Ih(t){return Nc(t,rc.store)}function Eh(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Th=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ro(n<r&&n>=0&&r<=11);var o=new yc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ju.store)}(t),function(t){t.createObjectStore($u.store,{keyPath:$u.keyPath}),t.createObjectStore(Zu.store,{keyPath:Zu.keyPath,autoIncrement:!0}).createIndex(Zu.userMutationsIndex,Zu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(tc.store)}(t),_h(t),function(t){t.createObjectStore(rc.store)}(t));var s=gc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(sc.store),t.deleteObjectStore(oc.store),t.deleteObjectStore(ac.store)}(t),_h(t)),s=s.next((function(){return function(t){var e=t.store(ac.store),n=new ac(0,0,Uo.min().toTimestamp(),0);return e.put(ac.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Zu.store).Nt().next((function(n){t.deleteObjectStore(Zu.store),t.createObjectStore(Zu.store,{keyPath:Zu.keyPath,autoIncrement:!0}).createIndex(Zu.userMutationsIndex,Zu.userMutationsKeyPath,{unique:!0});var r=e.store(Zu.store),i=n.map((function(t){return r.put(t)}));return gc.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(cc.store,{keyPath:cc.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ic.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(rc.store);e.createIndex(rc.readTimeIndex,rc.readTimeIndexPath,{unique:!1}),e.createIndex(rc.collectionReadTimeIndex,rc.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(hc.store,{keyPath:hc.keyPath})}(t),function(t){t.createObjectStore(fc.store,{keyPath:fc.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(rc.store).$t((function(t,n){e+=$c(n)})).next((function(){var n=new ic(e);return t.store(ic.store).put(ic.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store($u.store),r=t.store(Zu.store);return n.Nt().next((function(n){return gc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Zu.userMutationsIndex,i).next((function(r){return gc.forEach(r,(function(r){Ro(r.userId===n.userId);var i=Vc(e.R,r);return Jc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(sc.store),n=t.store(rc.store);return t.store(ac.store).get(ac.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Go(n),s=function(t){return[0,zu(t)]}(o);r.push(e.get(s).next((function(n){return n?gc.resolve():function(n){return e.put(new sc(0,zu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return gc.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(uc.store,{keyPath:uc.keyPath});var n=e.store(uc.store),r=new zc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:zu(i)})}};return e.store(rc.store).$t({Ft:!0},(function(t,e){var n=new Go(t);return i(n.popLast())})).next((function(){return e.store(tc.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Xu(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(oc.store);return n.$t((function(t,r){var i=Uc(r),o=jc(e.R,i);return n.put(o)}))},t}();function _h(t){t.createObjectStore(sc.store,{keyPath:sc.keyPath}).createIndex(sc.documentTargetsIndex,sc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(oc.store,{keyPath:oc.keyPath}).createIndex(oc.queryTargetsIndexName,oc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ac.store)}var Sh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ah=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new To(Eo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dh(this,i),this.Le=n+"main",this.R=new Rc(u),this.Be=new mc(this.Le,11,new Th(this.R)),this.qe=new oh(this.referenceDelegate,this.R),this.Ut=new Wc,this.Ue=function(t,e){return new mh(t,e)}(this.R,this.Ut),this.Ke=new Bc,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&No("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new To(Eo.FAILED_PRECONDITION,Sh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Io(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return s(e,void 0,void 0,(function(){return a(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return s(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return s(e,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return kh(e).put(new cc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Ic(e))return Ao("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ao("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Nh(t).get(Ju.key).next((function(t){return gc.resolve(e.tn(t))}))},t.prototype.en=function(t){return kh(t).delete(this.clientId)},t.prototype.nn=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,i=this;return a(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Nc(t,cc.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return gc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?gc.resolve(!0):Nh(t).get(Ju.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new To(Eo.FAILED_PRECONDITION,Sh);return!1}}return!(!e.networkEnabled||!e.inForeground)||kh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ao("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ju.store,cc.store],(function(e){var n=new Ac(e,Io.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return kh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Zc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ao("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,lc,(function(o){return i=new Ac(o,r.Ne?r.Ne.next():Io.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw No("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new To(Eo.FAILED_PRECONDITION,pc);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Nh(t).get(Ju.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new To(Eo.FAILED_PRECONDITION,Sh)}))},t.prototype.Ze=function(t){var e=new Ju(this.clientId,this.allowTabSynchronization,Date.now());return Nh(t).put(Ju.key,e)},t.yt=function(){return mc.yt()},t.prototype.Xe=function(t){var e=this,n=Nh(t);return n.get(Ju.key).next((function(t){return e.tn(t)?(Ao("IndexedDbPersistence","Releasing primary lease."),n.delete(Ju.key)):gc.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(No("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),C()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ao("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return No("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){No("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Nh(t){return Nc(t,Ju.store)}function kh(t){return Nc(t,cc.store)}function Dh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ch=function(t,e){this.progress=t,this.wn=e},Rh=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return os.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Ys(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new os(e)).next((function(t){var e=Ja();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ja();return this.Ut.getCollectionParents(t,i).next((function(s){return gc.forEach(s,(function(s){var a=function(t,e){return new Ks(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=Es.newInvalidDocument(c),r=r.insert(c,h)),Na(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ra(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=eu(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Oa&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Oh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=eu(),i=eu(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),xh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Uo.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(zs(e)||Ws(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(So()<=Y.DEBUG&&Ao("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),na(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new za(ia(t));return e.forEach((function(e,r){ra(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return So()<=Y.DEBUG&&Ao("QueryEngine","Using full collection scan to execute query:",na(e)),this.Sn.getDocumentsMatchingQuery(t,e,Uo.min())},t}(),Ph=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Ka(Lo),this.Fn=new gh((function(t){return Ss(t)}),As),this.$n=Uo.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Rh(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t,e,n,r){return new Ph(t,e,n,r)}function Mh(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o;return a(this,(function(s){switch(s.label){case 0:return n=Oo(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Rh(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=eu(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Fh(t,e){var n=Oo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=gc.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Ro(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Vh(t){var e=Oo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Uh(t,e){var n=Oo(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ro(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=Xa();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(jh(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Uo.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return gc.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function jh(t,e,n,r,i){var o=eu();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Xa();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Uo.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Ao("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function qh(t,e){var n=Oo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Bh(t,e){var n=Oo(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,gc.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Cc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Kh(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s;return a(this,(function(a){switch(a.label){case 0:r=Oo(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ic(s=a.sent()))throw s;return Ao("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function Gh(t,e,n){var r=Oo(t),i=Uo.min(),o=eu();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Oo(t),i=r.Fn.get(n);return void 0!==i?gc.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,$s(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Uo.min(),n?o:eu())})).next((function(t){return{documents:t,Bn:o}}))}))}function Hh(t,e){var n=Oo(t),r=Oo(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function zh(t){var e=Oo(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Oo(t),i=Xa(),o=Pc(n),s=Ih(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:rc.readTimeIndex,range:a},(function(t,e){var n=Oc(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Lc(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Wh(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){return[2,(e=Oo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ih(t),n=Uo.min();return e.$t({index:rc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Lc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Qh(t,e,n,r){return s(this,void 0,void 0,(function(){var i,o,s,u,c,h,f,l,p,d;return a(this,(function(a){switch(a.label){case 0:for(i=Oo(t),o=eu(),s=Xa(),u=Za(),c=0,h=n;c<h.length;c++)f=h[c],l=e.qn(f.metadata.name),f.document&&(o=o.add(l)),s=s.insert(l,e.Un(f)),u=u.insert(l,e.Kn(f.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,Bh(i,function(t){return $s(Hs(Go.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=a.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return jh(t,p,s,Uo.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Xh(t,e,n){return void 0===n&&(n=eu()),s(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return[4,Bh(t,$s(qc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Oo(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=bu(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Qo.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Yh=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return gc.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:bu(n.createTime)}),gc.resolve()},t.prototype.getNamedQuery=function(t,e){return gc.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:qc(t.bundledQuery),readTime:bu(t.readTime)}}(e)),gc.resolve()},t}(),Jh=function(){function t(){this.Wn=new za($h.Gn),this.zn=new za($h.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new $h(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new $h(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new os(new Go([])),r=new $h(n,t),i=new $h(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new os(new Go([])),n=new $h(e,t),r=new $h(e,t+1),i=eu();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new $h(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),$h=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return os.comparator(t.key,e.key)||Lo(t.ns,e.ns)},t.Hn=function(t,e){return Lo(t.ns,e.ns)||os.comparator(t.key,e.key)},t}(),Zh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new za($h.Gn)}return t.prototype.checkEmpty=function(t){return gc.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new kc(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new $h(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return gc.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return gc.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return gc.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return gc.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return gc.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new $h(e,0),i=new $h(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),gc.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new za(Lo);return e.forEach((function(t){var e=new $h(t,0),i=new $h(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),gc.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;os.isDocumentKey(i)||(i=i.child(""));var o=new $h(new os(i),0),s=new za(Lo);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),gc.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ro(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return gc.forEach(e.mutations,(function(i){var o=new $h(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new $h(e,0),r=this.rs.firstAfterOrEqual(n);return gc.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,gc.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),tf=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ka(os.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return gc.resolve(n?n.document.clone():Es.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Xa();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Es.newInvalidDocument(t))})),gc.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Xa(),i=new os(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||ra(e,c)&&(r=r.insert(c.key,c.clone()))}return gc.resolve(r)},t.prototype.fs=function(t,e){return gc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new ef(this)},t.prototype.getSize=function(t){return gc.resolve(this.size)},t}(),ef=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return i(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),gc.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(yh),nf=function(){function t(t){this.persistence=t,this.ds=new gh((function(t){return Ss(t)}),As),this.lastRemoteSnapshotVersion=Uo.min(),this.highestTargetId=0,this.ws=0,this._s=new Jh,this.targetCount=0,this.ys=ih.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),gc.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return gc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return gc.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),gc.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),gc.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new ih(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,gc.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),gc.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,gc.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),gc.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return gc.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return gc.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),gc.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),gc.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),gc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return gc.resolve(n)},t.prototype.containsKey=function(t,e){return gc.resolve(this._s.containsKey(e))},t}(),rf=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Io(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new nf(this),this.Ut=new Hc,this.Ue=function(t,e){return new tf(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Rc(e),this.Ke=new Yh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Zh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ao("MemoryPersistence","Starting transaction:",t);var i=new of(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return gc.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),of=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return i(e,t),e}(dc),sf=function(){function t(t){this.persistence=t,this.As=new Jh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Co()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),gc.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),gc.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),gc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gc.forEach(this.vs,(function(r){var i=os.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return gc.or([function(){return gc.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),af=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e){return"firestore_clients_"+t+"_"+e}function cf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function hf(t,e){return"firestore_targets_"+t+"_"+e}af.UNAUTHENTICATED=new af(null),af.GOOGLE_CREDENTIALS=new af("google-credentials-uid"),af.FIRST_PARTY=new af("first-party-uid"),af.MOCK_USER=new af("mock-user");var ff=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new To(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(No("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),lf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new To(i.error.code,i.error.message)),o?new t(e,i.state,r):(No("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ru(),s=0;i&&s<r.activeTargetIds.length;++s)i=is(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(No("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),df=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(No("SharedClientState","Failed to parse online state: "+e),null)},t}(),vf=function(){function t(){this.activeTargetIds=ru()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),gf=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Ka(Lo),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=uf(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new vf),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,c,h,f,l=this;return a(this,(function(a){switch(a.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(uf(this.persistenceKey,r)))&&(o=pf.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,h=this.$s;c<h.length;c++)f=h[c],this.ks(f);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(hf(this.persistenceKey,t));if(n){var r=lf.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(hf(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ao("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ao("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ao("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ao("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void No("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return s(e,void 0,void 0,(function(){var t,e,r,i,o,s;return a(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Io.o;if(null!=t)try{var n=JSON.parse(t);Ro("number"==typeof n),e=n}catch(t){No("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Io.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new ff(this.currentUser,t,e,n),i=cf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=cf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=hf(this.persistenceKey,t),i=new lf(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return pf.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ff.Vs(new af(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return lf.Vs(r,e)},t.prototype.js=function(t){return df.Vs(t)},t.prototype.ii=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ao("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ru();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),yf=function(){function t(){this.li=new vf,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new vf,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),mf=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),bf=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ao("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ao("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),wf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},If=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ef=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return i(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new wo;s.listenOnce(vo.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case po.NO_ERROR:var e=s.getResponseJson();Ao("Connection","XHR received:",JSON.stringify(e)),i(e);break;case po.TIMEOUT:Ao("Connection",'RPC "'+t+'" timed out'),o(new To(Eo.DEADLINE_EXCEEDED,"Request time out"));break;case po.HTTP_ERROR:var n=s.getStatus();if(Ao("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Eo).indexOf(e)>=0?e:Eo.UNKNOWN}(r.status);o(new To(a,r.message))}else o(new To(Eo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new To(Eo.UNAVAILABLE,"Connection failed."));break;default:Co()}}finally{Ao("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=fo(),i=lo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new mo({})),this.ki(o.initMessageHeaders,e),E()||A()||N()||k()||D()||S()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Ao("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,h=new If({Ei:function(t){c?Ao("Connection","Not sending because WebChannel is closed:",t):(u||(Ao("Connection","Opening WebChannel transport."),a.open(),u=!0),Ao("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(a,bo.EventType.OPEN,(function(){c||Ao("Connection","WebChannel transport opened.")})),f(a,bo.EventType.CLOSE,(function(){c||(c=!0,Ao("Connection","WebChannel transport closed"),h.Vi())})),f(a,bo.EventType.ERROR,(function(t){c||(c=!0,ko("Connection","WebChannel transport errored:",t),h.Vi(new To(Eo.UNAVAILABLE,"The operation could not be completed")))})),f(a,bo.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Ro(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ao("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ma[t];if(void 0!==e)return Ba(e)}(o),u=i.message;void 0===s&&(s=Eo.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Vi(new To(s,u)),a.close()}else Ao("Connection","WebChannel received:",n),h.Si(n)}})),f(i,go.STAT_EVENT,(function(t){t.stat===yo.PROXY?Ao("Connection","Detected buffering proxy"):t.stat===yo.NOPROXY&&Ao("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ao("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Ao("RestConnection","Received: ",t),t}),(function(e){throw ko("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=wf[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(){return"undefined"!=typeof window?window:null}function _f(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(t){return new vu(t,!0)}var Af=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ao("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Nf=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Af(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Eo.RESOURCE_EXHAUSTED?(No(e.toString()),No("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Eo.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new To(Eo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return s(t,void 0,void 0,(function(){return a(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ao("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ao("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),kf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return i(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Co()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ro(void 0===e||"string"==typeof e),Qo.fromBase64String(e||"")):(Ro(void 0===e||e instanceof Uint8Array),Qo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Eo.UNKNOWN:Ba(t.code);return new To(e,t.message||"")}(a);n=new uu(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Tu(t,r.document.name),o=bu(r.document.updateTime);var a=new ws({mapValue:{fields:r.document.fields}}),u=(s=Es.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new su(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Tu(t,r.document),o=r.readTime?bu(r.readTime):Uo.min(),a=Es.newNoDocument(i,o),s=r.removedTargetIds||[],n=new su([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Tu(t,r.document),o=r.removedTargetIds||[],n=new su([],o,i,null);else{if(!("filter"in e))return Co();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new ja(r),o=h.targetId,n=new au(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Uo.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Uo.min():e.readTime?bu(e.readTime):Uo.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Au(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ns(r)?{documents:Ou(t,r)}:{query:xu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=yu(t,e.resumeToken):e.snapshotVersion.compareTo(Uo.min())>0&&(n.readTime=gu(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Co()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Au(this.R),e.removeTarget=t,this.cr(e)},e}(Nf),Df=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return i(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Ro(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ro(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?bu(t.updateTime):bu(e);return n.isEqual(Uo.min())&&(n=bu(e)),new Ea(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=bu(t.commitTime);return this.listener.Tr(n,e)}return Ro(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Au(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Cu(e.R,t)}))};this.cr(n)},e}(Nf),Cf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return i(e,t),e.prototype.br=function(){if(this.Rr)throw new To(Eo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Eo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new To(Eo.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Eo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new To(Eo.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Rf=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(No(e),this.Vr=!1):Ao("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Of=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return s(o,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return qf(this)?(Ao("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return(e=Oo(t)).Or.add(4),[4,Pf(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,xf(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Rf(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:if(!qf(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Pf(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Lf(t,e){var n=Oo(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),jf(n)?Uf(n):nl(n).er()&&Ff(n,e))}function Mf(t,e){var n=Oo(t),r=nl(n);n.$r.delete(e),r.er()&&Vf(n,e),0===n.$r.size&&(r.er()?r.ir():qf(n)&&n.Br.set("Unknown"))}function Ff(t,e){t.qr.U(e.targetId),nl(t).mr(e)}function Vf(t,e){t.qr.U(e),nl(t).yr(e)}function Uf(t){t.qr=new hu({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),nl(t).start(),t.Br.Sr()}function jf(t){return qf(t)&&!nl(t).tr()&&t.$r.size>0}function qf(t){return 0===Oo(t).Or.size}function Bf(t){t.qr=void 0}function Kf(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return t.$r.forEach((function(e,n){Ff(t,e)})),[2]}))}))}function Gf(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(n){return Bf(t),jf(t)?(t.Br.Nr(e),Uf(t)):t.Br.set("Unknown"),[2]}))}))}function Hf(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o;return a(this,(function(u){switch(u.label){case 0:if(t.Br.set("Online"),!(e instanceof uu&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o;return a(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),Ao("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,zf(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof su?t.qr.X(e):e instanceof au?t.qr.rt(e):t.qr.et(e),n.isEqual(Uo.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,Vh(t.localStore)];case 8:return i=u.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Qo.EMPTY_BYTE_STRING,n.snapshotVersion)),Vf(t,e);var r=new Cc(n.target,e,1,n.sequenceNumber);Ff(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return Ao("RemoteStore","Failed to raise snapshot:",o=u.sent()),[4,zf(t,o)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function zf(t,e,n){return s(this,void 0,void 0,(function(){var r=this;return a(this,(function(i){switch(i.label){case 0:if(!Ic(e))throw e;return t.Or.add(1),[4,Pf(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Vh(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return s(r,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return Ao("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,xf(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Wf(t,e){return e().catch((function(n){return zf(t,n,e)}))}function Qf(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o;return a(this,(function(s){switch(s.label){case 0:e=Oo(t),n=rl(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return qf(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,qh(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=rl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,zf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Xf(e)&&Yf(e),[2]}}))}))}function Xf(t){return qf(t)&&!rl(t).tr()&&t.Fr.length>0}function Yf(t){rl(t).start()}function Jf(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return rl(t).Ar(),[2]}))}))}function $f(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return a(this,(function(o){for(e=rl(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Zf(t,e,n){return s(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Dc.from(r,e,n),[4,Wf(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Qf(t)];case 2:return o.sent(),[2]}}))}))}function tl(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return e&&rl(t).pr?[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return qa(r=e.code)&&r!==Eo.ABORTED?(n=t.Fr.shift(),rl(t).sr(),[4,Wf(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Qf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Xf(t)&&Yf(t),[2]}}))}))}function el(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return n=Oo(t),e?(n.Or.delete(2),[4,xf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Pf(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function nl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Oo(t);return r.br(),new kf(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Kf.bind(null,t),Ri:Gf.bind(null,t),_r:Hf.bind(null,t)}),t.Mr.push((function(n){return s(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),jf(t)?Uf(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Bf(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function rl(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Oo(t);return r.br(),new Df(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Jf.bind(null,t),Ri:tl.bind(null,t),Ir:$f.bind(null,t),Tr:Zf.bind(null,t)}),t.Mr.push((function(n){return s(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Qf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Ao("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var il=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new vc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new To(Eo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ol(t,e){if(No("AsyncQueue",e+": "+t),Ic(t))return new To(Eo.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||os.comparator(e.key,n.key)}:function(t,e){return os.comparator(t.key,e.key)},this.keyedMap=Ja(),this.sortedSet=new Ka(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),al=function(){function t(){this.Qr=new Ka(os.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Co():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),ul=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,sl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ta(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),cl=function(){this.Wr=void 0,this.listeners=[]},hl=function(){this.queries=new gh((function(t){return ea(t)}),ta),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u,c;return a(this,(function(a){switch(a.label){case 0:if(n=Oo(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new cl),!i)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=a.sent(),[3,4];case 3:return u=a.sent(),c=ol(u,"Initialization of query '"+na(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&vl(n),[2]}}))}))}function ll(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s;return a(this,(function(a){return n=Oo(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function pl(t,e){for(var n=Oo(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&vl(n)}function dl(t,e,n){var r=Oo(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function vl(t){t.Gr.forEach((function(t){t.next()}))}var gl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ul(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=ul.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),yl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),ml=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Tu(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Du(this.R,t.document,!1):Es.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return bu(t)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=bl(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new ml(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||eu()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,i;return a(this,(function(o){switch(o.label){case 0:return[4,Qh(this.localStore,new ml(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Xh(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ch(Object.assign({},this.progress),t))]}}))}))}})();function bl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wl=function(t){this.key=t},Il=function(t){this.key=t},El=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=eu(),this.mutatedKeys=eu(),this.lo=ia(t),this.fo=new sl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new al,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=zs(this.query)&&i.size===this.query.limit?i.last():null,c=Ws(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),f=ra(n.query,e)?e:null,l=!!h&&n.mutatedKeys.has(h.key),p=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data.isEqual(f.data)?l!==p&&(r.track({type:3,doc:f}),d=!0):n.yo(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.lo(f,u)>0||c&&n.lo(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),zs(this.query)||Ws(this.query))for(;s.size>this.query.limit;){var h=zs(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Co()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new ul(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new al,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=eu(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Il(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new wl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=eu();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return ul.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Tl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},_l=function(t){this.key=t,this.bo=!1},Sl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new gh((function(t){return ea(t)}),ta),this.Vo=new Map,this.So=new Set,this.Do=new Ka(os.comparator),this.Co=new Map,this.No=new Jh,this.xo={},this.ko=new Map,this.Fo=ih.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Al(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:return n=ep(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Bh(n.localStore,$s(e))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Nl(n,e,r,"current"===u)];case 3:i=a.sent(),n.isPrimaryClient&&Lf(n.remoteStore,s),a.label=4;case 4:return[2,i]}}))}))}function Nl(t,e,n,r){return s(this,void 0,void 0,(function(){var i,o,u,c,h,f;return a(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return s(this,void 0,void 0,(function(){var i,o,s;return a(this,(function(a){switch(a.label){case 0:return i=e.view._o(n),i.Nn?[4,Gh(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(jl(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Gh(t.localStore,e,!0)];case 1:return i=l.sent(),o=new El(e,i.Bn),u=o._o(i.documents),c=ou.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),h=o.applyChanges(u,t.isPrimaryClient,c),jl(t,n,h.To),f=new Tl(e,n,o),[2,(t.Po.set(e,f),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),h.snapshot)]}}))}))}function kl(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return n=Oo(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!ta(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Kh(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Mf(n.remoteStore,r.targetId),Vl(n,r.targetId)})).catch(ch)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Vl(n,r.targetId),[4,Kh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Dl(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s;return a(this,(function(a){switch(a.label){case 0:r=np(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Oo(t),i=Vo.now(),o=e.reduce((function(t,e){return t.add(e.key)}),eu());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=ka(c,n.get(c.key));null!=h&&s.push(new Oa(c.key,h,Is(h.value.mapValue),Ta.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ka(Lo)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Kl(r,i.changes)];case 3:return a.sent(),[4,Qf(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ol(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Cl(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:n=Oo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Uh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Ro(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ro(r.bo):t.removedDocuments.size>0&&(Ro(r.bo),r.bo=!1))})),[4,Kl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ch(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Rl(t,e,n){var r=Oo(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Oo(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&vl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ol(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a(this,(function(a){switch(a.label){case 0:return(r=Oo(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ka(os.comparator)).insert(o,Es.newNoDocument(o,Uo.min())),u=eu().add(o),c=new iu(Uo.min(),new Map,new za(Lo),s,u),[4,Cl(r,c)]):[3,2];case 1:return a.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Bl(r),[3,4];case 2:return[4,Kh(r.localStore,e,!1).then((function(){return Vl(r,e,n)})).catch(ch)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))}function xl(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:n=Oo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Fh(n.localStore,e)];case 2:return i=o.sent(),Fl(n,r,null),Ml(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Kl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ch(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Pl(t,e,n){return s(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:r=Oo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Oo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Ro(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Fl(r,e,n),Ml(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Kl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ch(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ll(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s;return a(this,(function(a){switch(a.label){case 0:qf((n=Oo(t)).remoteStore)||Ao("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Oo(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=ol(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Ml(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Fl(t,e,n){var r=Oo(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Vl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Ul(t,e)}))}function Ul(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Mf(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Bl(t))}function jl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof wl?(t.No.addReference(o.key,e),ql(t,o)):o instanceof Il?(Ao("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ul(t,o.key)):Co()}}function ql(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ao("SyncEngine","New document in limbo: "+n),t.So.add(r),Bl(t))}function Bl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new os(Go.fromString(e)),r=t.Fo.next();t.Co.set(r,new _l(n)),t.Do=t.Do.insert(n,r),Lf(t.remoteStore,new Cc($s(Hs(n.path)),r,2,Io.o))}}function Kl(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,u;return a(this,(function(c){switch(c.label){case 0:return r=Oo(t),i=[],o=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){u.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Oh.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(i),[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,h,f;return a(this,(function(a){switch(a.label){case 0:n=Oo(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return gc.forEach(e,(function(e){return gc.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return gc.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return a.sent(),[3,4];case 3:if(!Ic(r=a.sent()))throw r;return Ao("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(c=n.kn.get(u),h=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(h),n.kn=n.kn.insert(u,f));return[2]}}))}))}(r.localStore,o)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Gl(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return(n=Oo(t)).currentUser.isEqual(e)?[3,3]:(Ao("SyncEngine","User change. New user:",e.toKey()),[4,Mh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new To(Eo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Kl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Hl(t,e){var n=Oo(t),r=n.Co.get(e);if(r&&r.bo)return eu().add(r.key);var i=eu(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function zl(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return[4,Gh((n=Oo(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&jl(n,e.targetId,i.To),i)]}}))}))}function Wl(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){return[2,zh((e=Oo(t)).localStore).then((function(t){return Kl(e,t)}))]}))}))}function Ql(t,e,n,r){return s(this,void 0,void 0,(function(){var i,o;return a(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Oo(t),r=Oo(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):gc.resolve(null)}))}))}((i=Oo(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Qf(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Fl(i,e,r||null),Ml(i,e),function(t,e){Oo(Oo(t)._n).Gt(e)}(i.localStore,e)):Co(),s.label=4;case 4:return[4,Kl(i,o)];case 5:return s.sent(),[3,7];case 6:Ao("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Xl(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,h;return a(this,(function(a){switch(a.label){case 0:return ep(n=Oo(t)),np(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Yl(n,r.toArray())]);case 1:return i=a.sent(),n.$o=!0,[4,el(n.remoteStore,!0)];case 2:for(a.sent(),o=0,s=i;o<s.length;o++)u=s[o],Lf(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return Vl(n,e),Kh(n.localStore,e,!0)})),Mf(n.remoteStore,e)})),[4,h]);case 4:return a.sent(),[4,Yl(n,c)];case 5:return a.sent(),function(t){var e=Oo(t);e.Co.forEach((function(t,n){Mf(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ka(os.comparator)}(n),n.$o=!1,[4,el(n.remoteStore,!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))}function Yl(t,e,n){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,h,f,l,p,d,v,g;return a(this,(function(a){switch(a.label){case 0:n=Oo(t),r=[],i=[],o=0,s=e,a.label=1;case 1:return o<s.length?(u=s[o],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,Bh(n.localStore,$s(h[0]))]:[3,7]):[3,13];case 2:c=a.sent(),f=0,l=h,a.label=3;case 3:return f<l.length?(p=l[f],d=n.Po.get(p),[4,zl(n,d)]):[3,6];case 4:(v=a.sent()).snapshot&&i.push(v.snapshot),a.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Hh(n.localStore,u)];case 8:return g=a.sent(),[4,Bh(n.localStore,g)];case 9:return c=a.sent(),[4,Nl(n,Jl(g),u,!1)];case 10:a.sent(),a.label=11;case 11:r.push(c),a.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Jl(t){return Gs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $l(t){var e=Oo(t);return Oo(Oo(e.localStore).persistence).fn()}function Zl(t,e,n,r){return s(this,void 0,void 0,(function(){var i,o,s;return a(this,(function(a){switch(a.label){case 0:return(i=Oo(t)).$o?(Ao("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,zh(i.localStore)];case 3:return o=a.sent(),s=iu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Kl(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Kh(i.localStore,e,!0)];case 6:return a.sent(),Vl(i,e,r),[3,8];case 7:Co(),a.label=8;case 8:return[2]}}))}))}function tp(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s,u,c,h,f,l,p;return a(this,(function(d){switch(d.label){case 0:if(!(r=ep(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Ao("SyncEngine","Adding an already active target "+s),[3,5]):[4,Hh(r.localStore,s)]):[3,6];case 2:return u=d.sent(),[4,Bh(r.localStore,u)];case 3:return c=d.sent(),[4,Nl(r,Jl(u),c.targetId,!1)];case 4:d.sent(),Lf(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return a(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Kh(r.localStore,t,!1).then((function(){Mf(r.remoteStore,t),Vl(r,t)})).catch(ch)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=n,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function ep(t){var e=Oo(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ol.bind(null,e),e.vo._r=pl.bind(null,e.eventManager),e.vo.Mo=dl.bind(null,e.eventManager),e}function np(t){var e=Oo(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pl.bind(null,e),e}var rp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.R=Sf(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Lh(this.persistence,new xh,t.initialUser,this.R)},t.prototype.qo=function(t){return new rf(sf.bs,this.R)},t.prototype.Bo=function(t){return new yf},t.prototype.terminate=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),ip=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return i(e,t),e.prototype.initialize=function(e){return s(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Wh(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,np(this.Qo.syncEngine)];case 4:return r.sent(),[4,Qf(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Lh(this.persistence,new xh,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new lh(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Dh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Yc.withCacheSize(this.cacheSizeBytes):Yc.DEFAULT;return new Ah(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Tf(),_f(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new yf},e}(rp),op=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return i(e,t),e.prototype.initialize=function(e){return s(this,void 0,void 0,(function(){var n,r=this;return a(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof gf?(this.sharedClientState.syncEngine={ui:Ql.bind(null,n),ai:Zl.bind(null,n),hi:tp.bind(null,n),fn:$l.bind(null,n),ci:Wl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return s(r,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,Xl(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Tf();if(!gf.yt(e))throw new To(Eo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Dh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new gf(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(ip),sp=function(){function t(){}return t.prototype.initialize=function(t,e){return s(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Rl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Gl.bind(null,this.syncEngine),[4,el(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new hl},t.prototype.createDatastore=function(t){var e,n=Sf(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Ef(e));return function(t,e,n){return new Cf(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Rl(s.syncEngine,t,0)},o=bf.yt()?new bf:new mf,new Of(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Sl(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=Oo(t),Ao("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Pf(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ap=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),up=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new vc,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return s(this,void 0,void 0,(function(){var t,e,n,r;return a(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new yl(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return s(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return s(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new To(Eo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:return n=Oo(t),r=Au(n.R)+"/documents",i={documents:e.map((function(t){return Eu(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ro(!!e.found),e.found.name,e.found.updateTime;var n=Tu(t,e.found.name),r=bu(e.found.updateTime),i=new ws({mapValue:{fields:e.found.fields}});return Es.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ro(!!e.missing),Ro(!!e.readTime);var n=Tu(t,e.missing),r=bu(e.readTime);return Es.newNoDocument(n,r)}(t,e):Co()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Ro(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Va(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return s(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=os.fromPath(n);e.mutations.push(new Ua(r,e.precondition(r)))})),[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return n=Oo(t),r=Au(n.R)+"/documents",i={writes:e.map((function(t){return Cu(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Co();e=Uo.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new To(Eo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ta.updateTime(e):Ta.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Uo.min()))throw new To(Eo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ta.updateTime(e)}return Ta.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),cp=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Af(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return s(t,void 0,void 0,(function(){var t,e,n=this;return a(this,(function(r){return t=new up(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ns(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!qa(e)}return!1},t}(),hp=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=af.UNAUTHENTICATED,this.clientId=Po.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return s(r,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return Ao("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new To(Eo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new vc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return s(t,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ol(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t,e){return s(this,void 0,void 0,(function(){var n,r,i=this;return a(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ao("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return s(i,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Mh(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function lp(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,pp(t)];case 1:return n=i.sent(),Ao("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return(n=Oo(t)).asyncQueue.verifyOperationInProgress(),Ao("RemoteStore","RemoteStore received new credentials"),r=qf(n),n.Or.add(3),[4,Pf(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,xf(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function pp(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ao("FirestoreClient","Using default OfflineComponentProvider"),[4,fp(t,new rp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function dp(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ao("FirestoreClient","Using default OnlineComponentProvider"),[4,lp(t,new sp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function vp(t){return pp(t).then((function(t){return t.persistence}))}function gp(t){return pp(t).then((function(t){return t.localStore}))}function yp(t){return dp(t).then((function(t){return t.remoteStore}))}function mp(t){return dp(t).then((function(t){return t.syncEngine}))}function bp(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,dp(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Al.bind(null,e.syncEngine),n.onUnlisten=kl.bind(null,e.syncEngine),n)]}}))}))}function wp(t,e,n){var r=this;void 0===n&&(n={});var i=new vc;return t.asyncQueue.enqueueAndForget((function(){return s(r,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ap({next:function(o){e.enqueueAndForget((function(){return ll(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new To(Eo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new To(Eo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new gl(Hs(n.path),o,{includeMetadataChanges:!0,so:!0});return fl(t,s)},[4,bp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Ip(t,e,n){var r=this;void 0===n&&(n={});var i=new vc;return t.asyncQueue.enqueueAndForget((function(){return s(r,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ap({next:function(n){e.enqueueAndForget((function(){return ll(t,s)})),n.fromCache&&"server"===r.source?i.reject(new To(Eo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new gl(n,o,{includeMetadataChanges:!0,so:!0});return fl(t,s)},[4,bp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Ep=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Tp=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),_p=new Map,Sp=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ap=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(af.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Np=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),kp=function(){function t(t){var e=this;this.currentUser=af.UNAUTHENTICATED,this.oc=new vc,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ao("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ao("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ao("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ro("string"==typeof n.accessToken),new Sp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return s(n,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Ro(null===t||"string"==typeof t),new af(t)},t}(),Dp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=af.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Cp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Dp(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(af.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t,e,n){if(!n)throw new To(Eo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Op(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new To(Eo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function xp(t,e,n,r){if(!0===e&&!0===r)throw new To(Eo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Pp(t){if(!os.isDocumentKey(t))throw new To(Eo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Lp(t){if(os.isDocumentKey(t))throw new To(Eo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Mp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Co()}function Fp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new To(Eo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Mp(t);throw new To(Eo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Vp(t,e){if(e<=0)throw new To(Eo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Up=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new To(Eo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new To(Eo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,xp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),jp=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Up({}),this._settingsFrozen=!1,t instanceof Tp?(this._databaseId=t,this._credentials=new Ap):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new To(Eo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tp(t.options.projectId)}(t),this._credentials=new kp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new To(Eo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new To(Eo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Up(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ap;switch(t.type){case"gapi":var e=t.client;return Ro(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Cp(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new To(Eo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return t=this,(e=_p.get(t))&&(Ao("ComponentProvider","Removing Datastore"),_p.delete(t),e.terminate()),Promise.resolve();var t,e},t}(),qp=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Kp(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Bp=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Kp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Hs(r))||this)._path=r,i.type="collection",i}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new qp(this.firestore,null,new os(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Bp);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=q(t),Rp("collection","path",e),t instanceof jp)return Lp(n=Go.fromString.apply(Go,h([e],r))),new Kp(t,null,n);if(!(t instanceof qp||t instanceof Kp))throw new To(Eo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Lp(n=Go.fromString.apply(Go,h([t.path],r)).child(Go.fromString(e))),new Kp(t.firestore,null,n)}function Hp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=q(t),1===arguments.length&&(e=Po.u()),Rp("doc","path",e),t instanceof jp)return Pp(n=Go.fromString.apply(Go,h([e],r))),new qp(t,null,new os(n));if(!(t instanceof qp||t instanceof Kp))throw new To(Eo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Pp(n=t._path.child(Go.fromString.apply(Go,h([e],r)))),new qp(t.firestore,t instanceof Kp?t.converter:null,new os(n))}function zp(t,e){return t=q(t),e=q(e),(t instanceof qp||t instanceof Kp)&&(e instanceof qp||e instanceof Kp)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Wp(t,e){return t=q(t),e=q(e),t instanceof Bp&&e instanceof Bp&&t.firestore===e.firestore&&ta(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Qp=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Af(this,"async_queue_retry"),this.Ic=function(){var e=_f();e&&Ao("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=_f();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=_f();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new vc;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return s(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ic(t=n.sent()))throw t;return Ao("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,No("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=il.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Co()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Xp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}(function(){function t(){this._progressObserver={},this._taskCompletionResolver=new vc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}})();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yp=-1,Jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Qp,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return i(e,t),e.prototype._terminate=function(){return this._firestoreClient||Zp(this),this._firestoreClient.terminate()},e}(jp);function $p(t){return t._firestoreClient||Zp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Zp(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Ep(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new hp(t._credentials,t._queue,r)}function td(t,e,n){var r=this,i=new vc;return t.asyncQueue.enqueue((function(){return s(r,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fp(t,n)];case 1:return o.sent(),[4,lp(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Eo.FAILED_PRECONDITION||t.code===Eo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function ed(t){if(t._initialized||t._terminated)throw new To(Eo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new To(Eo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zo(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),rd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Qo.fromBase64String(e))}catch(e){throw new To(Eo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Qo.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),id=function(t){this._methodName=t},od=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new To(Eo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new To(Eo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Lo(this._lat,t._lat)||Lo(this._long,t._long)},t}(),sd=/^__.*__$/,ad=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Oa(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ra(t,this.data,e,this.fieldTransforms)},t}(),ud=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Oa(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Co()}}var hd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Cd(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(cd(this.Nc)&&sd.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),fd=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Sf(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new hd({Nc:t,methodName:e,qc:n,path:zo.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function ld(t){var e=t._freezeSettings(),n=Sf(t._databaseId);return new fd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Ad("Data must be an object, but it was:",s,r);var a,u,c=_d(r,s);if(o.merge)a=new Wo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Nd(e,l[f],n);if(!s.contains(p))throw new To(Eo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Rd(h,p)||h.push(p)}a=new Wo(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new ad(new ws(c),a,u)}var dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(id);function vd(t,e,n){return new hd({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var gd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._toFieldTransform=function(t){return new Ia(t.path,new pa)},e.prototype.isEqual=function(t){return t instanceof e},e}(id),yd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return i(e,t),e.prototype._toFieldTransform=function(t){var e=vd(this,t,!0),n=this.Kc.map((function(t){return Td(t,e)})),r=new da(n);return new Ia(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(id),md=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return i(e,t),e.prototype._toFieldTransform=function(t){var e=vd(this,t,!0),n=this.Kc.map((function(t){return Td(t,e)})),r=new ga(n);return new Ia(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(id),bd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return i(e,t),e.prototype._toFieldTransform=function(t){var e=new ma(t.R,ua(t.R,this.Qc));return new Ia(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(id);function wd(t,e,n,r){var i=t.Uc(1,e,n);Ad("Data must be an object, but it was:",i,r);var o=[],s=ws.empty();qo(r,(function(t,r){var a=Dd(e,t,n);r=q(r);var u=i.Oc(a);if(r instanceof dd)o.push(a);else{var c=Td(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Wo(o);return new ud(s,a,i.fieldTransforms)}function Id(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Nd(e,r,n)],u=[i];if(o.length%2!=0)throw new To(Eo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Nd(e,o[c])),u.push(o[c+1]);for(var h=[],f=ws.empty(),l=a.length-1;l>=0;--l)if(!Rd(h,a[l])){var p=a[l],d=u[l];d=q(d);var v=s.Oc(p);if(d instanceof dd)h.push(p);else{var g=Td(d,v);null!=g&&(h.push(p),f.set(p,g))}}var y=new Wo(h);return new ud(f,y,s.fieldTransforms)}function Ed(t,e,n,r){return void 0===r&&(r=!1),Td(n,t.Uc(r?4:3,e))}function Td(t,e){if(Sd(t=q(t)))return Ad("Unsupported field value:",e,t),_d(t,e);if(t instanceof id)return function(t,e){if(!cd(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Td(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=q(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ua(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Vo.fromDate(t);return{timestampValue:gu(e.R,n)}}if(t instanceof Vo)return n=new Vo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:gu(e.R,n)};if(t instanceof od)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rd)return{bytesValue:yu(e.R,t._byteString)};if(t instanceof qp){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:wu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Mp(t))}(t,e)}function _d(t,e){var n={};return Bo(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(t,(function(t,r){var i=Td(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Sd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Vo||t instanceof od||t instanceof rd||t instanceof qp||t instanceof id)}function Ad(t,e,n){if(!Sd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Mp(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Nd(t,e,n){if((e=q(e))instanceof nd)return e._internalPath;if("string"==typeof e)return Dd(t,e);throw Cd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var kd=new RegExp("[~\\*/\\[\\]]");function Dd(t,e,n){if(e.search(kd)>=0)throw Cd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(nd.bind.apply(nd,h([void 0],e.split(".")))))._internalPath}catch(r){throw Cd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new To(Eo.INVALID_ARGUMENT,(a+=". ")+t+u)}function Rd(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Od=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new qp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new xd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Pd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Od);function Pd(t,e){return"string"==typeof e?Dd(t,e):e instanceof nd?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ld=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Md=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return i(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Pd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Od),Fd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Md),Vd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ld(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Fd(n._firestore,n._userDataWriter,r.key,r,new Ld(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new To(Eo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Fd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ld(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Fd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ld(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Ud(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Ud(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Co()}}function jd(t,e){return t instanceof Md&&e instanceof Md?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Vd&&e instanceof Vd&&t._firestore===e._firestore&&Wp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){if(Ws(t)&&0===t.explicitOrderBy.length)throw new To(Eo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bd=function(){};function Kd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Gd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return i(e,t),e.prototype._apply=function(t){var e=ld(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new To(Eo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Jd(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(Yd(r,t,f))}a={arrayValue:{values:u}}}else a=Yd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jd(s,o),a=Ed(n,"where",s,"in"===o||"not-in"===o);var l=ks.create(i,o,a);return function(t,e){if(e.g()){var n=Xs(t);if(null!==n&&!n.isEqual(e.field))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Qs(t);null!==r&&$d(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new To(Eo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new To(Eo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Bp(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Bd),Hd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return i(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new To(Eo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new To(Eo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Us(e,n);return function(t,e){if(null===Qs(t)){var n=Xs(t);null!==n&&$d(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Bp(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ks(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Bd),zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return i(e,t),e.prototype._apply=function(t){return new Bp(t.firestore,t.converter,Zs(t._query,this.Hc,this.Jc))},e}(Bd),Wd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return i(e,t),e.prototype._apply=function(t){var e=Xd(t,this.type,this.Yc,this.Xc);return new Bp(t.firestore,t.converter,function(t,e){return new Ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Bd),Qd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return i(e,t),e.prototype._apply=function(t){var e=Xd(t,this.type,this.Yc,this.Xc);return new Bp(t.firestore,t.converter,function(t,e){return new Ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Bd);function Xd(t,e,n,r){if(n[0]=q(n[0]),n[0]instanceof Od)return function(t,e,n,r,i){if(!r)throw new To(Eo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Js(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(ps(e,r.key));else{var c=r.data.field(u.field);if(Zo(c))throw new To(Eo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new To(Eo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Fs(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=ld(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new To(Eo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new To(Eo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ys(t)&&-1!==c.indexOf("/"))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Go.fromString(c));if(!os.isDocumentKey(h))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new os(h);a.push(ps(e,f))}else{var l=Ed(n,r,c);a.push(l)}}return new Fs(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Yd(t,e,n){if("string"==typeof(n=q(n))){if(""===n)throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ys(e)&&-1!==n.indexOf("/"))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Go.fromString(n));if(!os.isDocumentKey(r))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ps(t,new os(r))}if(n instanceof qp)return ps(t,n._key);throw new To(Eo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Mp(n)+".")}function Jd(t,e){if(!Array.isArray(t)||0===t.length)throw new To(Eo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new To(Eo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function $d(t,e,n){if(!n.isEqual(e))throw new To(Eo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ss(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes($o(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Co()}},t.prototype.convertObject=function(t,e){var n=this,r={};return qo(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new od(Jo(t.latitude),Jo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ts(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(es(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Yo(t);return new Vo(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Go.fromString(t);Ro(Hu(n));var r=new Tp(n.get(1),n.get(3)),i=new os(n.popFirst(5));return r.isEqual(e)||No("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ev=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return i(e,t),e.prototype.convertBytes=function(t){return new rd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new qp(this.firestore,null,e)},e}(Zd),nv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ld(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=rv(t,this._firestore),i=tv(r.converter,e,n),o=pd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ta.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=rv(t,this._firestore);return o="string"==typeof(e=q(e))||e instanceof nd?Id(this._dataReader,"WriteBatch.update",s._key,e,n,r):wd(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ta.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=rv(t,this._firestore);return this._mutations=this._mutations.concat(new Va(e._key,Ta.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new To(Eo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){if((t=q(t)).firestore!==e)throw new To(Eo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return i(e,t),e.prototype.convertBytes=function(t){return new rd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new qp(this.firestore,null,e)},e}(Zd);function ov(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Fp(t,qp);var o=Fp(t.firestore,Jp),s=ld(o);return av(o,[("string"==typeof(e=q(e))||e instanceof nd?Id(s,"updateDoc",t._key,e,n,r):wd(s,"updateDoc",t._key,e)).toMutation(t._key,Ta.exists(!0))])}function sv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=q(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof i[c]||Xp(i[c])||(u=i[c],c++);var h,f,l,p={includeMetadataChanges:u.includeMetadataChanges};if(Xp(i[c])){var d=i[c];i[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[c+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof qp)f=Fp(t.firestore,Jp),l=Hs(t._key.path),h={next:function(e){i[c]&&i[c](uv(f,t,e))},error:i[c+1],complete:i[c+2]};else{var v=Fp(t,Bp);f=Fp(v.firestore,Jp),l=v._query;var g=new iv(f);h={next:function(t){i[c]&&i[c](new Vd(f,g,v,t))},error:i[c+1],complete:i[c+2]},qd(t._query)}return function(t,e,n,r){var i=this,o=new ap(r),u=new gl(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return s(i,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=fl,[4,bp(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return s(i,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=ll,[4,bp(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))}))}}($p(f),l,p,h)}function av(t,e){return function(t,e){var n=this,r=new vc;return t.asyncQueue.enqueueAndForget((function(){return s(n,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return n=Dl,[4,mp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}($p(t),e)}function uv(t,e,n){var r=n.docs.get(e._key),i=new iv(t);return new Md(t,i,e._key,r,new Ld(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return i(e,t),e.prototype.get=function(e){var n=this,r=rv(e,this._firestore),i=new iv(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Md(n._firestore,i,r._key,t._document,new Ld(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=ld(t)}return t.prototype.get=function(t){var e=this,n=rv(t,this._firestore),r=new ev(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Co();var i=t[0];if(i.isFoundDocument())return new Od(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Od(e._firestore,r,n._key,null,n.converter);throw Co()}))},t.prototype.set=function(t,e,n){var r=rv(t,this._firestore),i=tv(r.converter,e,n),o=pd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=rv(t,this._firestore);return o="string"==typeof(e=q(e))||e instanceof nd?Id(this._dataReader,"Transaction.update",s._key,e,n,r):wd(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=rv(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(){if("undefined"==typeof Uint8Array)throw new To(Eo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function fv(){if("undefined"==typeof atob)throw new To(Eo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var lv=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return fv(),new t(rd.fromBase64String(e))},t.fromUint8Array=function(e){return hv(),new t(rd.fromUint8Array(e))},t.prototype.toBase64=function(){return fv(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return hv(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),pv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ed(t=Fp(t,Jp));var n=$p(t),r=t._freezeSettings(),i=new sp;return td(n,i,new ip(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ed(t=Fp(t,Jp));var e=$p(t),n=t._freezeSettings(),r=new sp;return td(e,r,new op(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new To(Eo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new vc;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return s(e,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return mc.yt()?(e=t+"main",[4,mc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Dh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),dv=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Tp||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||ko("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Fp(t,jp))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&ko("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=af.MOCK_USER;else{s=w(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new To(Eo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new af(u)}t._credentials=new Np(new Sp(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return s(e,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,vp(t)];case 1:return e=r.sent(),[4,yp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Oo(t);return e.Or.delete(0),xf(e)}(n))]}}))}))}))}($p(Fp(this._delegate,Jp)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return s(e,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,vp(t)];case 1:return e=r.sent(),[4,yp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return(e=Oo(t)).Or.add(0),[4,Pf(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}($p(Fp(this._delegate,Jp)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&xp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new vc;return t.asyncQueue.enqueueAndForget((function(){return s(e,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return e=Ll,[4,mp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}($p(Fp(this._delegate,Jp)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ap(e);return t.asyncQueue.enqueueAndForget((function(){return s(n,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=function(t,e){Oo(t).Gr.add(e),e.next()},[4,bp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return s(n,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=function(t,e){Oo(t).Gr.delete(e)},[4,bp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}($p(t=Fp(t,Jp)),Xp(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new To(Eo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Dv(this,Gp(this._delegate,t))}catch(t){throw Iv(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new wv(this,Hp(this._delegate,t))}catch(t){throw Iv(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Av(this,function(t,e){if(t=Fp(t,jp),Rp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new To(Eo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Bp(t,null,function(t){return new Ks(Go.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Iv(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new vc;return t.asyncQueue.enqueueAndForget((function(){return s(n,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return[4,function(t){return dp(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new cp(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}($p(t),(function(n){return e(new cv(t,n))}))}(this._delegate,(function(n){return t(new yv(e,n))}))},t.prototype.batch=function(){var t=this;return $p(this._delegate),new mv(new nv(this._delegate,(function(e){return av(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new To(Eo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new To(Eo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),vv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return i(e,t),e.prototype.convertBytes=function(t){return new lv(new rd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return wv.eu(e,this.firestore,null)},e}(Zd);function gv(t){var e;e=t,_o.setLogLevel(e)}var yv=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new vv(t)}return t.prototype.get=function(t){var e=this,n=Cv(t);return this._delegate.get(n).then((function(t){return new _v(e._firestore,new Md(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Cv(t);return n?(Op("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Cv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,h([s,e,n],i)),this},t.prototype.delete=function(t){var e=Cv(t);return this._delegate.delete(e),this},t}(),mv=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Cv(t);return n?(Op("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Cv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,h([s,e,n],i)),this},t.prototype.delete=function(t){var e=Cv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),bv=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Fd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Sv(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new vv(e),n),i.set(n,o)),o},t}();bv.su=new WeakMap;var wv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vv(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new To(Eo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new qp(n._delegate,r,new os(e)))},t.eu=function(e,n,r){return new t(n,new qp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Dv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Dv(this.firestore,Gp(this._delegate,t))}catch(t){throw Iv(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=q(t))instanceof qp&&zp(this._delegate,t)},t.prototype.set=function(t,e){e=Op("DocumentReference.set",e);try{return function(t,e,n){t=Fp(t,qp);var r=Fp(t.firestore,Jp),i=tv(t.converter,e,n);return av(r,[pd(ld(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ta.none())])}(this._delegate,t,e)}catch(t){throw Iv(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ov(this._delegate,t):ov.apply(void 0,h([this._delegate,t,e],n))}catch(t){throw Iv(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return av(Fp((t=this._delegate).firestore,Jp),[new Va(t._key,Ta.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ev(e),i=Tv(e,(function(e){return new _v(t.firestore,new Md(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return sv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Fp(t,qp);var e=Fp(t.firestore,Jp),n=$p(e),r=new iv(e);return function(t,e){var n=this,r=new vc;return t.asyncQueue.enqueueAndForget((function(){return s(n,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Oo(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new To(Eo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ol(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,gp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Md(e,r,t._key,n,new Ld(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Fp(t,qp);var e=Fp(t.firestore,Jp);return wp($p(e),t._key,{source:"server"}).then((function(n){return uv(e,t,n)}))}(this._delegate):function(t){t=Fp(t,qp);var e=Fp(t.firestore,Jp);return wp($p(e),t._key).then((function(n){return uv(e,t,n)}))}(this._delegate)).then((function(t){return new _v(e.firestore,new Md(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(bv.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Iv(t,e,n){return t.message=t.message.replace(e,n),t}function Ev(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Xp(r))return r}return{}}function Tv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Xp(t[0])?t[0]:Xp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _v=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new wv(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return jd(this._delegate,t._delegate)},t}(),Sv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(_v),Av=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vv(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Kd(this._delegate,function(t,e,n){var r=e,i=Pd("where",t);return new Gd(i,r,n)}(e,n,r)))}catch(e){throw Iv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Kd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Pd("orderBy",t);return new Hd(r,n)}(e,n)))}catch(e){throw Iv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Kd(this._delegate,function(t){return Vp("limit",t),new zd("limit",t,"F")}(e)))}catch(e){throw Iv(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Kd(this._delegate,function(t){return Vp("limitToLast",t),new zd("limitToLast",t,"L")}(e)))}catch(e){throw Iv(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wd("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Iv(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wd("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Iv(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qd("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Iv(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qd("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Iv(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Wp(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Fp(t,Bp);var e=Fp(t.firestore,Jp),n=$p(e),r=new iv(e);return function(t,e){var n=this,r=new vc;return t.asyncQueue.enqueueAndForget((function(){return s(n,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Gh(t,e,!0)];case 1:return u=a.sent(),r=new El(e,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=ol(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,gp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Vd(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Fp(t,Bp);var e=Fp(t.firestore,Jp),n=$p(e),r=new iv(e);return Ip(n,t._query,{source:"server"}).then((function(n){return new Vd(e,r,t,n)}))}(this._delegate):function(t){t=Fp(t,Bp);var e=Fp(t.firestore,Jp),n=$p(e),r=new iv(e);return qd(t._query),Ip(n,t._query).then((function(n){return new Vd(e,r,t,n)}))}(this._delegate)).then((function(t){return new kv(e.firestore,new Vd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ev(e),i=Tv(e,(function(e){return new kv(t.firestore,new Vd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return sv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(bv.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Nv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Sv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),kv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Av(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Sv(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Nv(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Sv(n._firestore,r))}))},t.prototype.isEqual=function(t){return jd(this._delegate,t._delegate)},t}(),Dv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new wv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new wv(this.firestore,void 0===t?Hp(this._delegate):Hp(this._delegate,t))}catch(t){throw Iv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Fp(t.firestore,Jp),r=Hp(t),i=tv(t.converter,e);return av(n,[pd(ld(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ta.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new wv(e.firestore,t)}))},e.prototype.isEqual=function(t){return zp(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(bv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Av);function Cv(t){return Fp(t,qp)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(nd.bind.apply(nd,h([void 0],t)))}return t.documentId=function(){return new t(zo.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=q(t))instanceof nd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ov=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new gd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new dd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yd("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new md("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new bd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xv={Firestore:dv,GeoPoint:od,Timestamp:Vo,Blob:lv,Transaction:yv,WriteBatch:mv,DocumentReference:wv,DocumentSnapshot:_v,Query:Av,QueryDocumentSnapshot:Sv,QuerySnapshot:kv,CollectionReference:Dv,FieldPath:Rv,FieldValue:Ov,setLogLevel:gv,CACHE_SIZE_UNLIMITED:Yp};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t){!function(t,e){t.INTERNAL.registerComponent(new B("firestore",(function(t){var n=t.getProvider("app").getImmediate();return e(n,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},xv)))}(t,(function(t,e){return new dv(t,new Jp(t,e),new pv)})),t.registerVersion("@firebase/firestore","2.4.0")}Pv(Ft);n(88);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function r(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}var i=r(this);function o(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}t=t[t.length-1],o=r[t],n=n(o),n!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}function s(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:s(t)}}o("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(Xt){this.f(Xt)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(Xt){n.reject(Xt)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(Oi){o(Oi)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,a--,0==a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Ra(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var u=u||{},c=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""}function p(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function v(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==d(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++w)}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function I(t,e,n){return t.call.apply(t.bind,arguments)}function E(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function T(t,e,n){return T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?I:E,T.apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now;function A(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function N(t){return t}function k(t,e,n){this.code=R+t,this.message=e||O[t]||"",this.a=n||null}function D(t){var e=t&&t.code;return e?new k(e.substring(R.length),t.message,t.serverResponse):null}A(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var C,R="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in x)if(x[e].id===t)return t=x[e],{firebaseEndpoint:t.Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function L(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function M(t){if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function F(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");M.call(this,n+t[r])}function V(t,e){throw new F("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function q(){this.b=this.a=null}C=P("__EID__")?"__EID__":void 0,A(M,Error),M.prototype.name="CustomError",A(F,M),F.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var B=new U((function(){return new G}),(function(t){t.reset()}));function K(){var t=Oe,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function G(){this.next=this.b=this.a=null}q.prototype.add=function(t,e){var n=B.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},G.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function W(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}var Q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},X=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Y=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function J(t){t:{for(var e=aa,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function $(t,e){return 0<=H(t,e)}function Z(t,e){var n;return e=H(t,e),(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function tt(t,e){W(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function et(t){return Array.prototype.concat.apply([],arguments)}function nt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var rt,it=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ot=/&/g,st=/</g,at=/>/g,ut=/"/g,ct=/'/g,ht=/\x00/g,ft=/[\x00&<>"']/;function lt(t,e){return-1!=t.indexOf(e)}function pt(t,e){return t<e?-1:t>e?1:0}t:{var dt=c.navigator;if(dt){var vt=dt.userAgent;if(vt){rt=vt;break t}}rt=""}function gt(t){return lt(rt,t)}function yt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function mt(t){for(var e in t)return!1;return!0}function bt(t){var e,n={};for(e in t)n[e]=t[e];return n}var wt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function It(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<wt.length;o++)n=wt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Et(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||c,r.Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;V("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function Tt(t,e){this.a=t===Nt&&e||"",this.b=At}function _t(t){return t instanceof Tt&&t.constructor===Tt&&t.b===At?t.a:(V("expected object of type Const, got '"+t+"'"),"type_error:Const")}Tt.prototype.ta=!0,Tt.prototype.sa=function(){return this.a},Tt.prototype.toString=function(){return"Const{"+this.a+"}"};var St,At={},Nt={};function kt(){if(void 0===St){var t=null,e=c.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:N,createScript:N,createScriptURL:N})}catch(n){c.console&&c.console.error(n.message)}St=t}else St=t}return St}function Dt(t,e){this.a=e===Pt?t:""}function Ct(t){return t instanceof Dt&&t.constructor===Dt?t.a:(V("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function Rt(t,e){var n=_t(t);if(!xt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Ot,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof Tt?_t(t):encodeURIComponent(String(t))})),Lt(t)}Dt.prototype.ta=!0,Dt.prototype.sa=function(){return this.a.toString()},Dt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ot=/%{(\w+)}/g,xt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pt={};function Lt(t){var e=kt();return t=e?e.createScriptURL(t):t,new Dt(t,Pt)}function Mt(t,e){this.a=e===Gt?t:""}function Vt(t){return t instanceof Mt&&t.constructor===Mt?t.a:(V("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Mt.prototype.ta=!0,Mt.prototype.sa=function(){return this.a.toString()},Mt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ut=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,jt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,qt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Bt(t){if(t instanceof Mt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),qt.test(t))t=new Mt(t,Gt);else{t=String(t),t=t.replace(/(%0A|%0D)/g,"");var e=t.match(jt);t=e&&Ut.test(e[1])?new Mt(t,Gt):null}return t}function Kt(t){return t instanceof Mt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),qt.test(t)||(t="about:invalid#zClosurez"),new Mt(t,Gt))}var Gt={},Ht=new Mt("about:invalid#zClosurez",Gt);function zt(t,e,n){this.a=n===Qt?t:""}function Wt(t){return t instanceof zt&&t.constructor===zt?t.a:(V("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}zt.prototype.ta=!0,zt.prototype.sa=function(){return this.a.toString()},zt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Qt={};function Yt(t,e){Et(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=c?e=l(e.document):(null===f&&(f=l(c.document)),e=f),e&&t.setAttribute("nonce",e)}function Jt(t,e,n,r){return t=t instanceof Mt?t:Kt(t),e=e||c,n=n instanceof Tt?_t(n):n||"",e.open(Vt(t),n,r,void 0)}function $t(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Zt(t){return ft.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ot,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(st,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(at,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ut,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ct,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ht,"&#0;"))),t}function te(t){return te[" "](t),t}function ee(t,e){var n=de;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}te[" "]=p;var ne,re=gt("Opera"),ie=gt("Trident")||gt("MSIE"),oe=gt("Edge"),se=oe||ie,ae=gt("Gecko")&&!(lt(rt.toLowerCase(),"webkit")&&!gt("Edge"))&&!(gt("Trident")||gt("MSIE"))&&!gt("Edge"),ue=lt(rt.toLowerCase(),"webkit")&&!gt("Edge");function ce(){var t=c.document;return t?t.documentMode:void 0}t:{var he="",fe=function(){var t=rt;return ae?/rv:([^\);]+)(\)|;)/.exec(t):oe?/Edge\/([\d\.]+)/.exec(t):ie?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ue?/WebKit\/(\S+)/.exec(t):re?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(fe&&(he=fe?fe[1]:""),ie){var le=ce();if(null!=le&&le>parseFloat(he)){ne=String(le);break t}}ne=he}var pe,de={};function ve(t){return ee(t,(function(){for(var e=0,n=it(String(ne)).split("."),r=it(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=pt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||pt(0==s[2].length,0==a[2].length)||pt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(c.document&&ie){var ge=ce();pe=ge||(parseInt(ne,10)||void 0)}else pe=void 0;var ye=pe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(nd){}var me=!ie||9<=Number(ye);function be(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function we(t,e){yt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Te.hasOwnProperty(n)?t.setAttribute(Te[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var Ie,Ee,Te={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function _e(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!me&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Zt(s.name),'"'),s.type){o.push(' type="',Zt(s.type),'"');var a={};It(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=Ae(i,o),s&&("string"===typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):we(o,s)),2<r.length&&Se(i,o,r),o}function Se(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!v(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(g(o)){s="function"==typeof o.item;break t}}s=!1}z(s?nt(o):o,r)}}}function Ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function Ne(t){c.setTimeout((function(){throw t}),0)}function ke(){var t=c.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!gt("Presto")&&(t=function(){var t=Ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=T((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!gt("Trident")&&!gt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){c.setTimeout(t,0)}}function De(t,e){Ee||Ce(),Re||(Ee(),Re=!0),Oe.add(t,e)}function Ce(){if(c.Promise&&c.Promise.resolve){var t=c.Promise.resolve(void 0);Ee=function(){t.then(xe)}}else Ee=function(){var t=xe;!g(c.setImmediate)||c.Window&&c.Window.prototype&&!gt("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(Ie||(Ie=ke()),Ie(t)):c.setImmediate(t)}}var Re=!1,Oe=new q;function xe(){for(var t;t=K();){try{t.a.call(t.b)}catch(e){Ne(e)}j(B,t)}Re=!1}function Pe(t,e){if(this.a=Le,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=p)try{var n=this;t.call(e,(function(t){Xe(n,Me,t)}),(function(t){if(!(t instanceof on))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Xe(n,Fe,t)}))}catch(r){Xe(this,Fe,r)}}var Le=0,Me=2,Fe=3;function Ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ue=new U((function(){return new Ve}),(function(t){t.reset()}));function je(t,e,n){var r=Ue.get();return r.g=t,r.b=e,r.f=n,r}function qe(t){if(t instanceof Pe)return t;var e=new Pe(p);return Xe(e,Me,t),e}function Be(t){return new Pe((function(e,n){n(t)}))}function Ke(t,e,n){Ye(t,e,n,null)||De(_(e,t))}function Ge(t){return new Pe((function(e,n){var r=t.length,i=[];if(r)for(var o,s=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},u=0;u<t.length;u++)o=t[u],Ke(o,_(s,u),a);else e(i)}))}function He(t){return new Pe((function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},s=0;s<t.length;s++)i=t[s],Ke(i,_(o,s,!0),_(o,s,!1));else e(r)}))}function ze(t,e){if(t.a==Le)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Le&&1==r?ze(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Ze(n),tn(n,i,Fe,e)))}t.c=null}else Xe(t,Fe,e)}function We(t,e){t.b||t.a!=Me&&t.a!=Fe||$e(t),t.f?t.f.next=e:t.b=e,t.f=e}function Qe(t,e,n,r){var i=je(null,null,null);return i.a=new Pe((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(Xt){o(Xt)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof on?o(e):t(i)}catch(Xt){o(Xt)}}:o})),i.a.c=t,We(t,i),i.a}function Xe(t,e,n){t.a==Le&&(t===n&&(e=Fe,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ye(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,$e(t),e!=Fe||n instanceof on||nn(t,n)))}function Ye(t,e,n,r){if(t instanceof Pe)return We(t,je(e||p,n||null,r)),!0;if(L(t))return t.then(e,n,r),!0;if(y(t))try{var i=t.then;if(g(i))return Je(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Je(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}function $e(t){t.h||(t.h=!0,De(t.gc,t))}function Ze(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function tn(t,e,n,r){if(n==Fe&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,en(e,n,r);else try{e.c?e.g.call(e.f):en(e,n,r)}catch(i){rn.call(null,i)}j(Ue,e)}function en(t,e,n){e==Me?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function nn(t,e){t.g=!0,De((function(){t.g&&rn.call(null,e)}))}Pe.prototype.then=function(t,e,n){return Qe(this,g(t)?t:null,g(e)?e:null,n)},Pe.prototype.$goog_Thenable=!0,t=Pe.prototype,t.oa=function(t,e){return t=je(t,t,e),t.c=!0,We(this,t),this},t.o=function(t,e){return Qe(this,null,t,e)},t.cancel=function(t){if(this.a==Le){var e=new on(t);De((function(){ze(this,e)}),this)}},t.$c=function(t){this.a=Le,Xe(this,Me,t)},t.ad=function(t){this.a=Le,Xe(this,Fe,t)},t.gc=function(){for(var t;t=Ze(this);)tn(this,t,this.a,this.i);this.h=!1};var rn=Ne;function on(t){M.call(this,t)}function sn(){0!=an&&(un[m(this)]=this),this.ya=this.ya,this.pa=this.pa}A(on,M),on.prototype.name="cancel";var an=0,un={};function cn(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=an)){var e=m(t);if(0!=an&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete un[e]}}sn.prototype.ya=!1,sn.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var hn=Object.freeze||function(t){return t},fn=!ie||9<=Number(ye),ln=ie&&!ve("9"),pn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",p,e),c.removeEventListener("test",p,e)}catch(n){}return t}();function dn(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function vn(t,e){if(dn.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ae){t:{try{te(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:gn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}dn.prototype.preventDefault=function(){this.defaultPrevented=!0},A(vn,dn);var gn=hn({2:"touch",3:"pen",4:"mouse"});vn.prototype.preventDefault=function(){vn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ln)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},vn.prototype.g=function(){return this.a};var yn="closure_listenable_"+(1e6*Math.random()|0),mn=0;function bn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++mn,this.wa=this.Qa=!1}function wn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function In(t){this.src=t,this.a={},this.b=0}function En(t,e){var n=e.type;n in t.a&&Z(t.a[n],e)&&(wn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Tn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}In.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var s=Tn(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):(e=new bn(e,this.src,o,!!r,i),e.Qa=n,t.push(e)),e};var _n="closure_lm_"+(1e6*Math.random()|0),Sn={};function An(t,e,n,r,i){if(r&&r.once)Dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)An(t,e[o],n,r,i);else n=Vn(n),t&&t[yn]?jn(t,e,n,y(r)?!!r.capture:!!r,i):Nn(t,e,n,!1,r,i)}function Nn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i,a=Mn(t);if(a||(t[_n]=a=new In(t)),n=a.add(e,n,r,s,o),!n.proxy){if(r=kn(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)pn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(On(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function kn(){var t=Ln,e=fn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Dn(t,e[o],n,r,i);else n=Vn(n),t&&t[yn]?qn(t,e,n,y(r)?!!r.capture:!!r,i):Nn(t,e,n,!0,r,i)}function Cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Cn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=Vn(n),t&&t[yn]?(t=t.v,e=String(e).toString(),e in t.a&&(o=t.a[e],n=Tn(o,n,r,i),-1<n&&(wn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Tn(e,n,r,i)),(n=-1<t?e[t]:null)&&Rn(n))}function Rn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[yn])En(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(On(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mn(e))?(En(n,t),0==n.b&&(n.src=null,e[_n]=null)):wn(t)}}}function On(t){return t in Sn?Sn[t]:Sn[t]="on"+t}function xn(t,e,n,r){var i=!0;if((t=Mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=Pn(o,r),i=i&&!1!==o)}return i}function Pn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&Rn(t),n.call(r,e)}function Ln(t,e){if(t.wa)return!0;if(!fn){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(r=e,e=new vn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=xn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=xn(r[i],t,!1,e),n=n&&o}return n}return Pn(t,new vn(e,this))}function Mn(t){return t=t[_n],t instanceof In?t:null}var Fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vn(t){return g(t)?t:(t[Fn]||(t[Fn]=function(e){return t.handleEvent(e)}),t[Fn])}function Un(){sn.call(this),this.v=new In(this),this.bc=this,this.hb=null}function jn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function qn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Bn(t,e,n,r){if(e=t.v.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&En(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Kn(t,e,n){if(g(t))n&&(t=T(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=T(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Gn(t){var e=null;return new Pe((function(n,r){e=Kn((function(){n(void 0)}),t),-1==e&&r(Error("Failed to schedule timer."))})).o((function(t){throw c.clearTimeout(e),t}))}function Hn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function zn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(v(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Wn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"===typeof t)z(t,e,void 0);else for(var n=zn(t),r=Hn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}function Qn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Yn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Yn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Yn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}A(Un,sn),Un.prototype[yn]=!0,Un.prototype.addEventListener=function(t,e,n,r){An(this,t,e,n,r)},Un.prototype.removeEventListener=function(t,e,n,r){Cn(this,t,e,n,r)},Un.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new dn(t,n);else if(t instanceof dn)t.target=t.target||n;else{var i=t;t=new dn(r,n),It(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Bn(s,r,!0,t)&&i}if(s=t.b=n,i=Bn(s,r,!0,t)&&i,i=Bn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)s=t.b=e[o],i=Bn(s,r,!1,t)&&i;return i},Un.prototype.Da=function(){if(Un.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)wn(n[r]);delete e.a[t],e.b--}}this.hb=null},t=Qn.prototype,t.X=function(){Xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Yn(this.b,t)?this.b[t]:e},t.set=function(t,e){Yn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Jn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $n(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Zn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Zn?(this.i=void 0!==e?e:t.i,tr(this,t.c),this.l=t.l,this.a=t.a,er(this,t.g),this.f=t.f,nr(this,Ir(t.b)),this.h=t.h):t&&(n=String(t).match(Jn))?(this.i=!!e,tr(this,n[1]||"",!0),this.l=ar(n[2]||""),this.a=ar(n[3]||"",!0),er(this,n[4]),this.f=ar(n[5]||"",!0),nr(this,n[6]||"",!0),this.h=ar(n[7]||"")):(this.i=!!e,this.b=new vr(null,this.i))}function tr(t,e,n){t.c=n?ar(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function er(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function nr(t,e,n){e instanceof vr?(t.b=e,Tr(t.b,t.i)):(n||(e=ur(e,pr)),t.b=new vr(e,t.i))}function rr(t,e,n){t.b.set(e,n)}function ir(t,e){return t.b.get(e)}function or(t){return t instanceof Zn?new Zn(t):new Zn(t,void 0)}function sr(t,e,n,r){var i=new Zn(null,void 0);return t&&tr(i,t),e&&(i.a=e),n&&er(i,n),r&&(i.f=r),i}function ar(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ur(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,cr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cr(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Zn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(ur(e,hr,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(ur(e,hr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(ur(n,"/"==n.charAt(0)?lr:fr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",ur(n,dr)),t.join("")},Zn.prototype.resolve=function(t){var e=new Zn(this),n=!!t.c;n?tr(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)er(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(lt(i,"./")||lt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?nr(e,Ir(t.b)):n=!!t.h,n&&(e.h=t.h),e};var hr=/[#\/\?@]/g,fr=/[#\?:]/g,lr=/[#\?]/g,pr=/[#\?@]/g,dr=/#/g;function vr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function gr(t){t.a||(t.a=new Qn,t.b=0,t.c&&$n(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function yr(t){var e=zn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new vr(null,void 0);t=Hn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?wr(n,i,o):n.add(i,o)}return n}function mr(t,e){gr(t),e=Er(t,e),Yn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Yn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Xn(t)))}function br(t,e){return gr(t),e=Er(t,e),Yn(t.a.b,e)}function wr(t,e,n){mr(t,e),0<n.length&&(t.c=null,t.a.set(Er(t,e),nt(n)),t.b+=n.length)}function Ir(t){var e=new vr;return e.c=t.c,t.a&&(e.a=new Qn(t.a),e.b=t.b),e}function Er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Tr(t,e){e&&!t.f&&(gr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(mr(this,e),wr(this,n,t))}),t)),t.f=e}function _r(t){var e=[];return Ar(new Sr,t,e),e.join("")}function Sr(){}function Ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),Dr(r,n),n.push(":"),Ar(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Dr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}t=vr.prototype,t.add=function(t,e){gr(this),this.c=null,t=Er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){gr(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){gr(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){gr(this);var e=[];if("string"===typeof t)br(this,t)&&(e=et(e,this.a.get(Er(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=et(e,t[n])}return e},t.set=function(t,e){return gr(this),this.c=null,t=Er(this,t),br(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t?(t=this.X(t),0<t.length?String(t[0]):e):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Nr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},kr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Dr(t,e){e.push('"',t.replace(kr,(function(t){var e=Nr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Nr[t]=e),e})),'"')}function Cr(){var t=ti();return ie&&!!ye&&11==ye||/Edge\/\d+/.test(t)}function Rr(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function Or(t,e){e=e||c.window;var n="about:blank";t&&(n=Vt(Bt(t)||Ht)),e.location.href=n}function xr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<xr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Pr(){var t=ti();return t=Jr(t)!=Yr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null,!(t&&30>t)&&(!ie||!ye||9<ye)}function Lr(t){return t=(t||ti()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Mr(t){t=t||c.window;try{t.close()}catch(e){}}function Fr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ti().toLowerCase(),r&&(e.target=r,lt(n,"crios/")&&(e.target="_blank")),Jr(ti())==Xr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Mt?n:Bt("undefined"!=typeof n.href?n.href:String(n))||Ht,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((gt("iPhone")&&!gt("iPod")&&!gt("iPad")||gt("iPad")||gt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=Ae(document,"A"),Et(s,"HTMLAnchorElement"),e=e instanceof Mt?e:Kt(e),s.href=Vt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Jt("",r,n,s),t=Vt(e),s&&(se&&lt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Zt(t)+'">',t=(r=kt())?r.createHTML(t):t,t=new zt(t,null,Qt),r=s.document)&&(r.write(Wt(t)),r.close())):(s=Jt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}function Vr(t){return new Pe((function(e){function n(){Gn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}return n()}))}var Ur=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jr=/^[^@]+@[^@]+$/;function qr(){var t=null;return new Pe((function(e){"complete"==c.document.readyState?e():(t=function(){e()},Dn(window,"load",t))})).o((function(e){throw Cn(window,"load",t),e}))}function Br(){return Kr(void 0)?qr().then((function(){return new Pe((function(t,e){var n=c.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Be(Error("Cordova must run in an Android or iOS file scheme."))}function Kr(t){return t=t||ti(),!("file:"!==oi()&&"ionic:"!==oi()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gr(){var t=c.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Hr(){return"undefined"!==typeof c.WorkerGlobalScope&&"function"===typeof c.importScripts}function zr(){return Ft.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Ft.INTERNAL.hasOwnProperty("node")?"Node":Hr()?"Worker":"Browser"}function Wr(){var t=zr();return"ReactNative"===t||"Node"===t}function Qr(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}var Xr="Firefox",Yr="Chrome";function Jr(t){var e=t.toLowerCase();return lt(e,"opera/")||lt(e,"opr/")||lt(e,"opios/")?"Opera":lt(e,"iemobile")?"IEMobile":lt(e,"msie")||lt(e,"trident/")?"IE":lt(e,"edge/")?"Edge":lt(e,"firefox/")?Xr:lt(e,"silk/")?"Silk":lt(e,"blackberry")?"Blackberry":lt(e,"webos")?"Webos":!lt(e,"safari/")||lt(e,"chrome/")||lt(e,"crios/")||lt(e,"android")?!lt(e,"chrome/")&&!lt(e,"crios/")||lt(e,"edge/")?lt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Yr:"Safari"}var $r={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Zr(t,e){e=e||[];var n,r=[],i={};for(n in $r)i[$r[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=zr(),"Browser"===r?(i=ti(),r=Jr(i)):"Worker"===r&&(i=ti(),r=Jr(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ti(){return c.navigator&&c.navigator.userAgent||""}function ei(t,e){t=t.split("."),e=e||c;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ni(){try{var t=c.localStorage,e=hi();if(t)return t.setItem(e,"1"),t.removeItem(e),!Cr()||!!c.indexedDB}catch(n){return Hr()&&!!c.indexedDB}return!1}function ri(){return(ii()||"chrome-extension:"===oi()||Kr())&&!Wr()&&ni()&&!Hr()}function ii(){return"http:"===oi()||"https:"===oi()}function oi(){return c.location&&c.location.protocol||null}function si(t){return t=t||ti(),!Lr(t)&&Jr(t)!=Xr}function ai(t){return"undefined"===typeof t?null:_r(t)}function ui(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function ci(t){if(null!==t)return JSON.parse(t)}function hi(t){return t||Math.floor(1e9*Math.random()).toString()}function fi(t){return t=t||ti(),"Safari"!=Jr(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function li(){var t=c.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function pi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ti(),e=zr(),this.b=Lr(t)||"ReactNative"===e}function di(){var t=c.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function vi(){var t=c.document,e=null;return di()||!t?qe():new Pe((function(n){e=function(){di()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function gi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function yi(){return!(!ei("fireauth.oauthhelper",c)&&!ei("fireauth.iframe",c))}function mi(){var t=c.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function bi(){var t=c.navigator;return t&&t.serviceWorker?qe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):qe(null)}pi.prototype.get=function(){var t=c.navigator;return!t||"boolean"!==typeof t.onLine||!ii()&&"chrome-extension:"!==oi()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var wi,Ii={};function Ei(t){Ii[t]||(Ii[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Ti={};Object.defineProperty(Ti,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ti,"abcd",{configurable:!0,enumerable:!0,value:2}),wi=2==Ti.abcd}catch(nd){wi=!1}function _i(t,e,n){wi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Si(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&_i(t,n,e[n])}function Ai(t){var e={};return Si(e,t),e}function Ni(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function ki(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Di(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)_i(e,n,Di(t[n]));return e}function Ci(t){var e=t&&(t[Mi]?"phone":null);if(!(e&&t&&t[Li]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");_i(this,"uid",t[Li]),_i(this,"displayName",t[xi]||null);var n=null;t[Pi]&&(n=new Date(t[Pi]).toUTCString()),_i(this,"enrollmentTime",n),_i(this,"factorId",e)}function Ri(t){try{var e=new Fi(t)}catch(n){e=null}return e}Ci.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var xi="displayName",Pi="enrolledAt",Li="mfaEnrollmentId",Mi="phoneInfo";function Fi(t){Ci.call(this,t),_i(this,"phoneNumber",t[Mi])}function Vi(t){var e={},n=t[Bi],r=t[Gi],i=t[Hi];if(t=Ri(t[Ki]),!i||i!=ji&&i!=qi&&!n||i==qi&&!r||i==Ui&&!t)throw Error("Invalid checkActionCode response!");i==qi?(e[Wi]=n||null,e[Xi]=n||null,e[zi]=r):(e[Wi]=r||null,e[Xi]=r||null,e[zi]=n||null),e[Qi]=t||null,_i(this,Ji,i),_i(this,Yi,Di(e))}A(Fi,Ci),Fi.prototype.w=function(){var t=Fi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Ui="REVERT_SECOND_FACTOR_ADDITION",ji="EMAIL_SIGNIN",qi="VERIFY_AND_CHANGE_EMAIL",Bi="email",Ki="mfaInfo",Gi="newEmail",Hi="requestType",zi="email",Wi="fromEmail",Qi="multiFactorInfo",Xi="previousEmail",Yi="data",Ji="operation";function $i(t){t=or(t);var e=ir(t,Zi)||null,n=ir(t,to)||null,r=ir(t,ro)||null;if(r=r&&oo[r]||null,!e||!n||!r)throw new k("argument-error",Zi+", "+to+"and "+ro+" are required in a valid action code URL.");Si(this,{apiKey:e,operation:r,code:n,continueUrl:ir(t,eo)||null,languageCode:ir(t,no)||null,tenantId:ir(t,io)||null})}var Zi="apiKey",to="oobCode",eo="continueUrl",no="languageCode",ro="mode",io="tenantId",oo={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Ui,signIn:ji,verifyAndChangeEmail:qi,verifyEmail:"VERIFY_EMAIL"};function so(t){try{return new $i(t)}catch(e){return null}}function ao(t){var e=t[lo];if("undefined"===typeof e)throw new k("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[uo];if(n&&"object"===typeof n){e=n[go];var r=n[po];if(n=n[vo],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new k("argument-error",po+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new k("argument-error",vo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new k("argument-error",go+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new k("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new k("argument-error",uo+" property must be a non null object when specified.");if(this.f=null,(e=t[fo])&&"object"===typeof e){if(e=e[yo],"string"===typeof e&&e.length)this.f=e;else if("undefined"!==typeof e)throw new k("argument-error",yo+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new k("argument-error",fo+" property must be a non null object when specified.");if(e=t[ho],"undefined"!==typeof e&&"boolean"!==typeof e)throw new k("argument-error",ho+" property must be a boolean when specified.");if(this.c=!!e,t=t[co],"undefined"!==typeof t&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new k("argument-error",co+" property must be a non empty string when specified.");this.i=t||null}var uo="android",co="dynamicLinkDomain",ho="handleCodeInApp",fo="iOS",lo="url",po="installApp",vo="minimumVersion",go="packageName",yo="bundleId";function mo(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}function bo(t){return X(t,(function(t){return t=t.toString(16),1<t.length?t:"0"+t})).join("")}var wo=null;function Io(t){var e=[];return Eo(t,(function(t){e.push(t)})),e}function Eo(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=wo[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}To();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}function To(){if(!wo){wo={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===wo[o]&&(wo[o]=i)}}}function _o(t){var e=Ao(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function So(t){try{return new _o(t)}catch(e){return null}}function Ao(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{var r=Io(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=r[e++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(1023&u))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(Xt){}return null}_o.prototype.T=function(){return this.f},_o.prototype.l=function(){return this.c},_o.prototype.toString=function(){return this.h};var No="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ko=["client_id","response_type","scope","redirect_uri","state"],Do={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:ko},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:ko},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:ko},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:No},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Co(t){for(var e in Do)if(Do[e].fa==t)return Do[e];return null}function Ro(t){var e={};e["facebook.com"]=Mo,e["google.com"]=Vo,e["github.com"]=Fo,e["twitter.com"]=Uo;var n=t&&t[xo];try{if(n)return e[n]?new e[n](t):new Lo(t);if("undefined"!==typeof t[Oo])return new Po(t)}catch(r){}return null}var Oo="idToken",xo="providerId";function Po(t){var e=t[xo];if(!e&&t[Oo]){var n=So(t[Oo]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),_i(this,"providerId",e),_i(this,"isNewUser",n)}function Lo(t){Po.call(this,t),t=ci(t.rawUserInfo||"{}"),_i(this,"profile",Di(t||{}))}function Mo(t){if(Lo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fo(t){if(Lo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");_i(this,"username",this.profile&&this.profile.login||null)}function Vo(t){if(Lo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Uo(t){if(Lo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");_i(this,"username",t.screenName||null)}function jo(t){var e=or(t),n=ir(e,"link"),r=ir(or(n),"link");return e=ir(e,"deep_link_id"),ir(or(e),"link")||e||r||n||t}function qo(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Bo:Ko}A(Lo,Po),A(Mo,Lo),A(Fo,Lo),A(Vo,Lo),A(Uo,Lo);var Bo="enroll",Ko="signin";function Go(){}function Ho(t,e){return t.then((function(t){if(t[Va]){var n=So(t[Va]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==R+"user-not-found"?new k("user-mismatch"):t}))}function zo(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,_i(this,"providerId",t),_i(this,"signInMethod",t)}function Wo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Qo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new zo(t.providerId,t.pendingToken)}catch(e){}return null}function Xo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&_i(this,"idToken",e.idToken),e.accessToken&&_i(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&_i(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");_i(this,"accessToken",e.oauthToken),_i(this,"secret",e.oauthTokenSecret)}_i(this,"providerId",t),_i(this,"signInMethod",n)}function Yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:yr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Jo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Xo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function $o(t,e){this.Qc=e||[],Si(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Co(t)||{}).Ja||null,this.pb=null}function Zo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');$o.call(this,t,[])}function ts(t){$o.call(this,t,ko),this.a=[]}function es(){ts.call(this,"facebook.com")}function ns(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new es).credential({accessToken:e})}function rs(){ts.call(this,"github.com")}function is(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new rs).credential({accessToken:e})}function os(){ts.call(this,"google.com"),this.Ca("profile")}function ss(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new os).credential({idToken:n,accessToken:e})}function as(){$o.call(this,"twitter.com",No)}function us(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Xo("twitter.com",n,"twitter.com")}function cs(t,e,n){this.a=t,this.f=e,_i(this,"providerId","password"),_i(this,"signInMethod",n===fs.EMAIL_LINK_SIGN_IN_METHOD?fs.EMAIL_LINK_SIGN_IN_METHOD:fs.EMAIL_PASSWORD_SIGN_IN_METHOD)}function hs(t){return t&&t.email&&t.password?new cs(t.email,t.password,t.signInMethod):null}function fs(){Si(this,{providerId:"password",isOAuthProvider:!1})}function ls(t,e){if(e=ps(e),!e)throw new k("argument-error","Invalid email link!");return new cs(t,e.code,fs.EMAIL_LINK_SIGN_IN_METHOD)}function ps(t){return t=jo(t),(t=so(t))&&t.operation===ji?t:null}function ds(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new k("internal-error");this.a=t,_i(this,"providerId","phone"),this.fa="phone",_i(this,"signInMethod","phone")}function vs(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new ds(e)}return null}function gs(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function ys(t){try{this.a=t||Ft.auth()}catch(e){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Si(this,{providerId:"phone",isOAuthProvider:!1})}function ms(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new ds({fb:t,eb:e})}function bs(t){if(t.temporaryProof&&t.phoneNumber)return new ds({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return ss(o,n);case"facebook.com":return ns(n);case"github.com":return is(n);case"twitter.com":return us(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new zo(e,s):new Xo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ts(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function ws(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Is(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Es(t){return t=t||{},t.type?new Is(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&D(t.error),t.postBody,t.tenantId):null}function Ts(){this.b=null,this.a=[]}qo.prototype.Ha=function(){return this.a?qe(this.a):qe(this.b)},qo.prototype.w=function(){return this.type==Bo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Go.prototype.ka=function(){},Go.prototype.b=function(){},Go.prototype.c=function(){},Go.prototype.w=function(){},zo.prototype.ka=function(t){return du(t,Wo(this))},zo.prototype.b=function(t,e){var n=Wo(this);return n.idToken=e,vu(t,n)},zo.prototype.c=function(t,e){return Ho(gu(t,Wo(this)),e)},zo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Xo.prototype.ka=function(t){return du(t,Yo(this))},Xo.prototype.b=function(t,e){var n=Yo(this);return n.idToken=e,vu(t,n)},Xo.prototype.c=function(t,e){var n=Yo(this);return Ho(gu(t,n),e)},Xo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},$o.prototype.Ka=function(t){return this.Jb=bt(t),this},A(Zo,$o),A(ts,$o),ts.prototype.Ca=function(t){return $(this.a,t)||this.a.push(t),this},ts.prototype.Rb=function(){return nt(this.a)},ts.prototype.credential=function(t,e){var n;if(n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null},!n.idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new Xo(this.providerId,n,this.providerId)},A(es,ts),_i(es,"PROVIDER_ID","facebook.com"),_i(es,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),A(rs,ts),_i(rs,"PROVIDER_ID","github.com"),_i(rs,"GITHUB_SIGN_IN_METHOD","github.com"),A(os,ts),_i(os,"PROVIDER_ID","google.com"),_i(os,"GOOGLE_SIGN_IN_METHOD","google.com"),A(as,$o),_i(as,"PROVIDER_ID","twitter.com"),_i(as,"TWITTER_SIGN_IN_METHOD","twitter.com"),cs.prototype.ka=function(t){return this.signInMethod==fs.EMAIL_LINK_SIGN_IN_METHOD?Ju(t,_u,{email:this.a,oobCode:this.f}):Ju(t,zu,{email:this.a,password:this.f})},cs.prototype.b=function(t,e){return this.signInMethod==fs.EMAIL_LINK_SIGN_IN_METHOD?Ju(t,Su,{idToken:e,email:this.a,oobCode:this.f}):Ju(t,Vu,{idToken:e,email:this.a,password:this.f})},cs.prototype.c=function(t,e){return Ho(this.ka(t),e)},cs.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Si(fs,{PROVIDER_ID:"password"}),Si(fs,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Si(fs,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ds.prototype.ka=function(t){return t.gb(gs(this))},ds.prototype.b=function(t,e){var n=gs(this);return n.idToken=e,Ju(t,Qu,n)},ds.prototype.c=function(t,e){var n=gs(this);return n.operation="REAUTH",t=Ju(t,Xu,n),Ho(t,e)},ds.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},ys.prototype.gb=function(t,e){var n=this.a.a;return qe(e.verify()).then((function(r){if("string"!==typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i,o=y(t)?t.session:null,s=y(t)?t.phoneNumber:t;return i=o&&o.type==Bo?o.Ha().then((function(t){return au(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r}})})):o&&o.type==Ko?o.Ha().then((function(e){return cu(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):su(n,{phoneNumber:s,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Si(ys,{PROVIDER_ID:"phone"}),Si(ys,{PHONE_SIGN_IN_METHOD:"phone"}),Is.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Is.prototype.T=function(){return this.h},Is.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var _s,Ss=null;function As(t){var e=Ss;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},t=ei("universalLinks.subscribe",c),"function"===typeof t&&t(null,e.b))}function Ns(t){var e="unauthorized-domain",n=void 0,r=or(t);t=r.a,r=r.c,"chrome-extension"==r?n=$t("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=$t("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function ks(t,e,n){k.call(this,t,n),t=e||{},t.Kb&&_i(this,"email",t.Kb),t.ea&&_i(this,"phoneNumber",t.ea),t.credential&&_i(this,"credential",t.credential),t.$b&&_i(this,"tenantId",t.$b)}function Ds(t){if(t.code){var e=t.code||"";0==e.indexOf(R)&&(e=e.substring(R.length));var n={credential:bs(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new ks(e,n,t.message)}return null}function Cs(){}function Rs(t){return t.c||(t.c=t.b())}function Os(){}function xs(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Ps(){}function Ls(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=T(this.qc,this),this.a.onerror=T(this.Tb,this),this.a.onprogress=T(this.rc,this),this.a.ontimeout=T(this.vc,this)}function Ms(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Fs(t,e,n){this.reset(t,e,n,void 0,void 0)}A(Ns,k),A(ks,k),ks.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&It(t,e),t},ks.prototype.toJSON=function(){return this.w()},Cs.prototype.c=null,A(Os,Cs),Os.prototype.a=function(){var t=xs(this);return t?new ActiveXObject(t):new XMLHttpRequest},Os.prototype.b=function(){var t={};return xs(this)&&(t[0]=!0,t[1]=!0),t},_s=new Os,A(Ps,Cs),Ps.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ls;throw Error("Unsupported browser")},Ps.prototype.b=function(){return{}},t=Ls.prototype,t.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ms(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Ms(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Ms(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Fs.prototype.a=null;function Vs(t){this.f=t,this.b=this.c=this.a=null}function Us(t,e){this.name=t,this.value=e}Fs.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||S(),delete this.a},Us.prototype.toString=function(){return this.name};var js=new Us("SEVERE",1e3),qs=new Us("WARNING",900),Bs=new Us("CONFIG",700),Ks=new Us("FINE",500);function Gs(t){return t.c?t.c:t.a?Gs(t.a):(V("Root logger has no level set."),null)}Vs.prototype.log=function(t,e,n){if(t.value>=Gs(this).value)for(g(e)&&(e=e()),t=new Fs(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Hs={},zs=null;function Ws(t){var e;if(zs||(zs=new Vs(""),Hs[""]=zs,zs.c=Bs),!(e=Hs[t])){e=new Vs(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=Ws(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Hs[t]=e}return e}function Qs(t,e){t&&t.log(Ks,e,void 0)}function Xs(t){this.f=t}function Ys(t){Un.call(this),this.u=t,this.h=void 0,this.readyState=Js,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Ws("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}A(Xs,Cs),Xs.prototype.a=function(){return new Ys(this.f)},Xs.prototype.b=function(t){return function(){return t}}({}),A(Ys,Un);var Js=0;function $s(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Zs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ta(t)}function ta(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ea(t){Un.call(this),this.headers=new Qn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=na,this.u=this.S=!1}t=Ys.prototype,t.open=function(t,e){if(this.readyState!=Js)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ta(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Zs(this)),this.readyState=Js},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ta(this)),this.a&&(this.readyState=3,ta(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof c.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,$s(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Zs(this):ta(this),3==this.readyState&&$s(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Zs(this))},t.sc=function(t){this.a&&(this.response=t,Zs(this))},t.Va=function(t){var e=this.i;e&&e.log(qs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Zs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(qs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(qs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),A(ea,Un);var na="";ea.prototype.b=Ws("goog.net.XhrIo");var ra=/^https?$/i,ia=["POST","PUT"];function oa(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():_s.a(),t.C=t.D?Rs(t.D):Rs(_s),t.a.onreadystatechange=T(t.Wb,t);try{Qs(t.b,ga(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return Qs(t.b,ga(t,"Error opening Xhr: "+s.message)),void ua(t,s)}e=r||"";var o=new Qn(t.headers);i&&Wn(i,(function(t,e){o.set(e,t)})),i=J(o.Y()),r=c.FormData&&e instanceof c.FormData,!$(ia,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{la(t),0<t.g&&(t.u=sa(t.a),Qs(t.b,ga(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=T(t.Ma,t)):t.s=Kn(t.Ma,t.g,t)),Qs(t.b,ga(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){Qs(t.b,ga(t,"Send error: "+s.message)),ua(t,s)}}function sa(t){return ie&&ve(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function aa(t){return"content-type"==t.toLowerCase()}function ua(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ca(t),fa(t)}function ca(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ha(t){if(t.c&&"undefined"!=typeof u)if(t.C[1]&&4==pa(t)&&2==da(t))Qs(t.b,ga(t,"Local request error detected and ignored"));else if(t.i&&4==pa(t))Kn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==pa(t)){Qs(t.b,ga(t,"Request complete")),t.c=!1;try{var e,n=da(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Jn)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!ra.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<pa(t)?t.a.statusText:""}catch(h){Qs(t.b,"Can not get status: "+h.message),a=""}t.h=a+" ["+da(t)+"]",ca(t)}}finally{fa(t)}}}function fa(t,e){if(t.a){la(t);var n=t.a,r=t.C[0]?p:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(js,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function la(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(c.clearTimeout(t.s),t.s=null)}function pa(t){return t.a?t.a.readyState:0}function da(t){try{return 2<pa(t)?t.a.status:-1}catch(e){return-1}}function va(t){try{return t.a?t.a.responseText:""}catch(e){return Qs(t.b,"Can not get responseText: "+e.message),""}}function ga(t,e){return e+" ["+t.P+" "+t.l+" "+da(t)+"]"}function ya(t){var e=Ca;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ma(t,e,n){t.a=!0,t.c=n,t.f=!e,Ta(t)}function ba(t){if(t.a){if(!t.v)throw new _a(t);t.v=!1}}function wa(t,e){Ia(t,null,e,void 0)}function Ia(t,e,n,r){t.g.push([e,n,r]),t.a&&Ta(t)}function Ea(t){return Y(t.g,(function(t){return g(t[1])}))}function Ta(t){if(t.h&&t.a&&Ea(t)){var e=t.h,n=Na[e];n&&(c.clearTimeout(n.a),delete Na[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(L(e)||"function"===typeof c.Promise&&e instanceof c.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,Ea(t)||(n=!0)}}t.c=e,r&&(a=T(t.m,t,!0),r=T(t.m,t,!1),e instanceof ya?(Ia(e,a,r),e.C=!0):e.then(a,r)),n&&(e=new Aa(e),Na[e.a]=e,t.h=e.a)}function _a(){M.call(this)}function Sa(){M.call(this)}function Aa(t){this.a=c.setTimeout(T(this.c,this),0),this.b=t}t=ea.prototype,t.Ma=function(){"undefined"!=typeof u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Qs(this.b,ga(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Qs(this.b,ga(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),fa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),fa(this,!0)),ea.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ha(this):this.Jc())},t.Jc=function(){ha(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case na:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(js,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Qs(this.b,"Can not get response: "+e.message),null}},ya.prototype.cancel=function(t){if(this.a)this.c instanceof ya&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Sa(this),ba(this),ma(this,!1,t))}},ya.prototype.m=function(t,e){this.i=!1,ma(this,t,e)},ya.prototype.then=function(t,e,n){var r,i,o=new Pe((function(t,e){r=t,i=e}));return Ia(this,r,(function(t){t instanceof Sa?o.cancel():i(t)})),o.then(t,e,n)},ya.prototype.$goog_Thenable=!0,A(_a,M),_a.prototype.message="Deferred has already fired",_a.prototype.name="AlreadyCalledError",A(Sa,M),Sa.prototype.message="Deferred was canceled",Sa.prototype.name="CanceledError",Aa.prototype.c=function(){throw delete Na[this.a],this.b};var Na={};function ka(t){var e={},n=e.document||document,r=Ct(t).toString(),i=Ae(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new ya(o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout((function(){Ra(i,!0);var t=new Pa(xa,"Timeout reached for loading script "+r);ba(s),ma(s,!1,t)}),u),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ra(i,e.xd||!1,a),ba(s),ma(s,!0,null))},i.onerror=function(){Ra(i,!0,a);var t=new Pa(Oa,"Error while loading script "+r);ba(s),ma(s,!1,t)},o=e.attributes||{},It(o,{type:"text/javascript",charset:"UTF-8"}),we(i,o),Yt(i,t),Da(n).appendChild(i),s}function Da(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function Ca(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ra(t,!0,this.Ma)}}function Ra(t,e,n){null!=n&&c.clearTimeout(n),t.onload=p,t.onerror=p,t.onreadystatechange=p,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Oa=0,xa=1;function Pa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),M.call(this,n),this.code=t}function La(t){this.f=t}function Ma(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ua,this.g=bt(t.secureTokenHeaders||ja),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||qa,this.a=bt(t.firebaseHeaders||Ba),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==zr(),n=c.XMLHttpRequest||n&&Ft.INTERNAL.node&&Ft.INTERNAL.node.XMLHttpRequest,!n&&!Hr())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Hr()?this.f=new Xs(self):Wr()?this.f=new La(n):this.f=new Ps,this.b=null}A(Pa,M),A(La,Cs),La.prototype.a=function(){return new this.f},La.prototype.b=function(){return{}};var Fa,Va="idToken",Ua=new pi(3e4,6e4),ja={"Content-Type":"application/x-www-form-urlencoded"},qa=new pi(3e4,6e4),Ba={"Content-Type":"application/json"};function Ka(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ga(t,e){e&&(t.l=Ha("https://securetoken.googleapis.com/v1/token",e),t.h=Ha("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ha("https://identitytoolkit.googleapis.com/v2/",e))}function Ha(t,e){return t=or(t),e=or(e.url),t.f=t.a+t.f,tr(t,e.c),t.a=e.a,er(t,e.g),t.toString()}function za(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Wa(t,e,n,r,i,o,s){Pr()||Hr()?t=T(t.u,t):(Fa||(Fa=new Pe((function(t,e){Ya(t,e)}))),t=T(t.s,t)),t(e,n,r,i,o,s)}Ma.prototype.T=function(){return this.b},Ma.prototype.u=function(t,e,n,r,i,o){if(Hr()&&("undefined"===typeof c.fetch||"undefined"===typeof c.Headers||"undefined"===typeof c.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ea(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}jn(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(va(this))||null}catch(Xt){t=null}e&&e(t)})),qn(s,"ready",(function(){a&&clearTimeout(a),cn(this)})),qn(s,"timeout",(function(){a&&clearTimeout(a),cn(this),e&&e(null)})),oa(s,t,n,r,i)};var Qa=new Tt(Nt,"https://apis.google.com/js/client.js?onload=%{onload}"),Xa="__fcb"+Math.floor(1e6*Math.random()).toString();function Ya(t,e){if(((window.gapi||{}).client||{}).request)t();else{c[Xa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=Rt(Qa,{onload:Xa});wa(ka(n),(function(){e(Error("CORS_UNSUPPORTED"))}))}}function Ja(t,e){return new Pe((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Wa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Zu(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",yr(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}function $a(t,e,n,r,i,o,s){var a=or(e+n);rr(a,"key",t.c),s&&rr(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&rr(a,c,i[c]);return new Pe((function(e,n){Wa(t,a.toString(),(function(t){t?t.error?n(Zu(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:_r(ui(i)),t.a,t.v.get())}))}function Za(t){if(t=t.email,"string"!==typeof t||!jr.test(t))throw new k("invalid-email")}function tu(t){"email"in t&&Za(t)}function eu(t,e){return Ju(t,Iu,{identifier:e,continueUri:ii()?Rr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}function nu(t){return Ju(t,xu,{}).then((function(t){return t.authorizedDomains||[]}))}function ru(t){if(!t[Va]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,bt(t));throw new k("internal-error")}}function iu(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}Ma.prototype.s=function(t,e,n,r,i){var o=this;Fa.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ma.prototype.Ab=function(){return Ju(this,Uu,{})},Ma.prototype.Cb=function(t,e){return Ju(this,Fu,{idToken:t,email:e})},Ma.prototype.Db=function(t,e){return Ju(this,Vu,{idToken:t,password:e})};var ou={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function su(t,e){return Ju(t,Mu,e)}function au(t,e){return Ju(t,ju,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}function uu(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function cu(t,e){return Ju(t,qu,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}function hu(t,e,n){return Ju(t,Tu,{idToken:e,deleteProvider:n})}function fu(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function lu(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new vr(t.postBody),br(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function pu(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ds(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ds(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ds(t)):t.errorMessage&&(e=$u(t.errorMessage)),e)throw e;ru(t)}function du(t,e){return e.returnIdpCredential=!0,Ju(t,Bu,e)}function vu(t,e){return e.returnIdpCredential=!0,Ju(t,Gu,e)}function gu(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ju(t,Ku,e)}function yu(t){if(!t.oobCode)throw new k("invalid-action-code")}t=Ma.prototype,t.Eb=function(t,e){var n={idToken:t},r=[];return yt(ou,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ju(this,Fu,n)},t.wb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},It(t,e),Ju(this,Ou,t)},t.xb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},It(t,e),Ju(this,Du,t)},t.vb=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},It(t,e),Ju(this,Cu,t)},t.Fb=function(t,e,n){return t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},It(t,n),Ju(this,Ru,t)},t.gb=function(t){return Ju(this,Wu,t)},t.ob=function(t,e){return Ju(this,Lu,{oobCode:t,newPassword:e})},t.Sa=function(t){return Ju(this,bu,{oobCode:t})},t.kb=function(t){return Ju(this,mu,{oobCode:t})};var mu={endpoint:"setAccountInfo",A:yu,Z:"email",B:!0},bu={endpoint:"resetPassword",A:yu,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},wu={endpoint:"signupNewUser",A:function(t){if(Za(t),!t.password)throw new k("weak-password")},G:ru,V:!0,B:!0},Iu={endpoint:"createAuthUri",B:!0},Eu={endpoint:"deleteAccount",O:["idToken"]},Tu={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},_u={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Za,G:ru,V:!0,B:!0},Su={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Za,G:ru,V:!0},Au={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:uu,G:ru,B:!0,Na:!0},Nu={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:uu,G:ru,B:!0,Na:!0},ku={endpoint:"getAccountInfo"},Du={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");Za(t)},Z:"email",B:!0},Cu={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Ru={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Ou={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");Za(t)},Z:"email",B:!0},xu={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Pu={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Lu={endpoint:"resetPassword",A:yu,Z:"email",B:!0},Mu={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Fu={endpoint:"setAccountInfo",O:["idToken"],A:tu,V:!0},Vu={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(tu(t),!t.password)throw new k("weak-password")},G:ru,V:!0},Uu={endpoint:"signupNewUser",G:ru,V:!0,B:!0},ju={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},qu={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Bu={endpoint:"verifyAssertion",A:fu,Za:lu,G:pu,V:!0,B:!0},Ku={endpoint:"verifyAssertion",A:fu,Za:lu,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw $u(t.errorMessage);ru(t)},V:!0,B:!0},Gu={endpoint:"verifyAssertion",A:function(t){if(fu(t),!t.idToken)throw new k("internal-error")},Za:lu,G:pu,V:!0},Hu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:ru,V:!0,B:!0},zu={endpoint:"verifyPassword",A:function(t){if(Za(t),!t.password)throw new k("wrong-password")},G:ru,V:!0,B:!0},Wu={endpoint:"verifyPhoneNumber",A:iu,G:ru,B:!0},Qu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");iu(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ds(t);ru(t)}},Xu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:iu,G:ru,B:!0},Yu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Va]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function Ju(t,e,n){if(!ki(n,e.O))return Be(new k("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return qe(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),$a(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function $u(t){return Zu({error:{errors:[{message:t}],code:400,message:t}})}function Zu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},It(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=ai(t)),new k("internal-error",e)}function tc(t){this.b=t,this.a=null,this.sb=ec(this)}function ec(t){return uc().then((function(){return new Pe((function(e,n){ei("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),sc.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function nc(t,e){return t.sb.then((function(){return new Pe((function(n){t.a.send(e.type,e,n,ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function rc(t,e){t.sb.then((function(){t.a.register("authEvent",e,ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var ic=new Tt(Nt,"https://apis.google.com/js/api.js?onload=%{onload}"),oc=new pi(3e4,6e4),sc=new pi(5e3,15e3),ac=null;function uc(){return ac||(ac=new Pe((function(t,e){function n(){li(),ei("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){li(),e(Error("Network Error"))},timeout:oc.get()})}if(ei("gapi.iframes.Iframe"))t();else if(ei("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[r]=function(){ei("gapi.load")?n():e(Error("Network Error"))},r=Rt(ic,{onload:r}),qe(ka(r)).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw ac=null,t})))}function cc(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?(t=or(this.g.url),t=sr(t.c,t.a,t.g,"/emulator/auth/iframe")):t=sr("https",this.l,null,"/__/auth/iframe"),this.a=t,rr(this.a,"apiKey",this.h),rr(this.a,"appName",this.i),this.b=null,this.c=[]}function hc(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fc(t){try{return Ft.app(t).auth().Ga()}catch(e){return[]}}function lc(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function pc(t){var e=Rr();return nu(t).then((function(t){t:{var n=or(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=or(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:Ur.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ns(Rr())}))}function dc(t){return t.m||(t.m=qr().then((function(){if(!t.u){var e=t.c,n=t.i,r=fc(t.b),i=new cc(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=nt(r||[]),t.u=i.toString()}t.v=new tc(t.u),yc(t)}))),t.m}function vc(t){return t.l||(t.C=t.c?Zr(t.c,fc(t.b)):null,t.l=new Ma(t.g,P(t.i),t.C),t.f&&Ga(t.l,t.f)),t.l}function gc(t,e,n,r,i,o,s,a,u,c,h,f){return t=new hc(t,e,n,r,i,f),t.l=o,t.g=s,t.i=a,t.b=bt(u||null),t.f=c,t.zb(h).toString()}function yc(t){if(!t.v)throw Error("IfcHandler must be initialized!");rc(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Es(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return n={},n.status=r?"ACK":"ERROR",qe(n)}return n.status="ERROR",qe(n)}))}function mc(t){var e={type:"webStorageSupport"};return dc(t).then((function(){return nc(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))}function bc(t){if(this.a=t||Ft.INTERNAL.reactNative&&Ft.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wc(t){this.b=t,this.a={},this.f=T(this.c,this)}cc.prototype.toString=function(){return this.f?rr(this.a,"v",this.f):mr(this.a.b,"v"),this.b?rr(this.a,"eid",this.b):mr(this.a.b,"eid"),this.c.length?rr(this.a,"fw",this.c.join(",")):mr(this.a.b,"fw"),this.a.toString()},hc.prototype.zb=function(t){return this.h=t,this},hc.prototype.toString=function(){if(this.v){var t=or(this.v.url);t=sr(t.c,t.a,t.g,"/emulator/auth/handler")}else t=sr("https",this.u,null,"/__/auth/handler");if(rr(t,"apiKey",this.s),rr(t,"appName",this.c),rr(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Ft.app(this.c).auth().la()}catch(a){n=null}for(var r in e.pb=n,rr(t,"providerId",this.a.providerId),n=this.a,e=ui(n.Jb),e)e[r]=e[r].toString();r=n.Qc,e=bt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),mt(e)||rr(t,"customParameters",ai(e))}if("function"===typeof this.a.Rb&&(n=this.a.Rb(),n.length&&rr(t,"scopes",n.join(","))),this.l?rr(t,"redirectUrl",this.l):mr(t.b,"redirectUrl"),this.g?rr(t,"eventId",this.g):mr(t.b,"eventId"),this.i?rr(t,"v",this.i):mr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!ir(t,s)&&rr(t,s,this.b[s]);return this.h?rr(t,"tid",this.h):mr(t.b,"tid"),this.f?rr(t,"eid",this.f):mr(t.b,"eid"),s=fc(this.c),s.length&&rr(t,"fw",s.join(",")),t.toString()},t=lc.prototype,t.Pb=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){mc(o).then((function(n){n||(t&&Mr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return Vr(t)})).then((function(){if(!s)return Gn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=ti();return!si(t)&&!fi(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Be(new k("popup-blocked"));if(s&&!si())return this.ma().o((function(e){Mr(t),i(e)})),r(),qe();this.a||(this.a=pc(vc(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw Mr(t),i(e),e}));return r(),e})).then((function(){if(ws(n),!s){var r=gc(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f);Or(r,t)}})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=pc(vc(this)));var i=this;return this.a.then((function(){ws(e);var o=gc(i.s,i.g,i.b,t,e,Rr(),n,i.c,void 0,i.i,r,i.f);Or(o)})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return dc(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new k("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){tt(this.h,(function(e){return e==t}))},t=bc.prototype,t.get=function(t){return qe(this.a.getItem(t)).then((function(t){return t&&ci(t)}))},t.set=function(t,e){return qe(this.a.setItem(t,ai(e)))},t.U=function(t){return qe(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Ic,Ec=[];function Tc(){var t=Hr()?self:null;if(z(Ec,(function(n){n.b==t&&(e=n)})),!e){var e=new wc(t);Ec.push(e)}return e}function _c(t,e,n){mt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Sc(t){this.a=t}function Ac(t){this.c=t,this.b=!1,this.a=[]}function Nc(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Be(Error("connection_unavailable"));var h=r?800:50,f="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Pe((function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))},c={messageChannel:f,onMessage:o},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))})).then((function(e){return kc(t,c),e})).o((function(e){throw kc(t,c),e}))}function kc(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),tt(t.a,(function(t){return t==e}))}}function Dc(){if(!Pc())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=c.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Hr()&&self?(this.v=Tc(),_c(this.v,"keyChanged",(function(e,n){return Uc(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:$(e,n.key)}}))})),_c(this.v,"ping",(function(){return qe(["keyChanged"])}))):bi().then((function(e){(t.h=e)&&(t.g=new Ac(new Sc(e)),Nc(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&$(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Cc(t){return new Pe((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}function Rc(t){return new Pe((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):Cc(t).then((function(){return Rc(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Oc(t){return t.i||(t.i=Rc(t)),t.i}function xc(t,e){function n(i,o){Oc(t).then(e).then(i).o((function(e){if(!(3<++r))return Oc(t).then((function(e){return e.close(),t.i=void 0,n(i,o)})).o((function(t){o(t)}));o(e)}))}var r=0;return new Pe(n)}function Pc(){try{return!!c.indexedDB}catch(nd){return!1}}function Lc(t){return t.objectStore("firebaseLocalStorage")}function Mc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Fc(t){return new Pe((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Vc(t,e){return t.g&&t.h&&mi()===t.h?Nc(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):qe()}function Uc(t){return Oc(t).then((function(t){var e=Lc(Mc(t,!1));return e.getAll?Fc(e.getAll()):new Pe((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e["continue"]()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=xr(t.c,n),t.c=n}return r}))}function jc(t){function e(){t.f=setTimeout((function(){t.l=Uc(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}qc(t),e()}function qc(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Bc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=qe().then((function(){if(Pc()){var t=hi(),r="__sak"+t;return Ic||(Ic=new Dc),n=Ic,n.set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function Kc(){this.a={},this.type="inMemory"}function Gc(){if(!zc()){if("Node"==zr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Hc()||Ft.INTERNAL.node.localStorage,this.type="localStorage"}function Hc(){try{var t=c.localStorage,e=hi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zc(){var t="Node"==zr();if(t=Hc()||t&&Ft.INTERNAL.node&&Ft.INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function Wc(){this.type="nullStorage"}function Qc(){if(!Yc()){if("Node"==zr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Xc()||Ft.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Xc(){try{var t=c.sessionStorage,e=hi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Yc(){var t="Node"==zr();if(t=Xc()||t&&Ft.INTERNAL.node&&Ft.INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function Jc(){var t={};t.Browser=th,t.Node=eh,t.ReactNative=nh,t.Worker=rh,this.a=t[zr()]}wc.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(qe().then((function(){return e(t.origin,t.data.data)})))})),He(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Sc.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ac.prototype.close=function(){for(;0<this.a.length;)kc(this,this.a[0]);this.b=!0},t=Dc.prototype,t.set=function(t,e){var n=this,r=!1;return xc(this,(function(e){return e=Lc(Mc(e,!0)),Fc(e.get(t))})).then((function(i){return xc(n,(function(o){if(o=Lc(Mc(o,!0)),i)return i.value=e,Fc(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Fc(o.add(s))}))})).then((function(){return n.c[t]=e,Vc(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return xc(this,(function(e){return Fc(Lc(Mc(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return xc(this,(function(r){return n=!0,e.b++,Fc(Lc(Mc(r,!0))["delete"](t))})).then((function(){return delete e.c[t],Vc(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&jc(this),this.a.push(t)},t.ia=function(t){tt(this.a,(function(e){return e==t})),0==this.a.length&&qc(this)},t=Bc.prototype,t.get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){tt(this.a,(function(e){return e==t}))},t=Kc.prototype,t.get=function(t){return qe(this.a[t])},t.set=function(t,e){return this.a[t]=e,qe()},t.U=function(t){return delete this.a[t],qe()},t.ca=function(){},t.ia=function(){},t=Gc.prototype,t.get=function(t){var e=this;return qe().then((function(){var n=e.a.getItem(t);return ci(n)}))},t.set=function(t,e){var n=this;return qe().then((function(){var r=ai(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return qe().then((function(){e.a.removeItem(t)}))},t.ca=function(t){c.window&&An(c.window,"storage",t)},t.ia=function(t){c.window&&Cn(c.window,"storage",t)},t=Wc.prototype,t.get=function(){return qe(null)},t.set=function(){return qe()},t.U=function(){return qe()},t.ca=function(){},t.ia=function(){},t=Qc.prototype,t.get=function(t){var e=this;return qe().then((function(){var n=e.a.getItem(t);return ci(n)}))},t.set=function(t,e){var n=this;return qe().then((function(){var r=ai(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return qe().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var $c,Zc,th={F:Gc,cb:Qc},eh={F:Gc,cb:Qc},nh={F:bc,cb:Wc},rh={F:Gc,cb:Wc},ih={rd:"local",NONE:"none",td:"session"};function oh(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in ih)if(ih[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(zr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Pc()&&"none"!==t)throw n;break;default:if(!ni()&&"none"!==t)throw n}}function sh(){var t=!(fi(ti())||!Gr()),e=si(),n=ni();this.m=t,this.h=e,this.l=n,this.a={},$c||($c=new Jc),t=$c;try{this.g=!Cr()&&yi()||!c.indexedDB?new t.a.F:new Bc(Hr()?new Kc:new t.a.F)}catch(r){this.g=new Kc,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Kc}this.v=new Kc,this.f=T(this.Zb,this),this.b={}}function ah(){return Zc||(Zc=new sh),Zc}function uh(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function ch(t,e){return"firebase:"+t.name+(e?":"+e:"")}function hh(t,e,n){var r=ch(e,n),i=uh(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=ci(c.localStorage.getItem(r))}catch(a){}if(s&&!o)return c.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&c.localStorage.removeItem(r)}))}function fh(t,e,n){return n=ch(e,n),"local"==e.F&&(t.b[n]=null),uh(t,e.F).U(n)}function lh(t){ph(t),t.c=setInterval((function(){for(var e in t.a){var n=c.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new vn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}function ph(t){t.c&&(clearInterval(t.c),t.c=null)}function dh(t){this.a=t,this.b=ah()}t=sh.prototype,t.get=function(t,e){return uh(this,t.F).get(ch(t,e))},t.set=function(t,e,n){var r=ch(t,n),i=this,o=uh(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=ch(t,e),this.l&&(this.b[t]=c.localStorage.getItem(t)),mt(this.a)&&(uh(this,"local").ca(this.f),this.h||(Cr()||!yi())&&c.indexedDB||!this.l||lh(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ch(t,e),this.a[t]&&(tt(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),mt(this.a)&&(uh(this,"local").ia(this.f),ph(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=c.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?uh(this,"local").ia(this.f):ph(this),this.m)if(n=c.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?c.localStorage.setItem(e,r):c.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===c.localStorage.getItem(e)||(o.b[e]=c.localStorage.getItem(e),o.nb(e))},ie&&ye&&10==ye&&c.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,T(this.nb,this))},t.nb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var vh,gh={name:"authEvent",F:"local"};function yh(t){return t.b.get(gh,t.a).then((function(t){return Es(t)}))}function mh(){this.a=ah()}function bh(){this.b=-1}function wh(t,e){this.b=Ih,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=c.Int32Array?new Int32Array(64):Array(64),void 0===vh&&(vh=c.Int32Array?new Int32Array(kh):kh),this.reset()}A(wh,bh);for(var Ih=64,Eh=Ih-1,Th=[],_h=0;_h<Eh;_h++)Th[_h]=0;var Sh=et(128,Th);function Ah(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=c&h^~c&f,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,s=s+(0|vh[e])|0,s=o+(s+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function Nh(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Ah(t),i=0);else{if(!v(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Ah(t),i=0)}}t.c=i,t.g+=n}wh.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):nt(this.h)};var kh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Dh(){wh.call(this,8,Ch)}A(Dh,wh);var Ch=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Rh(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new mh,this.g=new dh(this.h),this.f=null,this.b=[],this.a=this.c=null}function Oh(t){return new k("invalid-cordova-configuration",t)}function xh(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function Ph(t){var e=new Dh;Nh(e,t),t=[];var n=8*e.g;56>e.c?Nh(e,Sh,56-e.c):Nh(e,Sh,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Ah(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return bo(t)}function Lh(t,e,n,r,i){var o=xh(),s=new Is(e,r,null,o,new k("no-auth-event"),null,i),a=ei("BuildInfo.packageName",c);if("string"!==typeof a)throw new k("invalid-cordova-configuration");var u=ei("BuildInfo.displayName",c),h={};if(ti().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!ti().toLowerCase().match(/android/))return Be(new k("operation-not-supported-in-this-environment"));h.apn=a}u&&(h.appDisplayName=u),o=Ph(o),h.sessionId=o;var f=gc(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(gh,s.w(),e)})).then((function(){var e=ei("cordova.plugins.browsertab.isAvailable",c);if("function"!==typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if(n=ei("cordova.plugins.browsertab.openUrl",c),"function"!==typeof n)throw new k("invalid-cordova-configuration");n(f)}else{if(n=ei("cordova.InAppBrowser.open",c),"function"!==typeof n)throw new k("invalid-cordova-configuration");e=ti(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Mh(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Fh(t){return t.f||(t.f=t.ma().then((function(){return new Pe((function(e){function n(r){return e(r),t.Ta(n),!1}t.Ea(n),Uh(t)}))}))),t.f}function Vh(t){var e=null;return yh(t.g).then((function(n){return e=n,n=t.g,fh(n.b,gh,n.a)})).then((function(){return e}))}function Uh(t){function e(e){r=!0,i&&i.cancel(),Vh(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;i=jo(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=or(i),o=ci(ir(o,"firebaseError")||null),o=(o="object"===typeof o?D(o):null)?new Is(r.c,r.b,null,null,o,null,r.T()):new Is(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Mh(t,i)}))}var n=new Is("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Gn(500).then((function(){return Vh(t).then((function(){r||Mh(t,n)}))})),o=c.handleOpenURL;c.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ei("BuildInfo.packageName",c).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Ss||(Ss=new Ts),As(e)}function jh(t){this.a=t,this.b=ah()}t=Rh.prototype,t.ma=function(){return this.Ia?this.Ia:this.Ia=Br().then((function(){if("function"!==typeof ei("universalLinks.subscribe",c))throw Oh("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ei("BuildInfo.packageName",c))throw Oh("cordova-plugin-buildinfo is not installed");if("function"!==typeof ei("cordova.plugins.browsertab.openUrl",c))throw Oh("cordova-plugin-browsertab is not installed");if("function"!==typeof ei("cordova.InAppBrowser.open",c))throw Oh("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},t.Pb=function(t,e){return e(new k("operation-not-supported-in-this-environment")),qe()},t.Nb=function(){return Be(new k("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Be(new k("redirect-operation-pending"));var i=this,o=c.document,s=null,a=null,u=null,h=null;return this.c=qe().then((function(){return ws(e),Fh(i)})).then((function(){return Lh(i,t,e,n,r)})).then((function(){return new Pe((function(t,e){a=function(){var e=ei("cordova.plugins.browsertab.close",c);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s||(s=Gn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},h=function(){di()&&u()},o.addEventListener("resume",u,!1),ti().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Vh(i).then((function(){throw t}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Ta(a),i.c=null}))},t.Ea=function(t){this.b.push(t),Fh(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Is("unknown",null,null,null,new k("no-auth-event")),t(e))}))},t.Ta=function(t){tt(this.b,(function(e){return e==t}))};var qh={name:"pendingRedirect",F:"session"};function Bh(t){return t.b.set(qh,"pending",t.a)}function Kh(t){return fh(t.b,qh,t.a)}function Gh(t){return t.b.get(qh,t.a).then((function(t){return"pending"==t}))}function Hh(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=T(this.s,this),this.b=new af,this.C=new vf,this.g=new jh(of(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=zh(this.D,this.v,this.m,C,this.J)}function zh(t,e,n,r,i){var o=Ft.SDK_VERSION||null;return Kr()?new Rh(t,e,n,o,r,i):new lc(t,e,n,o,r,i)}function Wh(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Qh(t){t.a.Yb()&&Wh(t).o((function(e){var n=new Is("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));tf(e)&&t.s(n)})),t.a.Ub()||uf(t.b)}function Xh(t,e){$(t.h,e)||t.h.push(e),t.f||Gh(t.g).then((function(e){e?Kh(t.g).then((function(){Wh(t).o((function(e){var n=new Is("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));tf(e)&&t.s(n)}))})):Qh(t)})).o((function(){Qh(t)}))}function Yh(t,e){tt(t.h,(function(t){return t==e}))}Hh.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=zh(this.D,this.v,this.m,null,this.J),this.i={}},Hh.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return uf(this.b),e};var Jh=new pi(2e3,1e4),$h=new pi(3e4,6e4);function Zh(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function tf(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function ef(t,e,n,r,i){var o;return Bh(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(tf(e))throw new k("operation-not-supported-in-this-environment");return o=e,Kh(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Pe((function(){})):Kh(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function nf(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Jh.get())}Hh.prototype.ra=function(){return this.b.ra()};var rf={};function of(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function sf(t,e,n,r){var i=of(e,n,r);return rf[i]||(rf[i]=new Hh(t,e,n,r)),rf[i]}function af(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function uf(t){t.g||(t.g=!0,pf(t,!1,null,null))}function cf(t){t.g&&!t.i&&pf(t,!1,null,null)}function hf(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){pf(t,a,e,null)})).o((function(e){pf(t,a,null,e)}))}function ff(t,e){if(t.b=function(){return Be(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function lf(t,e){if(t.b=function(){return qe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function pf(t,e,n,r){e?r?ff(t,r):lf(t,n):lf(t,{user:null}),t.f=[],t.c=[]}function df(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=Gn($h.get()).then((function(){t.b||(t.g=!0,pf(t,!0,null,e))}))}function vf(){}function gf(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}function yf(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function mf(t,e){this.a=e,_i(this,"verificationId",t)}function bf(t,e,n,r){return new ys(t).gb(e,n).then((function(t){return new mf(t,r)}))}function wf(t){var e=Ao(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Si(this,{token:t,expirationTime:gi(1e3*e.exp),authTime:gi(1e3*e.auth_time),issuedAtTime:gi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function If(t,e,n){var r=e&&e[Tf];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=bt(e),this.g=n,this.c=new qo(null,r),this.b=[];var i=this;z(e[Ef]||[],(function(t){(t=Ri(t))&&i.b.push(t)})),_i(this,"auth",this.a),_i(this,"session",this.c),_i(this,"hints",this.b)}af.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},af.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(pf(this,!0,null,t.a),qe()):e.Fa(n,r)?hf(this,t,e):Be(new k("invalid-auth-event")):(pf(this,!1,null,null),qe())}else Be(new k("invalid-auth-event"))},af.prototype.ra=function(){var t=this;return new Pe((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),df(t))}))},vf.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),qe()):e.Fa(n,r)?gf(t,e):Be(new k("invalid-auth-event"))}else Be(new k("invalid-auth-event"))},mf.prototype.confirm=function(t){return t=ms(this.verificationId,t),this.a(t)};var Ef="mfaInfo",Tf="mfaPendingCredential";function _f(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new If(t,e,n),_i(this,"resolver",this.b)}function Sf(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new _f(e,t.serverResponse,n,t.message)}catch(r){}return null}function Af(){}function Nf(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),It(n,{phoneVerificationInfo:gs(t.a)}),Ju(e,Au,n)}))}function kf(t,e,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},It(n,{phoneVerificationInfo:gs(t.a)}),Ju(e,Nu,n)}))}function Df(t){_i(this,"factorId",t.fa),this.a=t}function Cf(t){if(Df.call(this,t),this.a.fa!=ys.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Rf(t,e){for(var n in dn.call(this,t),e)this[n]=e[n]}function Of(t,e){this.a=t,this.b=[],this.c=T(this.yc,this),An(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Li]=t.uid),t.displayName&&(r[xi]=t.displayName),t.enrollmentTime&&(r[Pi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Mi]=t.phoneNumber);try{e=new Fi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),Pf(this,n)}function xf(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=Ri(t))&&e.push(t)})),e}function Pf(t,e){t.b=e,_i(t,"enrolledFactors",e)}function Lf(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Mf(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Ff(t,e){t.stop(),t.b=Gn(Mf(t,e)).then((function(){return vi()})).then((function(){return t.h()})).then((function(){Ff(t,!0)})).o((function(e){t.i(e)&&Ff(t,!1)}))}function Vf(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Uf(t,e){"undefined"===typeof e&&(t.b?(e=t.b,e=e.a-e.g):e=0),t.c=Date.now()+1e3*e}function jf(t,e){t.b=So(e[Va]||""),t.a=e.refreshToken,e=e.expiresIn,Uf(t,"undefined"!==typeof e?Number(e):void 0)}function qf(t,e){t.b=e.b,t.a=e.a,t.c=e.c}function Bf(t,e){return Ja(t.f,e).then((function(e){return t.b=So(e.access_token),t.a=e.refresh_token,Uf(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Kf(t,e){this.a=t||null,this.b=e||null,Si(this,{lastSignInTime:gi(e||null),creationTime:gi(t||null)})}function Gf(t){return new Kf(t.a,t.b)}function Hf(t,e,n,r,i,o){Si(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function zf(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Ft.SDK_VERSION?Zr(Ft.SDK_VERSION):null;this.a=new Ma(this.l,P(C),r),(this.u=t.emulatorConfig||null)&&Ga(this.a,this.u),this.h=new Vf(this.a),nl(this,e[Va]),jf(this.h,e),_i(this,"refreshToken",this.h.a),sl(this,n||{}),Un.call(this),this.P=!1,this.s&&ri()&&(this.b=sf(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=Zf(this),this.ba=T(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){Wf(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Yf(i,t.f)},this.ja=null,this.S=new Of(this,n),_i(this,"multiFactor",this.S)}function Wf(t,e){t.u=e,Ga(t.a,e),t.b&&(e=t.b,t.b=sf(t.s,t.l,t.m,t.u),t.P&&(Yh(e,t),Xh(t.b,t)))}function Qf(t,e){t.qa&&Cn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&An(e,"languageCodeChanged",t.Pa)}function Xf(t,e){t.$&&Cn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&An(e,"emulatorConfigChanged",t.Ba)}function Yf(t,e){t.aa=e,za(t.a,Ft.SDK_VERSION?Zr(Ft.SDK_VERSION,t.aa):null)}function Jf(t,e){t.ja&&Cn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&An(e,"frameworkChanged",t.Oa)}function $f(t){try{return Ft.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Zf(t){return new Lf((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}function tl(t){t.J||t.D.b||(t.D.start(),Cn(t,"tokenChanged",t.ba),An(t,"tokenChanged",t.ba))}function el(t){Cn(t,"tokenChanged",t.ba),t.D.stop()}function nl(t,e){t.Aa=e,_i(t,"_lat",e)}function rl(t,e){tt(t.W,(function(t){return t==e}))}function il(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return He(e).then((function(){return t}))}function ol(t){t.b&&!t.P&&(t.P=!0,Xh(t.b,t))}function sl(t,e){Si(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Kf(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function al(){}function ul(t){return qe().then((function(){if(t.J)throw new k("app-deleted")}))}function cl(t){return X(t.providerData,(function(t){return t.providerId}))}function hl(t,e){e&&(fl(t,e.providerId),t.providerData.push(e))}function fl(t,e){tt(t.providerData,(function(t){return t.providerId==e}))}function ll(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&_i(t,e,n)}function pl(t,e){t!=e&&(Si(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?_i(t,"metadata",Gf(e.metadata)):_i(t,"metadata",new Kf),z(e.providerData,(function(e){hl(t,e)})),qf(t.h,e.h),_i(t,"refreshToken",t.h.a),Pf(t.S,e.S.b))}function dl(t){return t.I().then((function(e){var n=t.isAnonymous;return gl(t,e).then((function(){return n||ll(t,"isAnonymous",!1),e}))}))}function vl(t,e){e[Va]&&t.Aa!=e[Va]&&(jf(t.h,e),t.dispatchEvent(new Rf("tokenChanged")),nl(t,e[Va]),ll(t,"refreshToken",t.h.a))}function gl(t,e){return Ju(t.a,ku,{idToken:e}).then(T(t.Kc,t))}function yl(t){return(t=t.providerUserInfo)&&t.length?X(t,(function(t){return new Hf(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}function ml(t,e){return dl(t).then((function(){if($(cl(t),e))return il(t).then((function(){throw new k("provider-already-linked")}))}))}function bl(t,e,n){var r=bs(e);return e=Ro(e),Ai({user:t,credential:r,additionalUserInfo:e,operationType:n})}function wl(t,e){return vl(t,e),t.reload().then((function(){return t}))}function Il(t,e,n,r,i){if(!ri())return Be(new k("operation-not-supported-in-this-environment"));if(t.i&&!i)return Be(t.i);var o=Co(n.providerId),s=hi(t.uid+":::"),a=null;(!si()||Gr())&&t.s&&n.isOAuthProvider&&(a=gc(t.s,t.l,t.m,e,n,null,s,Ft.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=Fr(a,o&&o.va,o&&o.ua);return r=r().then((function(){if(Tl(t),!i)return t.I().then((function(){}))})).then((function(){return Zh(t.b,u,e,n,s,!!a,t.tenantId)})).then((function(){return new Pe((function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=nf(t.b,t,e,u,s)}))})).then((function(t){return u&&Mr(u),t?Ai(t):null})).o((function(t){throw u&&Mr(u),t})),_l(t,r,i)}function El(t,e,n,r,i){if(!ri())return Be(new k("operation-not-supported-in-this-environment"));if(t.i&&!i)return Be(t.i);var o=null,s=hi(t.uid+":::");return r=r().then((function(){if(Tl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,il(t)})).then((function(e){return t.ha&&(e=t.ha,e=e.b.set(Cl,t.w(),e.a)),e})).then((function(){return ef(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Rl(t.ha);throw o})).then((function(){if(o)throw o})),_l(t,r,i)}function Tl(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function _l(t,e,n){var r=Sl(t,e,n);return t.N.push(r),r.oa((function(){Z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Sf(e.w(),$f(t),T(t.jc,t))),n||e}))}function Sl(t,e,n){return t.i&&!n?(e.cancel(),Be(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new Rf("userInvalidated")),t.i=e),e}))}function Al(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Va]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new zf(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&hl(i,Ai(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Nl(t,e,n,r){var i=new zf(t,e);return n&&(i.ha=n),r&&Yf(i,r),i.reload().then((function(){return i}))}function kl(t,e,n,r){var i=t.h,o={};return o[Va]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new zf(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Yf(e,r),pl(e,t),e}function Dl(t){this.a=t,this.b=ah()}If.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=bt(e.f);return delete n[Ef],delete n[Tf],It(n,t),e.g(n)}))},A(_f,k),Af.prototype.tb=function(t,e,n){return e.type==Bo?Nf(this,t,e,n):kf(this,t,e)},A(Df,Af),A(Cf,Df),A(Rf,dn),t=Of.prototype,t.yc=function(t){Pf(this,xf(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new qo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return vl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Ju(r,Yu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=Q(e.b,(function(t){return t.uid!=n}));return Pf(e,r),vl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:X(this.b,(function(t){return t.w()}))}}},Lf.prototype.start=function(){this.a=this.c,Ff(this,!0)},Lf.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Vf.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Vf.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Be(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Bf(this,{grant_type:"refresh_token",refresh_token:this.a}):qe(null):qe({accessToken:this.b.toString(),refreshToken:this.a})},Kf.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},A(zf,Un),zf.prototype.xa=function(t){this.za=t,Ka(this.a,t)},zf.prototype.la=function(){return this.za},zf.prototype.Ga=function(){return nt(this.aa)},zf.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},_i(zf.prototype,"providerId","firebase"),t=zf.prototype,t.reload=function(){var t=this;return _l(this,ul(this).then((function(){return dl(t).then((function(){return il(t)})).then(al)})))},t.oc=function(t){return this.I(t).then((function(t){return new wf(t)}))},t.I=function(t){var e=this;return _l(this,ul(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.Aa&&(nl(e,t.accessToken),e.dispatchEvent(new Rf("tokenChanged"))),ll(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(t=t.users,!t||!t.length)throw new k("internal-error");t=t[0],sl(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=yl(t),n=0;n<e.length;n++)hl(this,e[n]);ll(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Rf("userReloaded",{hd:t}))},t.Lc=function(t){return Ei("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return _l(this,t.c(this.a,this.uid).then((function(t){return vl(e,t),n=bl(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Ei("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return _l(this,ml(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=bl(e,t,"link"),wl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return _l(this,ml(this,"phone").then((function(){return bf($f(n),t,e,T(n.rb,n))})))},t.Mc=function(t,e){var n=this;return _l(this,qe().then((function(){return bf($f(n),t,e,T(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return _l(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return vl(e,t),e.reload()})))},t.ed=function(t){var e=this;return _l(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return vl(e,t),e.reload()})))},t.Db=function(t){var e=this;return _l(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return vl(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return ul(this);var e=this;return _l(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return vl(e,t),ll(e,"displayName",t.displayName||null),ll(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&(_i(t,"displayName",e.displayName),_i(t,"photoURL",e.photoURL))})),il(e)})).then(al))},t.cd=function(t){var e=this;return _l(this,dl(this).then((function(n){return $(cl(e),t)?hu(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(cl(e),(function(t){n[t]||fl(e,t)})),n[ys.PROVIDER_ID]||_i(e,"phoneNumber",null),il(e)})):il(e).then((function(){throw new k("no-such-provider")}))})))},t.delete=function(){var t=this;return _l(this,this.I().then((function(e){return Ju(t.a,Eu,{idToken:e})})).then((function(){t.dispatchEvent(new Rf("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Qf(t,null),Xf(t,null),Jf(t,null),t.N=[],t.J=!0,el(t),_i(t,"refreshToken",null),t.b&&Yh(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?T(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?T(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?T(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?T(this.Mb,this):null},t.Ec=function(t){var e=this;return Il(this,"linkViaPopup",t,(function(){return ml(e,t.providerId).then((function(){return il(e)}))}),!1)},t.Nc=function(t){return Il(this,"reauthViaPopup",t,(function(){return qe()}),!0)},t.Fc=function(t){var e=this;return El(this,"linkViaRedirect",t,(function(){return ml(e,t.providerId)}),!1)},t.Oc=function(t){return El(this,"reauthViaRedirect",t,(function(){return qe()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return vu(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=bl(i,t,"link"),wl(i,t)})).then((function(){return o})),_l(this,n)},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,s=qe().then((function(){return Ho(gu(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=bl(i,t,"reauthenticate"),vl(i,t),i.i=null,i.reload()})).then((function(){return o}));return _l(this,s,!0)},t.vb=function(t){var e=this,n=null;return _l(this,this.I().then((function(e){return n=e,"undefined"===typeof t||mt(t)?{}:mo(new ao(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return _l(this,this.I().then((function(t){return r=t,"undefined"===typeof e||mt(e)?{}:mo(new ao(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return t=Ho(qe(t),n.uid).then((function(t){return e=bl(n,t,"reauthenticate"),vl(n,t),n.i=null,n.reload()})).then((function(){return e})),_l(this,t,!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&It(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(Ni(e))})),It(t,this.S.w()),t};var Cl={name:"redirectUser",F:"session"};function Rl(t){return fh(t.b,Cl,t.a)}function Ol(t,e){return t.b.get(Cl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Al(t||{})}))}function xl(t){this.a=t,this.b=ah(),this.c=null,this.f=Ll(this),this.b.addListener(Fl("local"),this.a,T(this.g,this))}function Pl(t,e){var n,r=[];for(n in ih)ih[n]!==e&&r.push(fh(t.b,Fl(ih[n]),t.a));return r.push(fh(t.b,Ml,t.a)),Ge(r)}function Ll(t){var e=Fl("local"),n=Fl("session"),r=Fl("none");return hh(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Ml,t.a).then((function(t){return t?Fl(t):e}))}))}))})).then((function(e){return t.c=e,Pl(t,e.F)})).o((function(){t.c||(t.c=e)}))}xl.prototype.g=function(){var t=this,e=Fl("local");Bl(this,(function(){return qe().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Pl(t,"local").then((function(){t.c=e}))}))}))};var Ml={name:"persistence",F:"session"};function Fl(t){return{name:"authUser",F:t}}function Vl(t){return Bl(t,(function(){return t.b.set(Ml,t.c.F,t.a)}))}function Ul(t,e){return Bl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function jl(t){return Bl(t,(function(){return fh(t.b,t.c,t.a)}))}function ql(t,e,n){return Bl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Al(t||{})}))}))}function Bl(t,e){return t.f=t.f.then(e,e),t.f}function Kl(t){if(this.l=!1,_i(this,"settings",new yf),_i(this,"app",t),!ip(this).options||!ip(this).options.apiKey)throw new k("invalid-api-key");t=Ft.SDK_VERSION?Zr(Ft.SDK_VERSION):null,this.a=new Ma(ip(this).options&&ip(this).options.apiKey,P(C),t),this.P=[],this.s=[],this.N=[],this.Pa=Ft.INTERNAL.createSubscribe(T(this.zc,this)),this.W=void 0,this.ib=Ft.INTERNAL.createSubscribe(T(this.Ac,this)),Zl(this,null),this.i=new xl(ip(this).options.apiKey+":"+ip(this).name),this.D=new Dl(ip(this).options.apiKey+":"+ip(this).name),this.$=cp(this,ep(this)),this.h=cp(this,np(this)),this.ba=!1,this.ja=T(this.Zc,this),this.Ba=T(this.da,this),this.qa=T(this.mc,this),this.za=T(this.wc,this),this.Aa=T(this.xc,this),this.b=null,Yl(this),this.INTERNAL={},this.INTERNAL["delete"]=T(this.delete,this),this.INTERNAL.logFramework=T(this.Gc,this),this.u=0,Un.call(this),Ql(this),this.J=[],this.R=null}function Gl(t){dn.call(this,"languageCodeChanged"),this.h=t}function Hl(t){dn.call(this,"emulatorConfigChanged"),this.c=t}function zl(t){dn.call(this,"frameworkChanged"),this.f=t}function Wl(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),c.document&&!t&&qr().then((function(){var t=c.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),c.document.body.appendChild(t)}))}function Ql(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=or(this.R.url);t=Ai({protocol:t.c,host:t.a,port:t.g,options:Ai({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}function Xl(t){return t.Oa||Be(new k("auth-domain-config-required"))}function Yl(t){var e=ip(t).options.authDomain,n=ip(t).options.apiKey;e&&ri()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=sf(e,n,ip(t).name,t.R),Xh(t.b,t),op(t)&&ol(op(t)),t.m){ol(t.m);var r=t.m;r.xa(t.la()),Qf(r,t),r=t.m,Yf(r,t.J),Jf(r,t),r=t.m,Wf(r,t.R),Xf(r,t),t.m=null}return t.b}})))}function Jl(t){if(!ri())return Be(new k("operation-not-supported-in-this-environment"));var e=Xl(t).then((function(){return t.b.ra()})).then((function(t){return t?Ai(t):null}));return cp(t,e)}function $l(t,e){var n={};return n.apiKey=ip(t).options.apiKey,n.authDomain=ip(t).options.authDomain,n.appName=ip(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return Nl(n,e,t.D,t.Ga())})).then((function(e){return op(t)&&e.uid==op(t).uid?(pl(op(t),e),t.da(e)):(Zl(t,e),ol(e),t.da(e))})).then((function(){ap(t)}))}function Zl(t,e){op(t)&&(rl(op(t),t.Ba),Cn(op(t),"tokenChanged",t.qa),Cn(op(t),"userDeleted",t.za),Cn(op(t),"userInvalidated",t.Aa),el(op(t))),e&&(e.W.push(t.Ba),An(e,"tokenChanged",t.qa),An(e,"userDeleted",t.za),An(e,"userInvalidated",t.Aa),0<t.u&&tl(e)),_i(t,"currentUser",e),e&&(e.xa(t.la()),Qf(e,t),Yf(e,t.J),Jf(e,t),Wf(e,t.R),Xf(e,t))}function tp(t){var e=Ol(t.D,ip(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Rl(t.D)}));return cp(t,e)}function ep(t){var e=ip(t).options.authDomain,n=tp(t).then((function(){return ql(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Ul(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:jl(t.i)}))):null})).then((function(e){Zl(t,e||null)}));return cp(t,n)}function np(t){return t.$.then((function(){return Jl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Fl("local"),e.a,t.ja)}}))}function rp(t,e){var n=null,r=null;return cp(t,e.then((function(e){return n=bs(e),r=Ro(e),$l(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Sf(e.w(),t,T(t.kc,t))),n||e})).then((function(){return Ai({user:op(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ip(t){return t.app}function op(t){return t.currentUser}function sp(t){return op(t)&&op(t)._lat||null}function ap(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](sp(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](sp(t))}}function up(t,e){t.N.push(e),cp(t,t.h.then((function(){!t.l&&$(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(sp(t)))})))}function cp(t,e){return t.P.push(e),e.oa((function(){Z(t.P,e)})),e}function hp(){}function fp(){this.a={},this.b=1e12}xl.prototype.yb=function(t){var e=null,n=this;return oh(t),Bl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Pl(n,t)})).then((function(){if(n.c=Fl(t),e)return n.b.set(n.c,e,n.a)})):qe()}))},A(Kl,Un),A(Gl,dn),A(Hl,dn),A(zl,dn),t=Kl.prototype,t.yb=function(t){return t=this.i.yb(t),cp(this,t)},t.xa=function(t){this.aa===t||this.l||(this.aa=t,Ka(this.a,this.aa),this.dispatchEvent(new Gl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=c.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,Wl(e),this.R={url:t,ec:e},this.settings.jb=!0,Ga(this.a,this.R),this.dispatchEvent(new Hl(this.R))}},t.Gc=function(t){this.J.push(t),za(this.a,Ft.SDK_VERSION?Zr(Ft.SDK_VERSION,this.J):null),this.dispatchEvent(new zl(this.J))},t.Ga=function(){return nt(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ip(this).options.apiKey,authDomain:ip(this).options.authDomain,appName:ip(this).name,currentUser:op(this)&&op(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?T(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return rp(i,du(i.a,o))}))},t.Xc=function(t){if(!ri())return Be(new k("operation-not-supported-in-this-environment"));var e=this,n=Co(t.providerId),r=hi(),i=null;(!si()||Gr())&&ip(this).options.authDomain&&t.isOAuthProvider&&(i=gc(ip(this).options.authDomain,ip(this).options.apiKey,ip(this).name,"signInViaPopup",t,null,r,Ft.SDK_VERSION||null,null,null,this.T(),this.R));var o=Fr(i,n&&n.va,n&&n.ua);return n=Xl(this).then((function(n){return Zh(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Pe((function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=nf(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&Mr(o),t?Ai(t):null})).o((function(t){throw o&&Mr(o),t})),cp(this,n)},t.Yc=function(t){if(!ri())return Be(new k("operation-not-supported-in-this-environment"));var e=this,n=Xl(this).then((function(){return Vl(e.i)})).then((function(){return ef(e.b,"signInViaRedirect",t,void 0,e.T())}));return cp(this,n)},t.ra=function(){var t=this;return Jl(this).then((function(e){return t.b&&cf(t.b.b),e})).o((function(e){throw t.b&&cf(t.b.b),e}))},t.dd=function(t){if(!t)return Be(new k("null-user"));if(this.S!=t.tenantId)return Be(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=ip(this).options.apiKey,n.authDomain=ip(this).options.authDomain,n.appName=ip(this).name;var r=kl(t,n,e.D,e.Ga());return cp(this,this.h.then((function(){if(ip(e).options.apiKey!=t.l)return r.reload()})).then((function(){return op(e)&&t.uid==op(e).uid?(pl(op(e),t),e.da(t)):(Zl(e,r),ol(r),e.da(r))})).then((function(){ap(e)})))},t.Bb=function(){var t=this,e=this.h.then((function(){return t.b&&cf(t.b.b),op(t)?(Zl(t,null),jl(t.i).then((function(){ap(t)}))):qe()}));return cp(this,e)},t.Zc=function(){var t=this;return ql(this.i,ip(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=op(t)&&e){n=op(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return pl(op(t),e),op(t).I();(op(t)||e)&&(Zl(t,e),e&&(ol(e),e.ha=t.D),t.b&&Xh(t.b,t),ap(t))}}))},t.da=function(t){return Ul(this.i,t)},t.mc=function(){ap(this),this.da(op(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return rp(e,qe(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(op(e))}))},t.Ac=function(t){var e=this;up(this,(function(){t.next(op(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(op(r)):"function"===typeof t.next&&t.next(op(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(op(r)):"function"===typeof t.next&&t.next(op(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this,n=this.h.then((function(){return op(e)?op(e).I(t).then((function(t){return{accessToken:t}})):null}));return cp(this,n)},t.Tc=function(t){var e=this;return this.h.then((function(){return rp(e,Ju(e.a,Hu,{token:t}))})).then((function(t){var n=t.user;return ll(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return rp(n,Ju(n.a,zu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return rp(n,Ju(n.a,wu,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return rp(e,t.ka(e.a))}))},t.Sc=function(t){return Ei("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=op(t);if(e&&e.isAnonymous){var n=Ai({providerId:null,isNewUser:!1});return Ai({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return rp(t,t.a.Ab()).then((function(e){var n=e.user;return ll(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return op(this)&&op(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&op(this)&&tl(op(this))},t.Pc=function(t){var e=this;z(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&op(this)&&el(op(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),cp(this,this.h.then((function(){e.l||$(e.s,t)&&t(sp(e))})))},t.removeAuthTokenListener=function(t){tt(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i,t.b.removeListener(Fl("local"),t.a,this.ja)),this.b&&(Yh(this.b,this),cf(this.b.b)),Promise.resolve()},t.hc=function(t){return cp(this,eu(this.a,t))},t.Bc=function(t){return!!ps(t)},t.xb=function(t,e){var n=this;return cp(this,qe().then((function(){var t=new ao(e);if(!t.c)throw new k("argument-error",ho+" must be true when sending sign in link to email");return mo(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return cp(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return cp(this,this.a.Sa(t).then((function(t){return new Vi(t)})))},t.kb=function(t){return cp(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return cp(this,qe().then((function(){return"undefined"===typeof e||mt(e)?{}:mo(new ao(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return cp(this,bf(this,t,e,T(this.ab,this)))},t.Vc=function(t,e){var n=this;return cp(this,qe().then((function(){var r=e||Rr(),i=ls(t,r);if(r=ps(r),!r)throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.ab(i)})))},hp.prototype.render=function(){},hp.prototype.reset=function(){},hp.prototype.getResponse=function(){},hp.prototype.execute=function(){};var lp=null;function pp(t,e){return(e=dp(e))&&t.a[e]||null}function dp(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function vp(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=be(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():An(this.f,"click",this.i)}function gp(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function yp(){}function mp(){}fp.prototype.render=function(t,e){return this.a[this.b.toString()]=new vp(t,e),this.b++},fp.prototype.reset=function(t){var e=pp(this,t);t=dp(t),e&&t&&(e.delete(),delete this.a[t])},fp.prototype.getResponse=function(t){return(t=pp(this,t))?t.getResponse():null},fp.prototype.execute=function(t){(t=pp(this,t))&&t.execute()},vp.prototype.getResponse=function(){return gp(this),this.b},vp.prototype.execute=function(){gp(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=Qr();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},vp.prototype.delete=function(){gp(this),this.g=!0,clearTimeout(this.a),this.a=null,Cn(this.f,"click",this.i)},_i(yp,"FACTOR_ID","phone"),mp.prototype.g=function(){return lp||(lp=new fp),qe(lp)},mp.prototype.c=function(){};var bp=null;function wp(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ip=new Tt(Nt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ep=new pi(3e4,6e4);wp.prototype.g=function(t){var e=this;return new Pe((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Ep.get());if(!c.grecaptcha||t!==e.f&&!e.b){c[e.a]=function(){if(c.grecaptcha){e.f=t;var o=c.grecaptcha.render;c.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(c.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete c[e.a]};var o=Rt(Ip,{onload:e.a,hl:t||""});qe(ka(o)).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(c.grecaptcha)}))},wp.prototype.c=function(){this.b--};var Tp=null;function _p(t,e,n,r,i,o,s){if(_i(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(bp||(bp=new mp),s=bp):(Tp||(Tp=new wp),s=Tp),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Np])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[kp],!c.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!be(e)||!this.i&&be(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ma(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Sp];this.a[Sp]=function(t){if(Dp(a,t),"function"===typeof u)u(t);else if("string"===typeof u){var e=ei(u,c);"function"===typeof e&&e(t)}};var h=this.a[Ap];this.a[Ap]=function(){if(Dp(a,null),"function"===typeof h)h();else if("string"===typeof h){var t=ei(h,c);"function"===typeof t&&t()}}}var Sp="callback",Ap="expired-callback",Np="sitekey",kp="size";function Dp(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Cp(t,e){tt(t.l,(function(t){return t==e}))}function Rp(t,e){return t.h.push(e),e.oa((function(){Z(t.h,e)})),e}function Op(t){if(t.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function xp(t,e,n){var r=!1;try{this.b=n||Ft.app()}catch(s){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=Ft.SDK_VERSION?Zr(Ft.SDK_VERSION,o):null,_p.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,P(C),r)}function Pp(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Lp.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Lp[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}t=_p.prototype,t.Ia=function(){var t=this;return this.f?this.f:this.f=Rp(this,qe().then((function(){if(ii()&&!Hr())return qr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,Ju(t.s,Pu,{})})).then((function(e){t.a[Np]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Op(this);var t=this;return Rp(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=be(e);e=_e("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Op(this);var t=this;return Rp(this,this.render().then((function(e){return new Pe((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(Cp(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Op(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Op(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=be(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},A(xp,_p);var Lp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Mp(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Fp(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function Vp(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:y}}function Up(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function jp(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function qp(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}function Bp(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Kl)}}}function Kp(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Ft.app.App)}}}function Gp(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Hp(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}}function zp(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Wp(t,e){return y(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function Qp(t){return y(t)&&"string"===typeof t.uid}function Xp(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}}function Yp(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jp(t,e){for(var n in e){var r=e[n].name;t[r]=td(r,t[n],e[n].j)}}function $p(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){Pp(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function Zp(t,e,n,r){t[e]=td(e,n,r)}function td(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Pp(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=ed(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function ed(t){return t=t.split("."),t[t.length-1]}Jp(Kl.prototype,{kb:{name:"applyActionCode",j:[Mp("code")]},Sa:{name:"checkActionCode",j:[Mp("code")]},ob:{name:"confirmPasswordReset",j:[Mp("code"),Mp("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Mp("email"),Mp("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Mp("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Mp("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yp(Vp(),Up(),"nextOrObserver"),Up("opt_error",!0),Up("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yp(Vp(),Up(),"nextOrObserver"),Up("opt_error",!0),Up("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Mp("email"),Yp(Vp("opt_actionCodeSettings",!0),jp(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Mp("email"),Vp("actionCodeSettings")]},yb:{name:"setPersistence",j:[Mp("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Gp()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Gp()]},Tc:{name:"signInWithCustomToken",j:[Mp("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Mp("email"),Mp("password")]},Vc:{name:"signInWithEmailLink",j:[Mp("email"),Mp("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Mp("phoneNumber"),Xp()]},Xc:{name:"signInWithPopup",j:[zp()]},Yc:{name:"signInWithRedirect",j:[zp()]},dd:{name:"updateCurrentUser",j:[Yp(function(t){return{name:"user",K:"an instance of Firebase User",optional:!!t,M:function(t){return!!(t&&t instanceof zf)}}}(),jp(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Mp(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Mp("url"),Vp("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Mp("code")]}}),$p(Kl.prototype,{lc:{name:"languageCode",lb:Yp(Mp(),jp(),"languageCode")},ti:{name:"tenantId",lb:Yp(Mp(),jp(),"tenantId")}}),Kl.Persistence=ih,Kl.Persistence.LOCAL="local",Kl.Persistence.SESSION="session",Kl.Persistence.NONE="none",Jp(zf.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Fp("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Fp("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Gp()]},rb:{name:"linkWithCredential",j:[Gp()]},Dc:{name:"linkWithPhoneNumber",j:[Mp("phoneNumber"),Xp()]},Ec:{name:"linkWithPopup",j:[zp()]},Fc:{name:"linkWithRedirect",j:[zp()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Gp()]},ub:{name:"reauthenticateWithCredential",j:[Gp()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Mp("phoneNumber"),Xp()]},Nc:{name:"reauthenticateWithPopup",j:[zp()]},Oc:{name:"reauthenticateWithRedirect",j:[zp()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Yp(Vp("opt_actionCodeSettings",!0),jp(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Mp(null,!0)]},cd:{name:"unlink",j:[Mp("provider")]},Cb:{name:"updateEmail",j:[Mp("email")]},Db:{name:"updatePassword",j:[Mp("password")]},ed:{name:"updatePhoneNumber",j:[Gp("phone")]},Eb:{name:"updateProfile",j:[Vp("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Mp("email"),Yp(Vp("opt_actionCodeSettings",!0),jp(null,!0),"opt_actionCodeSettings",!0)]}}),Jp(fp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jp(hp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jp(Pe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$p(yf.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Fp("appVerificationDisabledForTesting")}}),Jp(mf.prototype,{confirm:{name:"confirm",j:[Mp("verificationCode")]}}),Zp(Go,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[Jo,hs,vs,Qo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Yp(Mp(),Vp(),"json")]),Zp(fs,"credential",(function(t,e){return new cs(t,e)}),[Mp("email"),Mp("password")]),Jp(cs.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(es.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[Vp("customOAuthParameters")]}}),Zp(es,"credential",ns,[Yp(Mp(),Vp(),"token")]),Zp(fs,"credentialWithLink",ls,[Mp("email"),Mp("emailLink")]),Jp(rs.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[Vp("customOAuthParameters")]}}),Zp(rs,"credential",is,[Yp(Mp(),Vp(),"token")]),Jp(os.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[Vp("customOAuthParameters")]}}),Zp(os,"credential",ss,[Yp(Mp(),Yp(Vp(),jp()),"idToken"),Yp(Mp(),jp(),"accessToken",!0)]),Jp(as.prototype,{Ka:{name:"setCustomParameters",j:[Vp("customOAuthParameters")]}}),Zp(as,"credential",us,[Yp(Mp(),Vp(),"token"),Mp("secret",!0)]),Jp(ts.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},credential:{name:"credential",j:[Yp(Mp(),Yp(Vp(),jp()),"optionsOrIdToken"),Yp(Mp(),jp(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Vp("customOAuthParameters")]}}),Jp(Xo.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(zo.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Zp(ys,"credential",ms,[Mp("verificationId"),Mp("verificationCode")]),Jp(ys.prototype,{gb:{name:"verifyPhoneNumber",j:[Yp(Mp(),function(t,e){return{name:t||"phoneInfoOptions",K:"valid phone info options",optional:!!e,M:function(t){return!!t&&(t.session&&t.phoneNumber?Wp(t.session,Bo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?Wp(t.session,Ko)&&Qp(t.multiFactorHint):t.session&&t.multiFactorUid?Wp(t.session,Ko)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}}}(),"phoneInfoOptions"),Xp()]}}),Jp(ds.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(k.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(ks.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(Ns.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(_f.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(If.prototype,{Rc:{name:"resolveSignIn",j:[Hp()]}}),Jp(Of.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Hp(),Mp("displayName",!0)]},bd:{name:"unenroll",j:[Yp({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Qp},Mp(),"multiFactorInfoIdentifier")]}}),Jp(xp.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zp($i,"parseLink",so,[Mp("link")]),Zp(yp,"assertion",(function(t){return new Cf(t)}),[Gp("phone")]),function(){if("undefined"===typeof Ft||!Ft.INTERNAL||!Ft.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ji,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Ui,VERIFY_AND_CHANGE_EMAIL:qi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Kl,AuthCredential:Go,Error:k};Zp(t,"EmailAuthProvider",fs,[]),Zp(t,"FacebookAuthProvider",es,[]),Zp(t,"GithubAuthProvider",rs,[]),Zp(t,"GoogleAuthProvider",os,[]),Zp(t,"TwitterAuthProvider",as,[]),Zp(t,"OAuthProvider",ts,[Mp("providerId")]),Zp(t,"SAMLAuthProvider",Zo,[Mp("providerId")]),Zp(t,"PhoneAuthProvider",ys,[Bp()]),Zp(t,"RecaptchaVerifier",xp,[Yp(Mp(),qp(),"recaptchaContainer"),Vp("recaptchaParameters",!0),Kp()]),Zp(t,"ActionCodeURL",$i,[]),Zp(t,"PhoneMultiFactorGenerator",yp,[]),Ft.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return t=t.getProvider("app").getImmediate(),new Kl(t)},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Ft.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:T(t.getUid,t),getToken:T(t.nc,t),addAuthTokenListener:T(t.cc,t),removeAuthTokenListener:T(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Ft.registerVersion("@firebase/auth","0.16.8"),Ft.INTERNAL.extendNamespace({User:zf})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Lv={apiKey:"AIzaSyA_2MPLiODubH0nfQByIRAmQQiW--Jj67o",authDomain:"dignowise.firebaseapp.com",projectId:"dignowise",storageBucket:"dignowise.appspot.com",messagingSenderId:"713840943959",appId:"1:713840943959:web:41671f457d7151da139412"};Ft.initializeApp(Lv);Ft.firestore();const Mv=Ft.auth();Ft.firestore.FieldValue.serverTimestamp},4427:function(t,e,n){t.exports=n.p+"img/logo.18949292.png"},3550:function(t,e,n){var r=n(9985),i=String,o=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw new o("Can't set "+i(t)+" as a prototype")}},767:function(t,e,n){var r=n(3622),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw new i("Incorrect invocation")}},7075:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4872:function(t,e,n){var r,i,o,s=n(7075),a=n(7697),u=n(9037),c=n(9985),h=n(8999),f=n(6812),l=n(926),p=n(3691),d=n(5773),v=n(1880),g=n(2148),y=n(3622),m=n(1868),b=n(9385),w=n(4201),I=n(4630),E=n(618),T=E.enforce,_=E.get,S=u.Int8Array,A=S&&S.prototype,N=u.Uint8ClampedArray,k=N&&N.prototype,D=S&&m(S),C=A&&m(A),R=Object.prototype,O=u.TypeError,x=w("toStringTag"),P=I("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",M=s&&!!b&&"Opera"!==l(u.opera),F=!1,V={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},j=function(t){if(!h(t))return!1;var e=l(t);return"DataView"===e||f(V,e)||f(U,e)},q=function(t){var e=m(t);if(h(e)){var n=_(e);return n&&f(n,L)?n[L]:q(e)}},B=function(t){if(!h(t))return!1;var e=l(t);return f(V,e)||f(U,e)},K=function(t){if(B(t))return t;throw new O("Target is not a typed array")},G=function(t){if(c(t)&&(!b||y(D,t)))return t;throw new O(p(t)+" is not a typed array constructor")},H=function(t,e,n,r){if(a){if(n)for(var i in V){var o=u[i];if(o&&f(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(c){}}}C[t]&&!n||v(C,t,n?e:M&&A[t]||e,r)}},z=function(t,e,n){var r,i;if(a){if(b){if(n)for(r in V)if(i=u[r],i&&f(i,t))try{delete i[t]}catch(o){}if(D[t]&&!n)return;try{return v(D,t,n?e:M&&D[t]||e)}catch(o){}}for(r in V)i=u[r],!i||i[t]&&!n||v(i,t,e)}};for(r in V)i=u[r],o=i&&i.prototype,o?T(o)[L]=i:M=!1;for(r in U)i=u[r],o=i&&i.prototype,o&&(T(o)[L]=i);if((!M||!c(D)||D===Function.prototype)&&(D=function(){throw new O("Incorrect invocation")},M))for(r in V)u[r]&&b(u[r],D);if((!M||!C||C===R)&&(C=D.prototype,M))for(r in V)u[r]&&b(u[r].prototype,C);if(M&&m(k)!==C&&b(k,C),a&&!f(C,x))for(r in F=!0,g(C,x,{configurable:!0,get:function(){return h(this)?this[P]:void 0}}),V)u[r]&&d(u[r],P,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:F&&P,aTypedArray:K,aTypedArrayConstructor:G,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:z,getTypedArrayConstructor:q,isView:j,isTypedArray:B,TypedArray:D,TypedArrayPrototype:C}},9976:function(t,e,n){var r=n(6310);t.exports=function(t,e){var n=0,i=r(e),o=new t(i);while(i>n)o[n]=e[n++];return o}},6004:function(t,e,n){var r=n(8844);t.exports=r([].slice)},6166:function(t,e,n){var r=n(6310);t.exports=function(t,e){for(var n=r(t),i=new e(n),o=0;o<n;o++)i[o]=t[n-o-1];return i}},6134:function(t,e,n){var r=n(6310),i=n(8700),o=RangeError;t.exports=function(t,e,n,s){var a=r(t),u=i(n),c=u<0?a+u:u;if(c>=a||c<0)throw new o("Incorrect index");for(var h=new e(a),f=0;f<a;f++)h[f]=f===c?s:t[f];return h}},926:function(t,e,n){var r=n(3043),i=n(9985),o=n(6648),s=n(4201),a=s("toStringTag"),u=Object,c="Arguments"===o(function(){return arguments}()),h=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=h(e=u(t),a))?n:c?o(e):"Object"===(r=o(e))&&i(e.callee)?"Arguments":r}},1748:function(t,e,n){var r=n(3689);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},2148:function(t,e,n){var r=n(8702),i=n(2560);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},7136:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},3127:function(t){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},4764:function(t,e,n){var r=n(71);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},806:function(t,e,n){var r=n(9037),i=n(6648);t.exports="process"===i(r.process)},6610:function(t,e,n){var r=n(8844),i=Error,o=r("".replace),s=function(t){return String(new i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,u=a.test(s);t.exports=function(t,e){if(u&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,a,"");return t}},1735:function(t,e,n){var r=n(7215),i=Function.prototype,o=i.apply,s=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},4071:function(t,e,n){var r=n(6576),i=n(509),o=n(7215),s=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},2743:function(t,e,n){var r=n(8844),i=n(509);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},6576:function(t,e,n){var r=n(6648),i=n(8844);t.exports=function(t){if("Function"===r(t))return i(t)}},2688:function(t,e,n){var r=n(6058);t.exports=r("document","documentElement")},3457:function(t,e,n){var r=n(9985),i=n(8999),o=n(9385);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},9401:function(t,e,n){var r=n(926);t.exports=function(t){var e=r(t);return"BigInt64Array"===e||"BigUint64Array"===e}},3841:function(t,e,n){var r=n(4327);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},1868:function(t,e,n){var r=n(6812),i=n(9985),o=n(690),s=n(2713),a=n(1748),u=s("IE_PROTO"),c=Object,h=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=o(t);if(r(e,u))return e[u];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof c?h:null}},9385:function(t,e,n){var r=n(2743),i=n(5027),o=n(3550);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(s){}return function(n,r){return i(n),o(r),e?t(n,r):n.__proto__=r,n}}():void 0)},8552:function(t,e,n){var r=n(9037),i=n(1735),o=n(9985),s=n(3127),a=n(71),u=n(6004),c=n(1500),h=r.Function,f=/MSIE .\./.test(a)||s&&function(){var t=r.Bun.version.split(".");return t.length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2])}();t.exports=function(t,e){var n=e?2:1;return f?function(r,s){var a=c(arguments.length,1)>n,f=o(r)?r:h(r),l=a?u(arguments,n):[],p=a?function(){i(f,this,l)}:f;return e?t(p,s):t(p)}:t}},9886:function(t,e,n){var r,i,o,s,a=n(9037),u=n(1735),c=n(4071),h=n(9985),f=n(6812),l=n(3689),p=n(2688),d=n(6004),v=n(6420),g=n(1500),y=n(4764),m=n(806),b=a.setImmediate,w=a.clearImmediate,I=a.process,E=a.Dispatch,T=a.Function,_=a.MessageChannel,S=a.String,A=0,N={},k="onreadystatechange";l((function(){r=a.location}));var D=function(t){if(f(N,t)){var e=N[t];delete N[t],e()}},C=function(t){return function(){D(t)}},R=function(t){D(t.data)},O=function(t){a.postMessage(S(t),r.protocol+"//"+r.host)};b&&w||(b=function(t){g(arguments.length,1);var e=h(t)?t:T(t),n=d(arguments,1);return N[++A]=function(){u(e,void 0,n)},i(A),A},w=function(t){delete N[t]},m?i=function(t){I.nextTick(C(t))}:E&&E.now?i=function(t){E.now(C(t))}:_&&!y?(o=new _,s=o.port2,o.port1.onmessage=R,i=c(s.postMessage,s)):a.addEventListener&&h(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!l(O)?(i=O,a.addEventListener("message",R,!1)):i=k in v("script")?function(t){p.appendChild(v("script"))[k]=function(){p.removeChild(this),D(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:b,clear:w}},1530:function(t,e,n){var r=n(8732),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},3043:function(t,e,n){var r=n(4201),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},4327:function(t,e,n){var r=n(926),i=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},1500:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},4224:function(t,e,n){var r=n(6166),i=n(4872),o=i.aTypedArray,s=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;s("toReversed",(function(){return r(o(this),a(this))}))},1121:function(t,e,n){var r=n(4872),i=n(8844),o=n(509),s=n(9976),a=r.aTypedArray,u=r.getTypedArrayConstructor,c=r.exportTypedArrayMethod,h=i(r.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&o(t);var e=a(this),n=s(u(e),e);return h(n,t)}))},7133:function(t,e,n){var r=n(6134),i=n(4872),o=n(9401),s=n(8700),a=n(1530),u=i.aTypedArray,c=i.getTypedArrayConstructor,h=i.exportTypedArrayMethod,f=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();h("with",{with:function(t,e){var n=u(this),i=s(t),h=o(n)?a(e):+e;return r(n,c(n),i,h)}}["with"],!f)},9742:function(t,e,n){var r=n(9989),i=n(9037),o=n(9886).clear;r({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==o},{clearImmediate:o})},3429:function(t,e,n){var r=n(9989),i=n(9037),o=n(6058),s=n(5684),a=n(2560).f,u=n(6812),c=n(767),h=n(3457),f=n(3841),l=n(7136),p=n(6610),d=n(7697),v=n(3931),g="DOMException",y=o("Error"),m=o(g),b=function(){c(this,w);var t=arguments.length,e=f(t<1?void 0:arguments[0]),n=f(t<2?void 0:arguments[1],"Error"),r=new m(e,n),i=new y(e);return i.name=g,a(r,"stack",s(1,p(i.stack,1))),h(r,this,b),r},w=b.prototype=m.prototype,I="stack"in new y(g),E="stack"in new m(1,2),T=m&&d&&Object.getOwnPropertyDescriptor(i,g),_=!!T&&!(T.writable&&T.configurable),S=I&&!_&&!E;r({global:!0,constructor:!0,forced:v||S},{DOMException:S?b:m});var A=o(g),N=A.prototype;if(N.constructor!==A)for(var k in v||a(N,"constructor",s(1,A)),l)if(u(l,k)){var D=l[k],C=D.s;u(A,C)||a(A,C,s(6,D.c))}},88:function(t,e,n){n(9742),n(2731)},2731:function(t,e,n){var r=n(9989),i=n(9037),o=n(9886).set,s=n(8552),a=i.setImmediate?s(o,!1):o;r({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==a},{setImmediate:a})}}]);
//# sourceMappingURL=747.0b44fe4c.js.map